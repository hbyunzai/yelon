import{$b as _,a as f,ac as I,ba as C,da as E,ea as b,fa as S,l as A,ld as x,mc as w,wc as T}from"./chunk-5G6CWZQB.js";function Y(a,d){if(!a)return"";let e=f({},typeof d=="string"?{mask:d}:d),i=f({0:{pattern:/\d/,default:"0"},9:{pattern:/\d/},"#":{pattern:/[a-zA-Z0-9]/},U:{pattern:/[a-zA-Z]/,transform:r=>r.toLocaleUpperCase()},L:{pattern:/[a-zA-Z]/,transform:r=>r.toLocaleLowerCase()},"*":{pattern:/.*/,transform:r=>"*"}},e.tokens),t=a.split("");return e.mask.split("").reduce((r,s)=>{let c=i[s];if(!c)return r.push(s),r;let n=t.shift()??"";return c.pattern.test(n)?(typeof c.transform=="function"?r.push(c.transform(n)):r.push(n),r):(c.default&&r.push(c.default),r)},[]).join("")}var N={num:"(([-+]?\\d+\\.\\d+)|([-+]?\\d+)|([-+]?\\.\\d+))(?:[eE]([-+]?\\d+))?",idCard:"(^\\d{15}$)|(^\\d{17}(?:[0-9]|X)$)",mobile:"^(0|\\+?86|17951)?1[0-9]{10}$",url:"(((^https?:(?://)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+(?::\\d+)?|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)",ip:"(?:^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$)|(?:^(?:(?:[a-fA-F\\d]{1,4}:){7}(?:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,2}|:)|(?:[a-fA-F\\d]{1,4}:){4}(?:(?::[a-fA-F\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,3}|:)|(?:[a-fA-F\\d]{1,4}:){3}(?:(?::[a-fA-F\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,4}|:)|(?:[a-fA-F\\d]{1,4}:){2}(?:(?::[a-fA-F\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,5}|:)|(?:[a-fA-F\\d]{1,4}:){1}(?:(?::[a-fA-F\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)",color:"(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)",chinese:"[\u4E00-\u9FA5]+"};function k(a,d){return new RegExp(`^${a}$`,d)}var q={num:k(N.num),idCard:k(N.idCard,"i"),mobile:k(N.mobile),url:k(N.url),ip:k(N.ip),color:k(N.color),chinese:k(N.chinese)};var D=[{unit:"Q",value:Math.pow(10,15)},{unit:"T",value:Math.pow(10,12)},{unit:"B",value:Math.pow(10,9)},{unit:"M",value:Math.pow(10,6)},{unit:"K",value:1e3}];var de=(()=>{class a{constructor(e){this.locale=S(_),this.defCurrencyCode=S(I,{optional:!0})??"USD",this.currencyPipe=new T(this.locale,this.defCurrencyCode),this.c=e.merge("utilCurrency",{startingUnit:"yuan",megaUnit:{Q:"\u4EAC",T:"\u5146",B:"\u4EBF",M:"\u4E07",K:"\u5343"},precision:2,ignoreZeroPrecision:!0})}format(e,i){i=f({startingUnit:this.c.startingUnit,precision:this.c.precision,ignoreZeroPrecision:this.c.ignoreZeroPrecision,ngCurrency:this.c.ngCurrency},i);let t=Number(e);if(e==null||isNaN(t))return"";if(i.startingUnit==="cent"&&(t=t/100),i.ngCurrency!=null){let s=i.ngCurrency;return this.currencyPipe.transform(t,s.currencyCode,s.display,s.digitsInfo,s.locale||this.locale)}let r=w(t,this.locale,`.${i.ignoreZeroPrecision?1:i.precision}-${i.precision}`);return i.ignoreZeroPrecision?r.replace(/(?:\.[0]+)$/g,""):r}mega(e,i){i=f({precision:this.c.precision,unitI18n:this.c.megaUnit,startingUnit:this.c.startingUnit},i);let t=Number(e),r={raw:e,value:"",unit:"",unitI18n:""};if(isNaN(t)||t===0)return r.value=e.toString(),r;i.startingUnit==="cent"&&(t=t/100);let s=Math.abs(+t),c=Math.pow(10,i.precision),n=t<0;for(let h of D){let l=s/h.value;if(l=Math.round(l*c)/c,l>=1){s=l,r.unit=h.unit;break}}return r.value=(n?"-":"")+s,r.unitI18n=i.unitI18n[r.unit],r}cny(e,i){if(i=f({inWords:!0,minusSymbol:"\u8D1F",startingUnit:this.c.startingUnit},i),e=Number(e),isNaN(e))return"";i.startingUnit==="cent"&&(e=e/100),e=e.toString();let t,r;[t,r]=e.split(".");let s="";t.startsWith("-")&&(s=i.minusSymbol,t=t.substring(1)),/^-?\d+$/.test(e)&&(r=null),t=(+t).toString();let c=i.inWords,n={num:c?["","\u58F9","\u8D30","\u53C1","\u8086","\u4F0D","\u9646","\u67D2","\u634C","\u7396","\u70B9"]:["","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u70B9"],radice:c?["","\u62FE","\u4F70","\u4EDF","\u4E07","\u62FE","\u4F70","\u4EDF","\u4EBF","\u62FE","\u4F70","\u4EDF","\u4E07\u4EBF","\u62FE","\u4F70","\u4EDF","\u5146","\u62FE","\u4F70","\u4EDF"]:["","\u5341","\u767E","\u5343","\u4E07","\u5341","\u767E","\u5343","\u4EBF","\u5341","\u767E","\u5343","\u4E07\u4EBF","\u5341","\u767E","\u5343","\u5146","\u5341","\u767E","\u5343"],dec:["\u89D2","\u5206","\u5398","\u6BEB"]};c&&(e=(+e).toFixed(5).toString());let h="",l=t.length;if(t==="0"||l===0)h="\u96F6";else{let p="";for(let u=0;u<l;u++){let g=+t[u],y=l-u-1,j=u>1&&g!==0&&t[u-1]==="0"?"\u96F6":"",R=g===0&&y%4!==0||t.substring(u-3,u-3+4)==="0000",U=p,L=n.num[g];p=R?"":n.radice[y],u===0&&L==="\u4E00"&&p==="\u5341"&&(L=""),g>1&&L==="\u4E8C"&&["","\u5341","\u767E"].indexOf(p)===-1&&U!=="\u5341"&&(L="\u4E24"),h+=j+L+p}}let o="",O=r?r.toString().length:0;if(r===null)o=c?"\u6574":"";else if(r==="0")o="\u96F6";else for(let p=0;p<O&&!(c&&p>n.dec.length-1);p++){let u=r[p],g=u==="0"?"\u96F6":"",y=n.num[+u],v=c?n.dec[p]:"";o+=g+y+v}return s+(c?h+(o==="\u96F6"?"\u5143\u6574":`\u5143${o}`):h+(o===""?"":`\u70B9${o}`))}static{this.\u0275fac=function(i){return new(i||a)(b(x))}}static{this.\u0275prov=C({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var m=class a{get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(d,e=null,i=null){if(this._title="",this.level=0,this.parentNode=null,this._icon="",this._children=[],this._isLeaf=!1,this._isChecked=!1,this._isSelectable=!1,this._isDisabled=!1,this._isDisableCheckbox=!1,this._isExpanded=!1,this._isHalfChecked=!1,this._isSelected=!1,this._isLoading=!1,this.canHide=!1,this.isMatched=!1,this.service=null,d instanceof a)return d;this.service=i||null,this.origin=d,this.key=d.key,this.parentNode=e,this._title=d.title||"---",this._icon=d.icon||"",this._isLeaf=d.isLeaf||!1,this._children=[],this._isChecked=d.checked||!1,this._isSelectable=d.disabled||d.selectable!==!1,this._isDisabled=d.disabled||!1,this._isDisableCheckbox=d.disableCheckbox||!1,this._isExpanded=d.isLeaf?!1:d.expanded||!1,this._isHalfChecked=!1,this._isSelected=!d.disabled&&d.selected||!1,this._isLoading=!1,this.isMatched=!1,e?this.level=e.level+1:this.level=0,typeof d.children<"u"&&d.children!==null&&d.children.forEach(t=>{let r=this.treeService;r&&!r.isCheckStrictly&&d.checked&&!d.disabled&&!t.disabled&&!t.disableCheckbox&&(t.checked=d.checked),this._children.push(new a(t,this))})}get title(){return this._title}set title(d){this._title=d,this.update()}get icon(){return this._icon}set icon(d){this._icon=d,this.update()}get children(){return this._children}set children(d){this._children=d,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(d){this._isLeaf=d,this.update()}get isChecked(){return this._isChecked}set isChecked(d){this._isChecked=d,this.origin.checked=d,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(d){this._isHalfChecked=d,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(d){this._isSelectable=d,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(d){this._isDisabled=d,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(d){this._isDisableCheckbox=d,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(d){this._isExpanded=d,this.origin.expanded=d,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(d){this._isSelected=d,this.origin.selected=d,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(d){this._isLoading=d,this.update()}setSyncChecked(d=!1,e=!1){this.setChecked(d,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(d=!1,e=!1){this.origin.checked=d,this.isChecked=d,this.isHalfChecked=e}setExpanded(d){this._isExpanded=d,this.origin.expanded=d,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(d,e=-1){this.isLeaf||(d.forEach(i=>{let t=s=>{s.getChildren().forEach(c=>{c.level=c.getParentNode().level+1,c.origin.level=c.level,t(c)})},r=i;r instanceof a?r.parentNode=this:r=new a(i,this),r.level=this.level+1,r.origin.level=r.level,t(r);try{e===-1?this.children.push(r):this.children.splice(e,0,r)}catch{}}),this.origin.children=this.getChildren().map(i=>i.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let d=this.getParentNode();d&&(d.children=d.getChildren().filter(e=>e.key!==this.key),d.origin.children=d.origin.children.filter(e=>e.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(d){if(this.treeService)switch(d){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(e=>e.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function M(a){let{isDisabled:d,isDisableCheckbox:e}=a;return!!(d||e)}function F(a,d){return d.length>0&&d.indexOf(a)>-1}function $(a,d){return`${a}-${d}`}function V(a,d){return a??d}function Z(a=[],d=[]){let e=new Set(d===!0?[]:d),i=[];function t(r,s=null){return r.map((c,n)=>{let h=$(s?s.pos:"0",n),l=V(c.key,h);c.isStart=[...s?s.isStart:[],n===0],c.isEnd=[...s?s.isEnd:[],n===r.length-1];let o={parent:s,pos:h,children:[],data:c,isStart:[...s?s.isStart:[],n===0],isEnd:[...s?s.isEnd:[],n===r.length-1]};return i.push(o),d===!0||e.has(l)||c.isExpanded?o.children=t(c.children||[],o):o.children=[],o})}return t(a),i}var ke=(()=>{class a{constructor(){this.DRAG_SIDE_RANGE=.25,this.DRAG_MIN_GAP=2,this.isCheckStrictly=!1,this.isMultiple=!1,this.rootNodes=[],this.flattenNodes$=new A([]),this.selectedNodeList=[],this.expandedNodeList=[],this.checkedNodeList=[],this.halfCheckedNodeList=[],this.matchedNodeList=[]}initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,i=[]){this.flattenNodes$.next(Z(e,i).map(t=>t.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],i=this.getCheckedNodeList(),t=r=>{r.forEach(s=>{e.push(s.key),!(s.children.length<1)&&t(s.children)})};return t(i),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(i=>i instanceof m)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(i=>{e.key!==i.key&&(i.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,i=!1){let t=this.getIndexOfArray(this.selectedNodeList,e.key);i?e.isSelected&&t===-1&&this.selectedNodeList.push(e):e.isSelected&&t===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(r=>r.key!==e.key))}setHalfCheckedNodeList(e){let i=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&i===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&i>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(t=>e.key!==t.key))}setCheckedNodeList(e){let i=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&i===-1?this.checkedNodeList.push(e):!e.isChecked&&i>-1&&(this.checkedNodeList=this.checkedNodeList.filter(t=>e.key!==t.key))}conductNodeState(e="check"){let i=[];switch(e){case"select":i=this.selectedNodeList;break;case"expand":i=this.expandedNodeList;break;case"match":i=this.matchedNodeList;break;case"check":i=this.checkedNodeList;let t=r=>{let s=r.getParentNode();return s?this.checkedNodeList.findIndex(c=>c.key===s.key)>-1?!0:t(s):!1};this.isCheckStrictly||(i=this.checkedNodeList.filter(r=>!t(r)));break;case"halfCheck":this.isCheckStrictly||(i=this.halfCheckedNodeList);break}return i}setExpandedNodeList(e){if(e.isLeaf)return;let i=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&i===-1?this.expandedNodeList.push(e):!e.isExpanded&&i>-1&&this.expandedNodeList.splice(i,1)}setMatchedNodeList(e){let i=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&i===-1?this.matchedNodeList.push(e):!e.isMatched&&i>-1&&this.matchedNodeList.splice(i,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(i=>{this.conduct(i,e)})}conduct(e,i=!1){let t=e.isChecked;e&&!i&&(this.conductUp(e),this.conductDown(e,t))}conductUp(e){let i=e.getParentNode();i&&(M(i)||(i.children.every(t=>M(t)||!t.isHalfChecked&&t.isChecked)?(i.isChecked=!0,i.isHalfChecked=!1):i.children.some(t=>t.isHalfChecked||t.isChecked)?(i.isChecked=!1,i.isHalfChecked=!0):(i.isChecked=!1,i.isHalfChecked=!1)),this.setCheckedNodeList(i),this.setHalfCheckedNodeList(i),this.conductUp(i))}conductDown(e,i){M(e)||(e.isChecked=i,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(t=>{this.conductDown(t,i)}))}afterRemove(e){let i=t=>{this.selectedNodeList=this.selectedNodeList.filter(r=>r.key!==t.key),this.expandedNodeList=this.expandedNodeList.filter(r=>r.key!==t.key),this.checkedNodeList=this.checkedNodeList.filter(r=>r.key!==t.key),t.children&&t.children.forEach(r=>{i(r)})};e.forEach(t=>{i(t)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(i=>{this.refreshDragNode(i)})}resetNodeLevel(e){let i=e.getParentNode();i?e.level=i.level+1:e.level=0;for(let t of e.children)this.resetNodeLevel(t)}calcDropPosition(e){let{clientY:i}=e,{top:t,bottom:r,height:s}=e.target.getBoundingClientRect(),c=Math.max(s*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return i<=t+c?-1:i>=r-c?1:0}dropAndApply(e,i=-1){if(!e||i>1)return;let t=e.treeService,r=e.getParentNode(),s=this.selectedNode.getParentNode();switch(s?s.children=s.children.filter(c=>c.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(c=>c.key!==this.selectedNode.key),i){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:let c=i===1?1:0;if(r){r.addChildren([this.selectedNode],r.children.indexOf(e)+c);let n=this.selectedNode.getParentNode();n&&this.resetNodeLevel(n)}else{let n=this.rootNodes.indexOf(e)+c;this.rootNodes.splice(n,0,this.selectedNode),this.rootNodes[n].parentNode=null,this.resetNodeLevel(this.rootNodes[n])}break}this.rootNodes.forEach(c=>{c.treeService||(c.service=t),this.refreshDragNode(c)})}formatEvent(e,i,t){let r={eventName:e,node:i,event:t};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(r,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(r,{selectedKeys:this.selectedNodeList}),Object.assign(r,{nodes:this.selectedNodeList}),Object.assign(r,{keys:this.selectedNodeList.map(c=>c.key)});break;case"check":let s=this.getCheckedNodeList();Object.assign(r,{checkedKeys:s}),Object.assign(r,{nodes:s}),Object.assign(r,{keys:s.map(c=>c.key)});break;case"search":Object.assign(r,{matchedKeys:this.getMatchedNodeList()}),Object.assign(r,{nodes:this.getMatchedNodeList()}),Object.assign(r,{keys:this.getMatchedNodeList().map(c=>c.key)});break;case"expand":Object.assign(r,{nodes:this.expandedNodeList}),Object.assign(r,{keys:this.expandedNodeList.map(c=>c.key)});break}return r}getIndexOfArray(e,i){return e.findIndex(t=>t.key===i)}conductCheck(e,i){this.checkedNodeList=[],this.halfCheckedNodeList=[];let t=r=>{r.forEach(s=>{e===null?s.isChecked=!!s.origin.checked:F(s.key,e||[])?(s.isChecked=!0,s.isHalfChecked=!1):(s.isChecked=!1,s.isHalfChecked=!1),s.children.length>0&&t(s.children)})};t(this.rootNodes),this.refreshCheckState(i)}conductExpandedKeys(e=[]){let i=new Set(e===!0?[]:e);this.expandedNodeList=[];let t=r=>{r.forEach(s=>{s.setExpanded(e===!0||i.has(s.key)||s.isExpanded===!0),s.isExpanded&&this.setExpandedNodeList(s),s.children.length>0&&t(s.children)})};t(this.rootNodes)}conductSelectedKeys(e,i){this.selectedNodeList.forEach(r=>r.isSelected=!1),this.selectedNodeList=[];let t=r=>r.every(s=>{if(F(s.key,e)){if(s.isSelected=!0,this.setSelectedNodeList(s),!i)return!1}else s.isSelected=!1;return s.children.length>0?t(s.children):!0});t(this.rootNodes)}expandNodeAllParentBySearch(e){let i=t=>{if(t&&(t.canHide=!1,t.setExpanded(!0),this.setExpandedNodeList(t),t.getParentNode()))return i(t.getParentNode())};i(e.getParentNode())}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275prov=C({token:a,factory:a.\u0275fac})}}return a})(),ge=new E("NzTreeHigherOrder"),P=class{constructor(d){this.nzTreeService=d}coerceTreeNodes(d){let e=[];return this.nzTreeService.isArrayOfNzTreeNode(d)?e=d.map(i=>(i.service=this.nzTreeService,i)):e=d.map(i=>new m(i,null,this.nzTreeService)),e}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(d){let e=[],i=t=>{e.push(t),t.getChildren().forEach(r=>{i(r)})};return this.getTreeNodes().forEach(t=>{i(t)}),e.find(t=>t.key===d)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};var Le=(()=>{class a{constructor(e){this.c=e.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}treeToArr(e,i){let t=f({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},i),r=[],s=(c,n,h=0)=>{for(let l of c){l[t.deepMapName]=h,l[t.parentMapName]=n,t.cb&&t.cb(l,n,h),r.push(l);let o=l[t.childrenMapName];o!=null&&Array.isArray(o)&&o.length>0&&s(o,l,h+1),t.clearChildren&&delete l[t.childrenMapName]}};return s(e,null),r}arrToTree(e,i){if(!Array.isArray(e)||e.length===0)return[];let t=f({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},i),r=[],s={},c=t.rootParentIdValue,n=e;if(!c){let h=n.map(o=>o[t.parentIdMapName]),l=h.findIndex(o=>o==null);c=l!==-1?h[l]:h.sort()[0]}for(let h of n){let l=h[t.idMapName],o=h[t.parentIdMapName];s[l]=s[l]||[],h[t.childrenMapName]=s[l],t.cb&&t.cb(h),o!==c?(s[o]=s[o]||[],s[o].push(h)):r.push(h)}return r}arrToTreeNode(e,i){let t=f({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},i),r=this.arrToTree(e,{idMapName:t.idMapName,parentIdMapName:t.parentIdMapName,childrenMapName:"children"});return this.visitTree(r,(s,c,n)=>{s.key=s[t.idMapName],s.title=s[t.titleMapName],s.checked=s[t.checkedMapname],s.selected=s[t.selectedMapname],s.expanded=s[t.expandedMapname],s.disabled=s[t.disabledMapname],s[t.isLeafMapName]==null?s.isLeaf=s.children.length===0:s.isLeaf=s[t.isLeafMapName],t.cb&&t.cb(s,c,n)}),r.map(s=>new m(s))}visitTree(e,i,t){t=f({childrenMapName:this.c.childrenMapName},t);let r=(s,c,n)=>{for(let h of s){i(h,c,n);let l=h[t.childrenMapName];Array.isArray(l)&&l.length>0&&r(l,h,n+1)}};r(e,null,1)}findTree(e,i,t){let r;return this.visitTree(e,s=>{r===void 0&&i(s)&&(r=s)},t),r}getKeysByTreeNode(e,i){let t=f({includeHalfChecked:!0},i),r=[];return this.visitTree(e,(s,c,n)=>{(s.isChecked||t.includeHalfChecked&&s.isHalfChecked)&&r.push(t.cb?t.cb(s,c,n):t.keyMapName?s.origin[t.keyMapName]:s.key)}),r}baseFlat(e,i,t=[]){let r=-1;for(;++r<e.length;){let s=e[r];if(i>0&&Array.isArray(s))if(i>1)this.baseFlat(s,i-1,t);else{let c=-1,n=t.length;for(;++c<s.length;)t[n+c]=s[c]}else t[t.length]=s}return t}flat(e,i=1/0){return Array.isArray(e)?this.baseFlat(e,i):e}groupBy(e,i){return Array.isArray(e)?e.reduce((t,r)=>{let s=i(r);return Object.prototype.hasOwnProperty.call(t,s)?t[s].push(r):t[s]=[r],t},{}):{}}uniq(e,i){return Array.from(e.reduce((t,r)=>{let s=i?typeof i=="string"?r[i]:i(r):r;return t.has(s)||t.set(s,r),t},new Map).values())}static{this.\u0275fac=function(i){return new(i||a)(b(x))}}static{this.\u0275prov=C({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();export{Y as a,q as b,de as c,Z as d,ke as e,ge as f,P as g,Le as h};
