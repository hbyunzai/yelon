import{a as Et,b as kt}from"./chunk-IO7AUPGW.js";import{a as Tt,e as St}from"./chunk-NBUX6NTQ.js";import{a as yt,b as Rt}from"./chunk-4C3AF3HS.js";import{a as Mt,b as zt}from"./chunk-4TH24IY7.js";import{Aa as Xe,Ab as se,Ag as bt,Bb as ae,Cb as O,D as Ae,Db as z,Eb as le,F as Ye,Fa as j,Fb as U,Gd as ut,H as B,Ha as qe,Ia as Ne,Ja as a,Ka as y,Kb as ve,L as Ke,La as Ze,Lb as x,M as De,Mb as Pe,Mg as Me,Na as ge,Nb as et,Ne as pt,Ng as ze,Oc as nt,Oe as dt,Pc as ot,Qc as q,Ra as V,Re as ht,Sa as u,Ua as L,V as Qe,Va as h,Vc as Z,Wa as Je,Wb as Q,X as Oe,Xa as $,Xc as rt,Yc as E,Ye as ft,Zc as st,Ze as _t,a as ie,ba as me,ca as pe,cb as f,cc as W,da as oe,db as G,dc as g,dd as at,ec as ce,fa as c,fb as A,gb as D,h as Le,ha as b,hb as p,hf as gt,ia as de,ib as d,ja as We,jb as Ce,jc as tt,k as ne,kb as be,l as $e,lb as xe,ld as lt,me as mt,mf as Ue,nb as R,nd as M,of as Ct,pa as he,pd as Te,qa as T,qb as _,ra as S,rc as X,rd as Se,s as Ge,sb as l,sd as ye,sh as xt,tb as Y,ub as K,uh as vt,va as fe,wa as _e,wd as ct,xa as P,yc as it,yd as J,zb as re,zg as Re}from"./chunk-5G6CWZQB.js";var ue=new oe("REUSE_TAB_CACHED_MANAGER");var I=function(i){return i[i.Menu=0]="Menu",i[i.MenuForce=1]="MenuForce",i[i.URL=2]="URL",i}(I||{});var ee=new oe("REUSE_TAB_STORAGE_KEY"),te=new oe("REUSE_TAB_STORAGE_STATE");var H=(()=>{class i{get snapshot(){return this.injector.get(Z).snapshot}get inited(){return this._inited}get curUrl(){return this.getUrl(this.snapshot)}set max(e){this._max=Math.min(Math.max(e,2),100);for(let t=this.cached.list.length;t>this._max;t--)this.cached.list.pop()}set keepingScroll(e){this._keepingScroll=e,this.initScroll()}get keepingScroll(){return this._keepingScroll}get items(){return this.cached.list}get count(){return this.cached.list.length}get change(){return this._cachedChange.asObservable()}set title(e){let t=this.curUrl;typeof e=="string"&&(e={text:e}),this.cached.title[t]=e,this.di("update current tag title: ",e),this._cachedChange.next({active:"title",url:t,title:e,list:this.cached.list})}index(e){return this.cached.list.findIndex(t=>t.url===e)}exists(e){return this.index(e)!==-1}get(e){return e&&this.cached.list.find(t=>t.url===e)||null}remove(e,t){let n=typeof e=="string"?this.index(e):e,o=n!==-1?this.cached.list[n]:null;return!o||!t&&!o.closable?!1:(this.destroy(o._handle),this.cached.list.splice(n,1),delete this.cached.title[e],!0)}close(e,t=!1){return this.removeUrlBuffer=e,this.remove(e,t),this._cachedChange.next({active:"close",url:e,list:this.cached.list}),this.di("close tag",e),!0}closeRight(e,t=!1){let n=this.index(e);for(let o=this.count-1;o>n;o--)this.remove(o,t);return this.removeUrlBuffer=null,this._cachedChange.next({active:"closeRight",url:e,list:this.cached.list}),this.di("close right tages",e),!0}clear(e=!1){this.cached.list.forEach(t=>{!e&&t.closable&&this.destroy(t._handle)}),this.cached.list=this.cached.list.filter(t=>!e&&!t.closable),this.removeUrlBuffer=null,this._cachedChange.next({active:"clear",list:this.cached.list}),this.di("clear all catch")}move(e,t){let n=this.cached.list.findIndex(r=>r.url===e);if(n===-1)return;let o=this.cached.list.slice();o.splice(t<0?o.length+t:t,0,o.splice(n,1)[0]),this.cached.list=o,this._cachedChange.next({active:"move",url:e,position:t,list:this.cached.list})}replace(e){let t=this.curUrl;this.injector.get(E).navigateByUrl(e).then(()=>{this.exists(t)?this.close(t,!0):this.removeUrlBuffer=t})}getTitle(e,t){if(this.cached.title[e])return this.cached.title[e];if(t&&t.data&&(t.data.titleI18n||t.data.title))return{text:t.data.title,i18n:t.data.titleI18n};let n=this.getMenu(e);return n?{text:n.text,i18n:n.i18n}:{text:e}}clearTitleCached(){this.cached.title={}}set closable(e){let t=this.curUrl;this.cached.closable[t]=e,this.di("update current tag closable: ",e),this._cachedChange.next({active:"closable",closable:e,list:this.cached.list})}getClosable(e,t){if(typeof this.cached.closable[e]<"u")return this.cached.closable[e];if(t&&t.data&&typeof t.data.reuseClosable=="boolean")return t.data.reuseClosable;let n=this.mode!==I.URL?this.getMenu(e):null;return n&&typeof n.reuseClosable=="boolean"?n.reuseClosable:!0}clearClosableCached(){this.cached.closable={}}getTruthRoute(e){let t=e;for(;t.firstChild;)t=t.firstChild;return t}getUrl(e){let t=this.getTruthRoute(e),n=[];for(;t;)n.push(t.url.join("/")),t=t.parent;return`/${n.filter(r=>r).reverse().join("/")}`}can(e){let t=this.getUrl(e);if(t===this.removeUrlBuffer)return!1;if(e.data&&typeof e.data.reuse=="boolean")return e.data.reuse;if(this.mode!==I.URL){let n=this.getMenu(t);if(!n)return!1;if(this.mode===I.Menu){if(n.reuse===!1)return!1}else if(!n.reuse||n.reuse!==!0)return!1;return!0}return!this.isExclude(t)}isExclude(e){return this.excludes.findIndex(t=>t.test(e))!==-1}refresh(e){this._cachedChange.next({active:"refresh",data:e})}destroy(e){e&&e.componentRef&&e.componentRef.destroy&&e.componentRef.destroy()}di(...e){}constructor(){this.injector=c(fe),this.menuService=c(Se),this.cached=c(ue),this.stateKey=c(ee),this.stateSrv=c(te),this._inited=!1,this._max=10,this._keepingScroll=!1,this._cachedChange=new $e(null),this.removeUrlBuffer=null,this.positionBuffer={},this.debug=!1,this.routeParamMatchMode="strict",this.mode=I.Menu,this.excludes=[],this.storageState=!1,this.cached==null&&(this.cached={list:[],title:{},closable:{}})}init(){this.initScroll(),this._inited=!0,this.loadState()}loadState(){this.storageState&&(this.cached.list=this.stateSrv.get(this.stateKey).map(e=>({title:{text:e.title},url:e.url,position:e.position})),this._cachedChange.next({active:"loadState"}))}getMenu(e){let t=this.menuService.getPathByUrl(e);return!t||t.length===0?null:t.pop()}runHook(e,t,n="init"){if(typeof t=="number"&&(t=this.cached.list[t]._handle?.componentRef),t==null||!t.instance)return;let o=t.instance,r=o[e];typeof r=="function"&&(e==="_onReuseInit"?r.call(o,n):r.call(o))}hasInValidRoute(e){return!e.routeConfig||!!e.routeConfig.loadChildren||!!e.routeConfig.children}shouldDetach(e){return this.hasInValidRoute(e)?!1:(this.di("#shouldDetach",this.can(e),this.getUrl(e)),this.can(e))}saveCache(e,t,n){let o=this.getTruthRoute(e),r=this.getUrl(e),m=this.index(r),C={title:this.getTitle(r,o),url:r,closable:this.getClosable(r,e),_snapshot:e,_handle:t};if(m<0){if(this.items.splice(n??this.items.length,0,C),this.count>this._max){let w=this.items.findIndex(k=>k.url!==r&&k.closable);if(w!==-1){let k=this.items[w];this.remove(w,!1),Ae(1).pipe(De(1)).subscribe(()=>this._cachedChange.next({active:"close",url:k.url,list:this.cached.list}))}}}else this.items[m]=C}store(e,t){let n=this.getUrl(e);t!=null&&this.saveCache(e,t);let o=this.cached.list,r={title:this.getTitle(n,e),closable:this.getClosable(n,e),position:this.getKeepingScroll(n,e)?this.positionBuffer[n]:null,url:n,_snapshot:e,_handle:t},m=this.index(n),C=o[m]?._handle?.componentRef;t==null&&C!=null&&Ae(100).pipe(De(1)).subscribe(()=>this.runHook("_onReuseInit",C)),o[m]=r,this.removeUrlBuffer=null,this.di("#store","[override]",n),t&&t.componentRef&&this.runHook("_onReuseDestroy",t.componentRef),this._cachedChange.next({active:"override",item:r,list:o})}shouldAttach(e){if(this.hasInValidRoute(e))return!1;let t=this.getUrl(e),n=this.get(t),o=!!(n&&n._handle);return this.di("#shouldAttach",o,t),o||this._cachedChange.next({active:"add",url:t,list:this.cached.list}),o}retrieve(e){if(this.hasInValidRoute(e))return null;let t=this.getUrl(e),n=this.get(t),o=n&&n._handle||null;return this.di("#retrieve",t,o),o}shouldReuseRoute(e,t){let n=e.routeConfig===t.routeConfig;if(!n)return!1;let o=e.routeConfig&&e.routeConfig.path||"";return o.length>0&&~o.indexOf(":")&&(this.routeParamMatchMode==="strict"?n=this.getUrl(e)===this.getUrl(t):n=o===(t.routeConfig&&t.routeConfig.path||"")),this.di("====================="),this.di("#shouldReuseRoute",n,`${this.getUrl(t)}=>${this.getUrl(e)}`,e,t),n}getKeepingScroll(e,t){if(t&&t.data&&typeof t.data.keepingScroll=="boolean")return t.data.keepingScroll;let n=this.mode!==I.URL?this.getMenu(e):null;return n&&typeof n.keepingScroll=="boolean"?n.keepingScroll:this.keepingScroll}get isDisabledInRouter(){return this.injector.get(rt,{}).scrollPositionRestoration==="disabled"}get ss(){return this.injector.get(dt)}initScroll(){this._router$&&this._router$.unsubscribe(),this._router$=this.injector.get(E).events.subscribe(e=>{if(e instanceof ot){let t=this.curUrl;this.getKeepingScroll(t,this.getTruthRoute(this.snapshot))?this.positionBuffer[t]=this.ss.getScrollPosition(this.keepingScrollContainer):delete this.positionBuffer[t]}else if(e instanceof q){let t=this.curUrl,n=this.get(t);n&&n.position&&this.getKeepingScroll(t,this.getTruthRoute(this.snapshot))&&(this.isDisabledInRouter?this.ss.scrollToPosition(this.keepingScrollContainer,n.position):setTimeout(()=>this.ss.scrollToPosition(this.keepingScrollContainer,n.position),1))}})}ngOnDestroy(){let{_cachedChange:e,_router$:t}=this;this.clear(),this.cached.list=[],e.complete(),t&&t.unsubscribe()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})();function At(i,s){if(i&1){let e=R();p(0,"li",5),_("click",function(n){T(e);let o=l();return S(o.click(n,"refresh"))}),d()}if(i&2){let e=l();h("innerHTML",e.i18n.refresh,j)}}function Dt(i,s){if(i&1){let e=R();p(0,"li",8),_("click",function(n){let o=T(e).$implicit,r=l(2);return S(r.click(n,"custom",o))}),d()}if(i&2){let e=s.$implicit,t=l(2);h("nzDisabled",t.isDisabled(e))("innerHTML",e.title,j),L("data-type",e.id)}}function Ot(i,s){if(i&1&&(Ce(0,"li",6),A(1,Dt,1,3,"li",7,G)),i&2){let e=l();a(),D(e.customContextMenu)}}var Ee=(()=>{class i{constructor(){this.i18nSrv=c(ht),this.close=new P}set i18n(e){this._i18n=ie(ie({},this.i18nSrv.getData("reuseTab")),e)}get i18n(){return this._i18n}get includeNonCloseable(){return this.event.ctrlKey}notify(e){this.close.next({type:e,item:this.item,includeNonCloseable:this.includeNonCloseable})}ngOnInit(){this.includeNonCloseable&&(this.item.closable=!0)}click(e,t,n){if(e.preventDefault(),e.stopPropagation(),!(t==="close"&&!this.item.closable)&&!(t==="closeRight"&&this.item.last)){if(n){if(this.isDisabled(n))return;n.fn(this.item,n)}this.notify(t)}}isDisabled(e){return e.disabled?e.disabled(this.item):!1}closeMenu(e){e.type==="click"&&e.button===2||this.notify(null)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["reuse-tab-context-menu"]],hostBindings:function(t,n){t&1&&_("click",function(r){return n.closeMenu(r)},!1,Ne)("contextmenu",function(r){return n.closeMenu(r)},!1,Ne)},inputs:{i18n:"i18n",item:"item",event:"event",customContextMenu:"customContextMenu"},outputs:{close:"close"},standalone:!0,features:[x],decls:6,vars:7,consts:[["nz-menu",""],["nz-menu-item","","data-type","refresh",3,"innerHTML"],["nz-menu-item","","data-type","close",3,"click","nzDisabled","innerHTML"],["nz-menu-item","","data-type","closeOther",3,"click","innerHTML"],["nz-menu-item","","data-type","closeRight",3,"click","nzDisabled","innerHTML"],["nz-menu-item","","data-type","refresh",3,"click","innerHTML"],["nz-menu-divider",""],["nz-menu-item","",3,"nzDisabled","innerHTML"],["nz-menu-item","",3,"click","nzDisabled","innerHTML"]],template:function(t,n){t&1&&(p(0,"ul",0),u(1,At,1,1,"li",1),p(2,"li",2),_("click",function(r){return n.click(r,"close")}),d(),p(3,"li",3),_("click",function(r){return n.click(r,"closeOther")}),d(),p(4,"li",4),_("click",function(r){return n.click(r,"closeRight")}),d(),u(5,Ot,3,0),d()),t&2&&(a(),f(n.item.active?1:-1),a(),h("nzDisabled",!n.item.closable)("innerHTML",n.i18n.close,j),a(),h("innerHTML",n.i18n.closeOther,j),a(),h("nzDisabled",n.item.last)("innerHTML",n.i18n.closeRight,j),a(),f(n.customContextMenu.length>0?5:-1))},dependencies:[vt,xt],encapsulation:2,changeDetection:0})}}return i})();var F=(()=>{class i{constructor(){this.overlay=c(Ct),this.ref=null,this.show=new ne,this.close=new ne}remove(){this.ref&&(this.ref.detach(),this.ref.dispose(),this.ref=null)}open(e){this.remove();let{event:t,item:n,customContextMenu:o}=e,{x:r,y:m}=t,C=[new Ue({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new Ue({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})],w=this.overlay.position().flexibleConnectedTo({x:r,y:m}).withPositions(C);this.ref=this.overlay.create({positionStrategy:w,panelClass:"reuse-tab__cm",scrollStrategy:this.overlay.scrollStrategies.close()});let k=this.ref.attach(new gt(Ee)),v=k.instance;v.i18n=this.i18n,v.item=ie({},n),v.customContextMenu=o,v.event=t;let Ve=new Le;Ve.add(v.close.subscribe(wt=>{this.close.next(wt),this.remove()})),k.onDestroy(()=>Ve.unsubscribe())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})();var ke=(()=>{class i{set i18n(e){this.srv.i18n=e}constructor(){this.srv=c(F),this.change=new P,this.srv.show.pipe(M()).subscribe(e=>this.srv.open(e)),this.srv.close.pipe(M()).subscribe(e=>this.change.emit(e))}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["reuse-tab-context"]],inputs:{i18n:"i18n"},outputs:{change:"change"},standalone:!0,features:[x],decls:0,vars:0,template:function(t,n){},encapsulation:2})}}return i})();var Be=(()=>{class i{constructor(){this.srv=c(F)}_onContextMenu(e){this.srv.show.next({event:e,item:this.item,customContextMenu:this.customContextMenu}),e.preventDefault(),e.stopPropagation()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=We({type:i,selectors:[["","reuse-tab-context-menu",""]],hostBindings:function(t,n){t&1&&_("contextmenu",function(r){return n._onContextMenu(r)})},inputs:{item:[0,"reuse-tab-context-menu","item"],customContextMenu:"customContextMenu"},exportAs:["reuseTabContextMenu"],standalone:!0})}}return i})();var Nt=["tabset"],Pt=i=>({$implicit:i});function Ut(i,s){}function Ht(i,s){if(i&1&&u(0,Ut,0,0,"ng-template",7),i&2){let e=l(2).$implicit,t=l();h("ngTemplateOutlet",t.titleRender)("ngTemplateOutletContext",et(2,Pt,e))}}function Ft(i,s){if(i&1&&z(0),i&2){let e=l(2).$implicit;U(" ",e.title," ")}}function jt(i,s){if(i&1){let e=R();p(0,"i",9),_("click",function(n){T(e);let o=l(2).$index,r=l();return S(r._close(n,o,!1))}),d()}}function Vt(i,s){if(i&1&&(p(0,"div",6)(1,"span"),u(2,Ht,1,4,null,7)(3,Ft,1,1),d()(),u(4,jt,1,0,"i",8)),i&2){let e=l().$implicit,t=l();h("reuse-tab-context-menu",e)("customContextMenu",t.customContextMenu),L("title",e.title),a(),Je("max-width",t.tabMaxWidth,"px"),$("reuse-tab__name-width",t.tabMaxWidth),a(),f(t.titleRender?2:3),a(2),f(e.closable?4:-1)}}function Lt(i,s){if(i&1){let e=R();p(0,"nz-tab",5),_("nzClick",function(){let n=T(e).$index,o=l();return S(o._to(n))}),u(1,Vt,5,9,"ng-template",null,1,Q),d()}if(i&2){let e=O(2);h("nzTitle",e)}}var Bt=(()=>{class i{constructor(){this.srv=c(H,{optional:!0}),this.cdr=c(W),this.router=c(E),this.route=c(Z),this.i18nSrv=c(Te),this.doc=c(tt),this.platform=c(ye),this.directionality=c(J),this.stateKey=c(ee),this.stateSrv=c(te),this.destroy$=c(_e),this.list=[],this.pos=0,this.dir="ltr",this.mode=I.Menu,this.debug=!1,this.allowClose=!0,this.keepingScroll=!1,this.storageState=!1,this.customContextMenu=[],this.tabBarStyle=null,this.tabType="line",this.routeParamMatchMode="strict",this.disabled=!1,this.change=new P,this.close=new P}set keepingScrollContainer(e){this._keepingScrollContainer=typeof e=="string"?this.doc.querySelector(e):e}genTit(e){return e.i18n?this.i18nSrv.fanyi(e.i18n):e.text}get curUrl(){return this.srv.getUrl(this.route.snapshot)}genCurItem(){let e=this.curUrl,t=this.srv.getTruthRoute(this.route.snapshot);return{url:e,title:this.genTit(this.srv.getTitle(e,t)),closable:this.allowClose&&this.srv.count>0&&this.srv.getClosable(e,t),active:!1,last:!1,index:0}}genList(e){let t=this.srv.items.map((r,m)=>({url:r.url,title:this.genTit(r.title),closable:this.allowClose&&this.srv.count>0&&this.srv.getClosable(r.url,r._snapshot),position:r.position,index:m,active:!1,last:!1})),n=this.curUrl,o=t.findIndex(r=>r.url===n)===-1;if(e&&e.active==="close"&&e.url===n){o=!1;let r=0,m=this.list.find(C=>C.url===n);m.index===t.length?r=t.length-1:m.index<t.length&&(r=Math.max(0,m.index)),this.router.navigateByUrl(t[r].url)}if(o){let r=this.pos+1;t.splice(r,0,this.genCurItem()),this.srv.saveCache(this.route.snapshot,null,r)}t.forEach((r,m)=>r.index=m),t.length===1&&(t[0].closable=!1),this.list=t,this.cdr.detectChanges(),this.updatePos()}updateTitle(e){let t=this.list.find(n=>n.url===e.url);t&&(t.title=this.genTit(e.title),this.cdr.detectChanges())}refresh(e){this.srv.runHook("_onReuseInit",this.pos===e.index?this.srv.componentRef:e.index,"refresh")}saveState(){!this.srv.inited||!this.storageState||this.stateSrv?.update(this.stateKey,this.list)}contextMenuChange(e){let t=null;switch(e.type){case"refresh":this.refresh(e.item);break;case"close":this._close(null,e.item.index,e.includeNonCloseable);break;case"closeRight":t=()=>{this.srv.closeRight(e.item.url,e.includeNonCloseable),this.close.emit(null)};break;case"closeOther":t=()=>{this.srv.clear(e.includeNonCloseable),this.close.emit(null)};break}t&&(!e.item.active&&e.item.index<=this.list.find(n=>n.active).index?this._to(e.item.index,t):t())}_to(e,t){e=Math.max(0,Math.min(e,this.list.length-1));let n=this.list[e];this.router.navigateByUrl(n.url).then(o=>{o&&(this.item=n,this.change.emit(n),t?.())})}_close(e,t,n){e!=null&&(e.preventDefault(),e.stopPropagation());let o=this.list[t];return(this.canClose?this.canClose({item:o,includeNonCloseable:n}):Ge(!0)).pipe(B(r=>r)).subscribe(()=>{this.srv.close(o.url,n),this.close.emit(o),this.cdr.detectChanges()}),!1}activate(e){this.srv!=null&&(this.srv.componentRef={instance:e})}updatePos(){let e=this.srv.getUrl(this.route.snapshot),t=this.list.filter(m=>m.url===e||!this.srv.isExclude(m.url));if(t.length===0)return;let n=t[t.length-1],o=t.find(m=>m.url===e);n.last=!0;let r=o==null?n.index:o.index;t.forEach((m,C)=>m.active=r===C),this.pos=r,this.tabset.nzSelectedIndex=r,this.list=t,this.cdr.detectChanges(),this.saveState()}ngOnInit(){this.dir=this.directionality.value,this.directionality.change.pipe(M(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),!(!this.platform.isBrowser||this.srv==null)&&(this.srv.change.pipe(M(this.destroy$)).subscribe(e=>{switch(e?.active){case"title":this.updateTitle(e);return;case"override":if(e?.list?.length===this.list.length){this.updatePos();return}break}this.genList(e)}),this.i18nSrv.change.pipe(B(()=>this.srv.inited),M(this.destroy$),Ke(100)).subscribe(()=>this.genList({active:"title"})),this.srv.init())}ngOnChanges(e){!this.platform.isBrowser||this.srv==null||(e.max&&(this.srv.max=this.max),e.excludes&&(this.srv.excludes=this.excludes),e.mode&&(this.srv.mode=this.mode),e.routeParamMatchMode&&(this.srv.routeParamMatchMode=this.routeParamMatchMode),e.keepingScroll&&(this.srv.keepingScroll=this.keepingScroll,this.srv.keepingScrollContainer=this._keepingScrollContainer),e.storageState&&(this.srv.storageState=this.storageState),this.srv.debug=this.debug,this.cdr.detectChanges())}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["reuse-tab"],["","reuse-tab",""]],viewQuery:function(t,n){if(t&1&&re(Nt,5),t&2){let o;se(o=ae())&&(n.tabset=o.first)}},hostVars:10,hostBindings:function(t,n){t&2&&$("reuse-tab",!0)("reuse-tab__line",n.tabType==="line")("reuse-tab__card",n.tabType==="card")("reuse-tab__disabled",n.disabled)("reuse-tab-rtl",n.dir==="rtl")},inputs:{mode:"mode",i18n:"i18n",debug:[2,"debug","debug",g],max:[2,"max","max",ce],tabMaxWidth:[2,"tabMaxWidth","tabMaxWidth",ce],excludes:"excludes",allowClose:[2,"allowClose","allowClose",g],keepingScroll:[2,"keepingScroll","keepingScroll",g],storageState:[2,"storageState","storageState",g],keepingScrollContainer:"keepingScrollContainer",customContextMenu:"customContextMenu",tabBarExtraContent:"tabBarExtraContent",tabBarGutter:"tabBarGutter",tabBarStyle:"tabBarStyle",tabType:"tabType",routeParamMatchMode:"routeParamMatchMode",disabled:[2,"disabled","disabled",g],titleRender:"titleRender",canClose:"canClose"},outputs:{change:"change",close:"close"},exportAs:["reuseTab"],standalone:!0,features:[ve([F]),V,he,x],decls:5,vars:7,consts:[["tabset",""],["titleTemplate",""],[3,"nzSelectedIndex","nzAnimated","nzType","nzTabBarExtraContent","nzTabBarGutter","nzTabBarStyle"],[3,"nzTitle"],[3,"change","i18n"],[3,"nzClick","nzTitle"],[1,"reuse-tab__name",3,"reuse-tab-context-menu","customContextMenu"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-icon","","nzType","close",1,"reuse-tab__op"],["nz-icon","","nzType","close",1,"reuse-tab__op",3,"click"]],template:function(t,n){if(t&1){let o=R();p(0,"nz-tabset",2,0),A(2,Lt,3,1,"nz-tab",3,G),d(),p(4,"reuse-tab-context",4),_("change",function(m){return T(o),S(n.contextMenuChange(m))}),d()}t&2&&(h("nzSelectedIndex",n.pos)("nzAnimated",!1)("nzType",n.tabType)("nzTabBarExtraContent",n.tabBarExtraContent)("nzTabBarGutter",n.tabBarGutter)("nzTabBarStyle",n.tabBarStyle),a(2),D(n.list),a(2),h("i18n",n.i18n))},dependencies:[X,kt,Et,Be,ke,Re],encapsulation:2,changeDetection:0})}}return i})();var He=["*"];function Kt(i,s){}function Qt(i,s){if(i&1&&(p(0,"span",1),u(1,Kt,0,0,"ng-template",2),Ce(2,"span",3),d()),i&2){let e=l(),t=O(4);h("nzDropdownMenu",e.nzOverlay),a(),h("ngTemplateOutlet",t)}}function Wt(i,s){}function Xt(i,s){if(i&1&&u(0,Wt,0,0,"ng-template",2),i&2){l();let e=O(4);h("ngTemplateOutlet",e)}}function qt(i,s){if(i&1&&(be(0),z(1),xe()),i&2){let e=l(2);a(),U(" ",e.nzBreadCrumbComponent.nzSeparator," ")}}function Zt(i,s){if(i&1&&(p(0,"nz-breadcrumb-separator"),u(1,qt,2,1,"ng-container",4),d()),i&2){let e=l();a(),h("nzStringTemplateOutlet",e.nzBreadCrumbComponent.nzSeparator)}}function Jt(i,s){i&1&&(p(0,"span",5),K(1),d())}var ei=(i,s)=>s.url;function ti(i,s){if(i&1){let e=R();p(0,"nz-breadcrumb-item")(1,"a",0),_("click",function(n){let o=T(e).$implicit,r=l(2);return S(r.navigate(o.url,n))}),z(2),d()()}if(i&2){let e=s.$implicit;a(),L("href",e.url,qe),a(),le(e.label)}}function ii(i,s){if(i&1&&A(0,ti,3,2,"nz-breadcrumb-item",null,ei),i&2){let e=l();D(e.breadcrumbs)}}var ni=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=b({type:i,selectors:[["nz-breadcrumb-separator"]],hostAttrs:[1,"ant-breadcrumb-separator"],exportAs:["nzBreadcrumbSeparator"],standalone:!0,features:[x],ngContentSelectors:He,decls:1,vars:0,template:function(t,n){t&1&&(Y(),K(0))},encapsulation:2})}}return i})(),Ie=class{},we=(()=>{class i{constructor(e){this.nzBreadCrumbComponent=e}static{this.\u0275fac=function(t){return new(t||i)(y(Ie))}}static{this.\u0275cmp=b({type:i,selectors:[["nz-breadcrumb-item"]],inputs:{nzOverlay:"nzOverlay"},exportAs:["nzBreadcrumbItem"],standalone:!0,features:[x],ngContentSelectors:He,decls:5,vars:2,consts:[["noMenuTpl",""],["nz-dropdown","",1,"ant-breadcrumb-overlay-link",3,"nzDropdownMenu"],[3,"ngTemplateOutlet"],["nz-icon","","nzType","down"],[4,"nzStringTemplateOutlet"],[1,"ant-breadcrumb-link"]],template:function(t,n){t&1&&(Y(),u(0,Qt,3,2,"span",1)(1,Xt,1,1,null,2)(2,Zt,2,1,"nz-breadcrumb-separator")(3,Jt,2,0,"ng-template",null,0,Q)),t&2&&(f(n.nzOverlay?0:1),a(2),f(n.nzBreadCrumbComponent.nzSeparator?2:-1))},dependencies:[X,ni,St,Tt,bt,Re,ze,Me],encapsulation:2,changeDetection:0})}}return i})(),Fe=(()=>{class i{constructor(e,t,n,o,r){this.injector=e,this.cdr=t,this.elementRef=n,this.renderer=o,this.directionality=r,this.nzAutoGenerate=!1,this.nzSeparator="/",this.nzRouteLabel="breadcrumb",this.nzRouteLabelFn=m=>m,this.nzRouteFn=m=>m,this.breadcrumbs=[],this.dir="ltr",this.destroy$=new ne}ngOnInit(){this.nzAutoGenerate&&this.registerRouterChange(),this.directionality.change?.pipe(Oe(this.destroy$)).subscribe(e=>{this.dir=e,this.prepareComponentForRtl(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.prepareComponentForRtl()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}navigate(e,t){t.preventDefault(),this.injector.get(E).navigateByUrl(e)}registerRouterChange(){try{let e=this.injector.get(E),t=this.injector.get(Z);e.events.pipe(B(n=>n instanceof q),Oe(this.destroy$),Qe(!0)).subscribe(()=>{this.breadcrumbs=this.getBreadcrumbs(t.root),this.cdr.markForCheck()})}catch{throw new Error(`${ut} You should import RouterModule if you want to use 'NzAutoGenerate'.`)}}getBreadcrumbs(e,t="",n=[]){let o=e.children;if(o.length===0)return n;for(let r of o)if(r.outlet===nt){let m=r.snapshot.url.map(v=>v.path).filter(v=>v).join("/"),C=m?`${t}/${m}`:t,w=this.nzRouteLabelFn(r.snapshot.data[this.nzRouteLabel]),k=this.nzRouteFn(C);if(m&&w){let v={label:w,params:r.snapshot.params,url:k};n.push(v)}return this.getBreadcrumbs(r,C,n)}return n}prepareComponentForRtl(){this.dir==="rtl"?this.renderer.addClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-breadcrumb-rtl")}static{this.\u0275fac=function(t){return new(t||i)(y(fe),y(W),y(Xe),y(ge),y(J))}}static{this.\u0275cmp=b({type:i,selectors:[["nz-breadcrumb"]],hostAttrs:[1,"ant-breadcrumb"],inputs:{nzAutoGenerate:[2,"nzAutoGenerate","nzAutoGenerate",g],nzSeparator:"nzSeparator",nzRouteLabel:"nzRouteLabel",nzRouteLabelFn:"nzRouteLabelFn",nzRouteFn:"nzRouteFn"},exportAs:["nzBreadcrumb"],standalone:!0,features:[ve([{provide:Ie,useExisting:i}]),V,x],ngContentSelectors:He,decls:2,vars:1,consts:[[3,"click"]],template:function(t,n){t&1&&(Y(),K(0),u(1,ii,2,0)),t&2&&(a(),f(n.nzAutoGenerate&&n.breadcrumbs.length?1:-1))},dependencies:[we],encapsulation:2,changeDetection:0})}}return i})(),It=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=pe({imports:[Fe,we]})}}return i})();var oi=["conTpl"],ri=["affix"],si=["*"],ai=()=>({rows:3}),li=()=>({size:"large",shape:"circle"});function ci(i,s){}function ui(i,s){if(i&1&&(p(0,"nz-affix",3,1),u(2,ci,0,0,"ng-template",4),d()),i&2){let e=l(),t=O(3);h("nzOffsetTop",e.fixedOffsetTop),a(2),h("ngTemplateOutlet",t)}}function mi(i,s){}function pi(i,s){if(i&1&&u(0,mi,0,0,"ng-template",4),i&2){l();let e=O(3);h("ngTemplateOutlet",e)}}function di(i,s){}function hi(i,s){if(i&1&&u(0,di,0,0,"ng-template",4),i&2){let e=l(2);h("ngTemplateOutlet",e.breadcrumb)}}function fi(i,s){if(i&1&&(p(0,"a",15),z(1),d()),i&2){let e=l().$implicit;h("routerLink",e.link),a(),le(e.title)}}function _i(i,s){if(i&1&&z(0),i&2){let e=l().$implicit;U(" ",e.title," ")}}function gi(i,s){if(i&1&&(p(0,"nz-breadcrumb-item"),u(1,fi,2,2,"a",15)(2,_i,1,1),d()),i&2){let e=s.$implicit;a(),f(e.link?1:2)}}function Ci(i,s){if(i&1&&(p(0,"nz-breadcrumb"),A(1,gi,3,1,"nz-breadcrumb-item",null,G),d()),i&2){let e=l(3);a(),D(e.paths)}}function bi(i,s){if(i&1&&u(0,Ci,3,0,"nz-breadcrumb"),i&2){let e=l(2);f(e.paths&&e.paths.length>0?0:-1)}}function xi(i,s){}function vi(i,s){if(i&1&&(p(0,"div",8),u(1,xi,0,0,"ng-template",4),d()),i&2){let e=l(2);a(),h("ngTemplateOutlet",e.logo)}}function Ti(i,s){}function Si(i,s){if(i&1&&u(0,Ti,0,0,"ng-template",4),i&2){let e=l(3);h("ngTemplateOutlet",e._titleTpl)}}function yi(i,s){if(i&1&&(be(0),z(1),xe()),i&2){let e=l(5);a(),le(e.titleSub)}}function Ri(i,s){if(i&1&&(p(0,"small"),u(1,yi,2,1,"ng-container",16),d()),i&2){let e=l(4);a(),h("nzStringTemplateOutlet",e.titleSub)}}function Mi(i,s){if(i&1&&(z(0),u(1,Ri,2,1,"small")),i&2){let e=l(3);U(" ",e._titleVal," "),a(),f(e.titleSub?1:-1)}}function zi(i,s){if(i&1&&(p(0,"h1",11),u(1,Si,1,1,null,4)(2,Mi,2,2),d()),i&2){let e=l(2);a(),f(e._titleTpl?1:2)}}function Ei(i,s){}function ki(i,s){if(i&1&&(p(0,"div",12),u(1,Ei,0,0,"ng-template",4),d()),i&2){let e=l(2);a(),h("ngTemplateOutlet",e.action)}}function Bi(i,s){}function Ii(i,s){}function wi(i,s){if(i&1&&(p(0,"div",14),u(1,Ii,0,0,"ng-template",4),d()),i&2){let e=l(2);a(),h("ngTemplateOutlet",e.extra)}}function Ai(i,s){}function Di(i,s){if(i&1){let e=R();p(0,"div",5)(1,"div")(2,"nz-skeleton",6),u(3,hi,1,1,null,4)(4,bi,1,1),p(5,"div",7),u(6,vi,2,1,"div",8),p(7,"div",9)(8,"div",10),u(9,zi,3,1,"h1",11)(10,ki,2,1,"div",12),d(),p(11,"div",10)(12,"div",13,2),_("cdkObserveContent",function(){T(e);let n=l();return S(n.checkContent())}),K(14),u(15,Bi,0,0,"ng-template",4),d(),u(16,wi,2,1,"div",14),d()()(),u(17,Ai,0,0,"ng-template",4),d()()()}if(i&2){let e=l();$("page-header-rtl",e.dir==="rtl"),a(),$("page-header__wide",e.wide),a(),h("nzLoading",e.loading)("nzTitle",!1)("nzActive",!0)("nzParagraph",Pe(16,ai))("nzAvatar",Pe(17,li)),a(),f(e.breadcrumb?3:4),a(3),f(e.logo?6:-1),a(3),f(e._titleVal||e._titleTpl?9:-1),a(),f(e.action?10:-1),a(5),h("ngTemplateOutlet",e.content),a(),f(e.extra?16:-1),a(),h("ngTemplateOutlet",e.tab)}}var je=(()=>{class i{get menus(){return this.menuSrv.getPathByUrl(this.router.url,this.recursiveBreadcrumb)}set title(e){e instanceof Ze?(this._title=null,this._titleTpl=e,this._titleVal=""):(this._title=e,this._titleVal=this._title)}constructor(e,t,n){this.renderer=c(ge),this.router=c(E),this.cdr=c(W),this.menuSrv=c(Se),this.i18nSrv=c(Te),this.titleSrv=c(mt),this.reuseSrv=c(H,{optional:!0}),this.directionality=c(J),this.destroy$=c(_e),this.inited=!1,this.isBrowser=!0,this.dir="ltr",this._titleVal="",this.paths=[],this._title=null,this._titleTpl=null,this.loading=!1,this.wide=!1,this.breadcrumb=null,this.logo=null,this.action=null,this.content=null,this.extra=null,this.tab=null,this.isBrowser=n.isBrowser,t.attach(this,"pageHeader",{home:"\u9996\u9875",homeLink:"/",autoBreadcrumb:!0,recursiveBreadcrumb:!1,autoTitle:!0,syncTitle:!0,fixed:!1,fixedOffsetTop:64}),e.notify.pipe(M(),B(r=>this.affix&&r.type==="layout"&&r.name==="collapsed")).subscribe(()=>this.affix.updatePosition({}));let o=[this.router.events.pipe(B(r=>r instanceof q))];this.menuSrv!=null&&o.push(this.menuSrv.change),o.push(this.i18nSrv.change),Ye(...o).pipe(M(),B(()=>this.inited)).subscribe(()=>this.refresh())}refresh(){this.setTitle().genBreadcrumb(),this.cdr.detectChanges()}genBreadcrumb(){if(this.breadcrumb||!this.autoBreadcrumb||this.menus.length<=0){this.paths=[];return}let e=[];this.menus.forEach(t=>{if(typeof t.hideInBreadcrumb<"u"&&t.hideInBreadcrumb)return;let n=t.text;t.i18n&&(n=this.i18nSrv.fanyi(t.i18n)),e.push({title:n,link:t.link&&[t.link]})}),this.home&&e.splice(0,0,{title:this.homeI18n&&this.i18nSrv.fanyi(this.homeI18n)||this.home,link:[this.homeLink]}),this.paths=e}setTitle(){if(this._title==null&&this._titleTpl==null&&this.autoTitle&&this.menus.length>0){let e=this.menus[this.menus.length-1],t=e.text;e.i18n&&(t=this.i18nSrv.fanyi(e.i18n)),this._titleVal=t}return this._titleVal&&this.syncTitle&&(this.titleSrv.setTitle(this._titleVal),!this.inited&&this.reuseSrv&&(this.reuseSrv.title=this._titleVal)),this}checkContent(){pt(this.conTpl.nativeElement)?this.renderer.setAttribute(this.conTpl.nativeElement,"hidden",""):this.renderer.removeAttribute(this.conTpl.nativeElement,"hidden")}ngOnInit(){this.dir=this.directionality.value,this.directionality.change.pipe(M(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.refresh(),this.inited=!0}ngAfterViewInit(){this.checkContent()}ngOnChanges(){this.inited&&this.refresh()}static{this.\u0275fac=function(t){return new(t||i)(y(ct),y(lt),y(ye))}}static{this.\u0275cmp=b({type:i,selectors:[["page-header"]],viewQuery:function(t,n){if(t&1&&(re(oi,5),re(ri,5)),t&2){let o;se(o=ae())&&(n.conTpl=o.first),se(o=ae())&&(n.affix=o.first)}},inputs:{title:"title",titleSub:"titleSub",loading:[2,"loading","loading",g],wide:[2,"wide","wide",g],home:"home",homeLink:"homeLink",homeI18n:"homeI18n",autoBreadcrumb:[2,"autoBreadcrumb","autoBreadcrumb",g],autoTitle:[2,"autoTitle","autoTitle",g],syncTitle:[2,"syncTitle","syncTitle",g],fixed:[2,"fixed","fixed",g],fixedOffsetTop:[2,"fixedOffsetTop","fixedOffsetTop",ce],breadcrumb:"breadcrumb",recursiveBreadcrumb:[2,"recursiveBreadcrumb","recursiveBreadcrumb",g],logo:"logo",action:"action",content:"content",extra:"extra",tab:"tab"},exportAs:["pageHeader"],standalone:!0,features:[V,he,x],ngContentSelectors:si,decls:4,vars:1,consts:[["phTpl",""],["affix",""],["conTpl",""],[3,"nzOffsetTop"],[3,"ngTemplateOutlet"],[1,"page-header"],[1,"d-block",3,"nzLoading","nzTitle","nzActive","nzParagraph","nzAvatar"],[1,"page-header__detail"],[1,"page-header__logo"],[1,"page-header__main"],[1,"page-header__row"],[1,"page-header__title"],[1,"page-header__action"],[1,"page-header__desc",3,"cdkObserveContent"],[1,"page-header__extra"],[3,"routerLink"],[4,"nzStringTemplateOutlet"]],template:function(t,n){t&1&&(Y(),u(0,ui,3,2,"nz-affix",3)(1,pi,1,1,null,4)(2,Di,18,18,"ng-template",null,0,Q)),t&2&&f(n.isBrowser&&n.fixed?0:1)},dependencies:[Mt,X,yt,Fe,we,st,Me,ft],encapsulation:2,changeDetection:0})}}return i})();var Oi=[je],Ni=(()=>{class i{static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=pe({imports:[it,at,_t,zt,Rt,It,ze,Oi]})}}return i})();export{H as a,Bt as b,we as c,Fe as d,It as e,je as f,Ni as g};
