import{Cd as L,Fc as O,Lc as I,a as l,da as k,fa as A,ga as S,ha as x,m as v,qc as E,rc as _}from"./chunk-5RQNGF3E.js";function Q(d,i){if(!d)return"";let e=l({},typeof i=="string"?{mask:i}:i),t=l({0:{pattern:/\d/,default:"0"},9:{pattern:/\d/},"#":{pattern:/[a-zA-Z0-9]/},U:{pattern:/[a-zA-Z]/,transform:s=>s.toLocaleUpperCase()},L:{pattern:/[a-zA-Z]/,transform:s=>s.toLocaleLowerCase()},"*":{pattern:/.*/,transform:()=>"*"}},e.tokens),r=d.split("");return e.mask.split("").reduce((s,n)=>{let a=t[n];if(!a)return s.push(n),s;let c=r.shift()??"";return a.pattern.test(c)?(typeof a.transform=="function"?s.push(a.transform(c)):s.push(c),s):(a.default&&s.push(a.default),s)},[]).join("")}var g={num:"(([-+]?\\d+\\.\\d+)|([-+]?\\d+)|([-+]?\\.\\d+))(?:[eE]([-+]?\\d+))?",idCard:"(^\\d{15}$)|(^\\d{17}(?:[0-9]|X)$)",mobile:"^(0|\\+?86|17951)?1[0-9]{10}$",url:"(((^https?:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+(?::\\d+)?|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)",ip:"(?:^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$)|(?:^(?:(?:[a-fA-F\\d]{1,4}:){7}(?:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,2}|:)|(?:[a-fA-F\\d]{1,4}:){4}(?:(?::[a-fA-F\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,3}|:)|(?:[a-fA-F\\d]{1,4}:){3}(?:(?::[a-fA-F\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,4}|:)|(?:[a-fA-F\\d]{1,4}:){2}(?:(?::[a-fA-F\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,5}|:)|(?:[a-fA-F\\d]{1,4}:){1}(?:(?::[a-fA-F\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)",color:"(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)",chinese:"[\u4E00-\u9FA5]+"};function N(d,i){return new RegExp(`^${d}$`,i)}var J={num:N(g.num),idCard:N(g.idCard,"i"),mobile:N(g.mobile),url:N(g.url),ip:N(g.ip),color:N(g.color),chinese:N(g.chinese)};var R=[{unit:"Q",value:Math.pow(10,15)},{unit:"T",value:Math.pow(10,12)},{unit:"B",value:Math.pow(10,9)},{unit:"M",value:Math.pow(10,6)},{unit:"K",value:1e3}];var w=class d{locale=x(E);defCurrencyCode=x(_,{optional:!0})??"USD";c;currencyPipe;constructor(i){this.currencyPipe=new I(this.locale,this.defCurrencyCode),this.c=i.merge("utilCurrency",{startingUnit:"yuan",megaUnit:{Q:"\u4EAC",T:"\u5146",B:"\u4EBF",M:"\u4E07",K:"\u5343"},precision:2,ignoreZeroPrecision:!0})}format(i,e){e=l({startingUnit:this.c.startingUnit,precision:this.c.precision,ignoreZeroPrecision:this.c.ignoreZeroPrecision,ngCurrency:this.c.ngCurrency},e);let t=Number(i);if(i==null||isNaN(t))return"";if(e.startingUnit==="cent"&&(t=t/100),e.ngCurrency!=null){let s=e.ngCurrency;return this.currencyPipe.transform(t,s.currencyCode,s.display,s.digitsInfo,s.locale||this.locale)}let r=O(t,this.locale,`.${e.ignoreZeroPrecision?1:e.precision}-${e.precision}`);return e.ignoreZeroPrecision?r.replace(/(?:\.[0]+)$/g,""):r}mega(i,e){e=l({precision:this.c.precision,unitI18n:this.c.megaUnit,startingUnit:this.c.startingUnit},e);let t=Number(i),r={raw:i,value:"",unit:"",unitI18n:""};if(isNaN(t)||t===0)return r.value=i.toString(),r;e.startingUnit==="cent"&&(t=t/100);let s=Math.abs(+t),n=Math.pow(10,e.precision),a=t<0;for(let c of R){let o=s/c.value;if(o=Math.round(o*n)/n,o>=1){s=o,r.unit=c.unit;break}}return r.value=(a?"-":"")+s,r.unitI18n=e.unitI18n[r.unit],r}cny(i,e){if(e=l({inWords:!0,minusSymbol:"\u8D1F",startingUnit:this.c.startingUnit},e),i=Number(i),isNaN(i))return"";e.startingUnit==="cent"&&(i=i/100),i=i.toString();let t,r;[t,r]=i.split(".");let s="";t.startsWith("-")&&(s=e.minusSymbol,t=t.substring(1)),/^-?\d+$/.test(i)&&(r=null),t=(+t).toString();let n=e.inWords,a={num:n?["","\u58F9","\u8D30","\u53C1","\u8086","\u4F0D","\u9646","\u67D2","\u634C","\u7396","\u70B9"]:["","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u70B9"],radice:n?["","\u62FE","\u4F70","\u4EDF","\u4E07","\u62FE","\u4F70","\u4EDF","\u4EBF","\u62FE","\u4F70","\u4EDF","\u4E07\u4EBF","\u62FE","\u4F70","\u4EDF","\u5146","\u62FE","\u4F70","\u4EDF"]:["","\u5341","\u767E","\u5343","\u4E07","\u5341","\u767E","\u5343","\u4EBF","\u5341","\u767E","\u5343","\u4E07\u4EBF","\u5341","\u767E","\u5343","\u5146","\u5341","\u767E","\u5343"],dec:["\u89D2","\u5206","\u5398","\u6BEB"]};n&&(i=(+i).toFixed(5).toString());let c="",o=t.length;if(t==="0"||o===0)c="\u96F6";else{let u="";for(let f=0;f<o;f++){let y=+t[f],b=o-f-1,H=f>1&&y!==0&&t[f-1]==="0"?"\u96F6":"",z=y===0&&b%4!==0||t.substring(f-3,f-3+4)==="0000",j=u,C=a.num[y];u=z?"":a.radice[b],f===0&&C==="\u4E00"&&u==="\u5341"&&(C=""),y>1&&C==="\u4E8C"&&["","\u5341","\u767E"].indexOf(u)===-1&&j!=="\u5341"&&(C="\u4E24"),c+=H+C+u}}let h="",p=r?r.toString().length:0;if(r===null)h=n?"\u6574":"";else if(r==="0")h="\u96F6";else for(let u=0;u<p&&!(n&&u>a.dec.length-1);u++){let f=r[u],y=f==="0"?"\u96F6":"",b=a.num[+f],T=n?a.dec[u]:"";h+=y+b+T}return s+(n?c+(h==="\u96F6"?"\u5143\u6574":`\u5143${h}`):c+(h===""?"":`\u70B9${h}`))}static \u0275fac=function(e){return new(e||d)(S(L))};static \u0275prov=k({token:d,factory:d.\u0275fac,providedIn:"root"})};var m=class d{get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(i,e=null,t=null){if(this._title="",this.level=0,this.parentNode=null,this._icon="",this._children=[],this._isLeaf=!1,this._isChecked=!1,this._isSelectable=!1,this._isDisabled=!1,this._isDisableCheckbox=!1,this._isExpanded=!1,this._isHalfChecked=!1,this._isSelected=!1,this._isLoading=!1,this.canHide=!1,this.isMatched=!1,this.service=null,i instanceof d)return i;this.service=t||null,this.origin=i,this.key=i.key,this.parentNode=e,this._title=i.title||"---",this._icon=i.icon||"",this._isLeaf=i.isLeaf||!1,this._children=[],this._isChecked=i.checked||!1,this._isSelectable=i.disabled||i.selectable!==!1,this._isDisabled=i.disabled||!1,this._isDisableCheckbox=i.disableCheckbox||!1,this._isExpanded=i.isLeaf?!1:i.expanded||!1,this._isHalfChecked=!1,this._isSelected=!i.disabled&&i.selected||!1,this._isLoading=!1,this.isMatched=!1,e?this.level=e.level+1:this.level=0;let r=this.treeService;r?.treeNodePostProcessor?.(this),typeof i.children<"u"&&i.children!==null&&i.children.forEach(s=>{r&&!r.isCheckStrictly&&i.checked&&!i.disabled&&!s.disabled&&!s.disableCheckbox&&(s.checked=i.checked),this._children.push(new d(s,this))})}get title(){return this._title}set title(i){this._title=i,this.update()}get icon(){return this._icon}set icon(i){this._icon=i,this.update()}get children(){return this._children}set children(i){this._children=i,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(i){this._isLeaf=i,this.update()}get isChecked(){return this._isChecked}set isChecked(i){this._isChecked=i,this.origin.checked=i,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(i){this._isHalfChecked=i,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(i){this._isSelectable=i,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(i){this._isDisabled=i,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(i){this._isDisableCheckbox=i,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(i){this._isExpanded=i,this.origin.expanded=i,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(i){this._isSelected=i,this.origin.selected=i,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(i){this._isLoading=i,this.update()}setSyncChecked(i=!1,e=!1){this.setChecked(i,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(i=!1,e=!1){this.origin.checked=i,this.isChecked=i,this.isHalfChecked=e}setExpanded(i){this._isExpanded=i,this.origin.expanded=i,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(i,e=-1){this.isLeaf||(i.forEach(t=>{let r=n=>{n.getChildren().forEach(a=>{a.level=a.getParentNode().level+1,a.origin.level=a.level,r(a)})},s=t;s instanceof d?s.parentNode=this:s=new d(t,this),s.level=this.level+1,s.origin.level=s.level,r(s);try{e===-1?this.children.push(s):this.children.splice(e,0,s)}catch{}}),this.origin.children=this.getChildren().map(t=>t.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let i=this.getParentNode();i&&(i.children=i.getChildren().filter(e=>e.key!==this.key),i.origin.children=i.origin.children.filter(e=>e.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(i){if(this.treeService)switch(i){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(e=>e.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function M(d){let{isDisabled:i,isDisableCheckbox:e}=d;return!!(i||e)}function F(d,i){return i.length>0&&i.indexOf(d)>-1}function G(d,i){return`${d}-${i}`}function V(d,i){return d??i}function K(d=[],i=[]){let e=new Set(i===!0?[]:i),t=[];function r(s,n=null){return s.map((a,c)=>{let o=G(n?n.pos:"0",c),h=V(a.key,o);a.isStart=[...n?n.isStart:[],c===0],a.isEnd=[...n?n.isEnd:[],c===s.length-1];let p={parent:n,pos:o,children:[],data:a,isStart:[...n?n.isStart:[],c===0],isEnd:[...n?n.isEnd:[],c===s.length-1]};return t.push(p),i===!0||e.has(h)||a.isExpanded?p.children=r(a.children||[],p):p.children=[],p})}return r(d),t}var Ce=(()=>{class d{constructor(){this.DRAG_SIDE_RANGE=.25,this.DRAG_MIN_GAP=2,this.isCheckStrictly=!1,this.isMultiple=!1,this.rootNodes=[],this.flattenNodes$=new v([]),this.selectedNodeList=[],this.expandedNodeList=[],this.checkedNodeList=[],this.halfCheckedNodeList=[],this.matchedNodeList=[]}initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,t=[]){this.flattenNodes$.next(K(e,t).map(r=>r.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],t=this.getCheckedNodeList(),r=s=>{s.forEach(n=>{e.push(n.key),!(n.children.length<1)&&r(n.children)})};return r(t),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(t=>t instanceof m)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(t=>{e.key!==t.key&&(t.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,t=!1){let r=this.getIndexOfArray(this.selectedNodeList,e.key);t?e.isSelected&&r===-1&&this.selectedNodeList.push(e):e.isSelected&&r===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(s=>s.key!==e.key))}setHalfCheckedNodeList(e){let t=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&t===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&t>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(r=>e.key!==r.key))}setCheckedNodeList(e){let t=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&t===-1?this.checkedNodeList.push(e):!e.isChecked&&t>-1&&(this.checkedNodeList=this.checkedNodeList.filter(r=>e.key!==r.key))}conductNodeState(e="check"){let t=[];switch(e){case"select":t=this.selectedNodeList;break;case"expand":t=this.expandedNodeList;break;case"match":t=this.matchedNodeList;break;case"check":t=this.checkedNodeList;let r=s=>{let n=s.getParentNode();return n?this.checkedNodeList.findIndex(a=>a.key===n.key)>-1?!0:r(n):!1};this.isCheckStrictly||(t=this.checkedNodeList.filter(s=>!r(s)));break;case"halfCheck":this.isCheckStrictly||(t=this.halfCheckedNodeList);break}return t}setExpandedNodeList(e){if(e.isLeaf)return;let t=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&t===-1?this.expandedNodeList.push(e):!e.isExpanded&&t>-1&&this.expandedNodeList.splice(t,1)}setMatchedNodeList(e){let t=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&t===-1?this.matchedNodeList.push(e):!e.isMatched&&t>-1&&this.matchedNodeList.splice(t,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(t=>{this.conduct(t,e)})}conduct(e,t=!1){let r=e.isChecked;e&&!t&&(this.conductUp(e),this.conductDown(e,r))}conductUp(e){let t=e.getParentNode();t&&(M(t)||(t.children.every(r=>M(r)||!r.isHalfChecked&&r.isChecked)?(t.isChecked=!0,t.isHalfChecked=!1):t.children.some(r=>r.isHalfChecked||r.isChecked)?(t.isChecked=!1,t.isHalfChecked=!0):(t.isChecked=!1,t.isHalfChecked=!1)),this.setCheckedNodeList(t),this.setHalfCheckedNodeList(t),this.conductUp(t))}conductDown(e,t){M(e)||(e.isChecked=t,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(r=>{this.conductDown(r,t)}))}afterRemove(e){let t=r=>{this.selectedNodeList=this.selectedNodeList.filter(s=>s.key!==r.key),this.expandedNodeList=this.expandedNodeList.filter(s=>s.key!==r.key),this.checkedNodeList=this.checkedNodeList.filter(s=>s.key!==r.key),r.children&&r.children.forEach(s=>{t(s)})};e.forEach(r=>{t(r)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(t=>{this.refreshDragNode(t)})}resetNodeLevel(e){let t=e.getParentNode();t?e.level=t.level+1:e.level=0;for(let r of e.children)this.resetNodeLevel(r)}calcDropPosition(e){let{clientY:t}=e,{top:r,bottom:s,height:n}=e.target.getBoundingClientRect(),a=Math.max(n*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return t<=r+a?-1:t>=s-a?1:0}dropAndApply(e,t=-1){if(!e||t>1)return;let r=e.treeService,s=e.getParentNode(),n=this.selectedNode.getParentNode();switch(n?n.children=n.children.filter(a=>a.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(a=>a.key!==this.selectedNode.key),t){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:let a=t===1?1:0;if(s){s.addChildren([this.selectedNode],s.children.indexOf(e)+a);let c=this.selectedNode.getParentNode();c&&this.resetNodeLevel(c)}else{let c=this.rootNodes.indexOf(e)+a;this.rootNodes.splice(c,0,this.selectedNode),this.rootNodes[c].parentNode=null,this.resetNodeLevel(this.rootNodes[c])}break}this.rootNodes.forEach(a=>{a.treeService||(a.service=r),this.refreshDragNode(a)})}formatEvent(e,t,r){let s={eventName:e,node:t,event:r};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(s,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(s,{selectedKeys:this.selectedNodeList}),Object.assign(s,{nodes:this.selectedNodeList}),Object.assign(s,{keys:this.selectedNodeList.map(a=>a.key)});break;case"check":let n=this.getCheckedNodeList();Object.assign(s,{checkedKeys:n}),Object.assign(s,{nodes:n}),Object.assign(s,{keys:n.map(a=>a.key)});break;case"search":Object.assign(s,{matchedKeys:this.getMatchedNodeList()}),Object.assign(s,{nodes:this.getMatchedNodeList()}),Object.assign(s,{keys:this.getMatchedNodeList().map(a=>a.key)});break;case"expand":Object.assign(s,{nodes:this.expandedNodeList}),Object.assign(s,{keys:this.expandedNodeList.map(a=>a.key)});break}return s}getIndexOfArray(e,t){return e.findIndex(r=>r.key===t)}conductCheck(e,t){this.checkedNodeList=[],this.halfCheckedNodeList=[];let r=s=>{s.forEach(n=>{e===null?n.isChecked=!!n.origin.checked:F(n.key,e||[])?(n.isChecked=!0,n.isHalfChecked=!1):(n.isChecked=!1,n.isHalfChecked=!1),n.children.length>0&&r(n.children)})};r(this.rootNodes),this.refreshCheckState(t)}conductExpandedKeys(e=[]){let t=new Set(e===!0?[]:e);this.expandedNodeList=[];let r=s=>{s.forEach(n=>{n.setExpanded(e===!0||t.has(n.key)||n.isExpanded===!0),n.isExpanded&&this.setExpandedNodeList(n),n.children.length>0&&r(n.children)})};r(this.rootNodes)}conductSelectedKeys(e,t){this.selectedNodeList.forEach(s=>s.isSelected=!1),this.selectedNodeList=[];let r=s=>s.every(n=>{if(F(n.key,e)){if(n.isSelected=!0,this.setSelectedNodeList(n),!t)return!1}else n.isSelected=!1;return n.children.length>0?r(n.children):!0});r(this.rootNodes)}expandNodeAllParentBySearch(e){let t=r=>{if(r&&(r.canHide=!1,r.setExpanded(!0),this.setExpandedNodeList(r),r.getParentNode()))return t(r.getParentNode())};t(e.getParentNode())}static{this.\u0275fac=function(t){return new(t||d)}}static{this.\u0275prov=k({token:d,factory:d.\u0275fac})}}return d})(),be=new A("NzTreeHigherOrder"),U=class{constructor(i){this.nzTreeService=i}coerceTreeNodes(i){let e=[];return this.nzTreeService.isArrayOfNzTreeNode(i)?e=i.map(t=>(t.service=this.nzTreeService,t)):e=i.map(t=>new m(t,null,this.nzTreeService)),e}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(i){let e=[],t=r=>{e.push(r),r.getChildren().forEach(s=>{t(s)})};return this.getTreeNodes().forEach(r=>{t(r)}),e.find(r=>r.key===i)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};var P=class d{c;constructor(i){this.c=i.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}treeToArr(i,e){let t=l({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},e),r=[],s=(n,a,c=0)=>{for(let o of n){o[t.deepMapName]=c,o[t.parentMapName]=a,t.cb&&t.cb(o,a,c),r.push(o);let h=o[t.childrenMapName];h!=null&&Array.isArray(h)&&h.length>0&&s(h,o,c+1),t.clearChildren&&delete o[t.childrenMapName]}};return s(i,null),r}arrToTree(i,e){if(!Array.isArray(i)||i.length===0)return[];let t=l({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},e),r=[],s={},n=t.rootParentIdValue,a=i;if(!n){let c=a.map(h=>h[t.parentIdMapName]),o=c.findIndex(h=>h==null);n=o!==-1?c[o]:c.sort()[0]}for(let c of a){let o=c[t.idMapName],h=c[t.parentIdMapName];s[o]=s[o]||[],c[t.childrenMapName]=s[o],t.cb&&t.cb(c),h!==n?(s[h]=s[h]||[],s[h].push(c)):r.push(c)}return r}arrToTreeNode(i,e){let t=l({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},e),r=this.arrToTree(i,{idMapName:t.idMapName,parentIdMapName:t.parentIdMapName,childrenMapName:"children"});return this.visitTree(r,(s,n,a)=>{s.key=s[t.idMapName],s.title=s[t.titleMapName],s.checked=s[t.checkedMapname],s.selected=s[t.selectedMapname],s.expanded=s[t.expandedMapname],s.disabled=s[t.disabledMapname],s[t.isLeafMapName]==null?s.isLeaf=s.children.length===0:s.isLeaf=s[t.isLeafMapName],t.cb&&t.cb(s,n,a)}),r.map(s=>new m(s))}visitTree(i,e,t){t=l({childrenMapName:this.c.childrenMapName},t);let r=(s,n,a)=>{for(let c of s){e(c,n,a);let o=c[t.childrenMapName];Array.isArray(o)&&o.length>0&&r(o,c,a+1)}};r(i,null,1)}findTree(i,e,t){let r;return this.visitTree(i,s=>{r===void 0&&e(s)&&(r=s)},t),r}getKeysByTreeNode(i,e){let t=l({includeHalfChecked:!0},e),r=[];return this.visitTree(i,(s,n,a)=>{(s.isChecked||t.includeHalfChecked&&s.isHalfChecked)&&r.push(t.cb?t.cb(s,n,a):t.keyMapName?s.origin[t.keyMapName]:s.key)}),r}baseFlat(i,e,t=[]){let r=-1;for(;++r<i.length;){let s=i[r];if(e>0&&Array.isArray(s))if(e>1)this.baseFlat(s,e-1,t);else{let n=-1,a=t.length;for(;++n<s.length;)t[a+n]=s[n]}else t[t.length]=s}return t}flat(i,e=1/0){return Array.isArray(i)?this.baseFlat(i,e):i}groupBy(i,e){return Array.isArray(i)?i.reduce((t,r)=>{let s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?t[s].push(r):t[s]=[r],t},{}):{}}uniq(i,e){return Array.from(i.reduce((t,r)=>{let s=e?typeof e=="string"?r[e]:e(r):r;return t.has(s)||t.set(s,r),t},new Map).values())}static \u0275fac=function(e){return new(e||d)(S(L))};static \u0275prov=k({token:d,factory:d.\u0275fac,providedIn:"root"})};export{Q as a,J as b,w as c,m as d,K as e,Ce as f,be as g,U as h,P as i};
