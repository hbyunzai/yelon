import{a as ui}from"./chunk-KMDWPB6V.js";import{c as ki,d as Di,e as Ii,f as Mi,g as Ei,h as Fi,i as Ni,j as Pi,k as Oi,l as Ri,m as Ai,n as Vi,o as Hi}from"./chunk-W63CQER4.js";import{a as tn}from"./chunk-BAPU3RXT.js";import{a as qi,b as Gi}from"./chunk-SEATGLPR.js";import{a as ct,b as wi,d as pt,e as Si,f as bi}from"./chunk-LLT56NTX.js";import{c as Wi,e as Ui,h as Zi}from"./chunk-PJC7XN3O.js";import{a as xi,c as $t}from"./chunk-VIXGYNFO.js";import{b as je,d as Ot,g as Ye,h as Rt}from"./chunk-CWLYPJ3D.js";import{c as At,d as Vt}from"./chunk-2I5LH6TG.js";import{D as Ci,F as at,G as zi,H as Ht,I as $i,N as Li,O as Bi,P as ji,d as di,g as Le,m as Be,v as Xe,x as Nt,y as Pt}from"./chunk-DALIXSDU.js";import{Ac as kt,Ah as lt,Bb as fe,Be as Ln,Bg as ai,C as ue,Ca as ve,Cb as _e,Cg as si,Ch as vi,Db as ge,Dc as Yt,Dh as Ti,Ea as Ct,Eb as A,Ee as Bn,Eg as li,F as xn,Fb as W,Fe as jn,Ga as Y,Gb as ie,Ge as Wn,H as he,Hb as Ve,He as Un,Ia as zt,Jb as Ce,K as yn,Ka as h,Kb as le,Kc as Fn,Kf as me,Kg as ci,La as w,Lb as ce,Le as Zn,Lf as Pe,Ma as xt,Mb as He,Md as Kt,Mf as Xn,Mg as Et,N as ht,Nb as pe,Ne as Mt,Nf as Yn,Ng as pi,Oa as Ae,Ob as Gt,Oe as qn,Og as Ft,Pa as re,Pb as se,Pc as Ee,Pf as Kn,Qa as wn,Qb as tt,Qe as Gn,Ra as ke,Rb as St,Re as Qn,Rf as Jn,S as ft,Sa as De,Sf as ei,T as vn,Ta as qt,Tb as Qt,Tf as ti,Ua as yt,Ub as Xt,Va as C,Vd as de,Wa as H,Wg as mi,Xa as m,Ya as vt,Yb as oe,Yg as hi,Z as O,Za as N,Zd as Jt,_c as Dt,a as f,b as ye,bh as fi,ca as R,da as M,db as Sn,ea as q,eb as b,ec as J,fa as G,fb as ae,fc as Ie,g as ut,ga as K,gb as et,ge as en,ha as Tn,hb as U,hd as Ze,he as Hn,ia as y,ib as Z,ic as Me,id as Fe,ja as v,jb as _,jd as qe,k as te,kb as z,kd as Nn,ke as Qe,lb as D,ld as Pn,le as Ne,lh as ze,ma as Q,mb as Te,mc as nt,nb as we,nc as In,nd as Ge,oa as j,oc as Mn,od as On,og as ni,pa as X,pb as I,pd as it,pg as ii,q as B,qd as Rn,qg as oi,rb as bn,rd as It,s as be,sb as S,sc as En,t as gn,tb as kn,tc as $e,u as Cn,ub as p,ud as An,uh as _i,v as zn,va as E,vb as Tt,ve as $n,vg as ri,vh as gi,w as ne,wa as T,wb as wt,wd as Vn,wg as rt,xa as _t,xb as Dn,xc as bt,ya as gt,yh as st,zd as ot,zh as yi}from"./chunk-4LVFALOC.js";var Ke=(()=>{let i=class i{constructor(e){this.nzI18n=T(ni),this.currency=T($t),this.dom=T(Ee),this.widgets={date:{type:"fn",ref:(t,o)=>({text:ci(t,o.date.format,this.nzI18n.getDateLocale())})},mega:{type:"fn",ref:(t,o)=>{let a=this.currency.mega(t,o.mega);return{text:a.value,unit:a.unitI18n}}},currency:{type:"fn",ref:(t,o)=>({text:this.currency.format(t,o.currency)})},cny:{type:"fn",ref:(t,o)=>({text:this.currency.cny(t,o.cny)})},boolean:{type:"fn",ref:(t,o)=>({text:this.dom.bypassSecurityTrustHtml(pi(t,o.boolean))})},img:{type:"fn",ref:t=>({text:Array.isArray(t)?t:[t]})}},this.globalOptions=e.merge("cell",{date:{format:"yyyy-MM-dd HH:mm:ss"},img:{size:32},default:{text:"-"}})}registerWidget(e,t){this.widgets[e]={type:"widget",ref:t}}getWidget(e){return this.widgets[e]}genType(e,t){if(t.type!=null)return t.type;let o=typeof e;return o==="number"&&/^[0-9]{13}$/g.test(e)||e instanceof Date||t.date!=null?"date":t.widget!=null?"widget":t.mega!=null?"mega":t.currency!=null?"currency":t.cny!=null?"cny":t.img!=null?"img":t.link!=null?"link":t.html!=null?"html":t.badge!=null?"badge":t.tag!=null?"tag":t.checkbox!=null?"checkbox":t.radio!=null?"radio":t.enum!=null?"enum":o==="number"?"number":o==="boolean"||t.boolean!=null?"boolean":"string"}fixOptions(e){return Nn({},this.globalOptions,e)}get(e,t){let o=this.genType(e,f({},t)),a=this.fixOptions(t);a.type=o;let s=typeof e=="object"&&typeof e?.getTypeName=="function"&&e?.getTypeName()!=null,l={result:typeof e=="object"&&!s?e:{text:e==null?"":s?e:`${e}`},options:a},c=this.widgets[o];return c?.type==="fn"&&(l.result=c.ref(e,a)),(typeof e=="function"?e(e,a):be(l.result)).pipe(ne(u=>{l.result=u;let g;switch(o){case"badge":g=(a.badge?.data??{})[e],l.result=f({color:"default"},g);break;case"tag":g=(a.tag?.data??{})[e],l.result=g;break;case"enum":l.result={text:(a.enum??{})[e]};break;case"html":l.safeHtml=a.html?.safe;break;case"string":s&&(l.safeHtml="safeHtml");break}return(o==="badge"||o==="tag")&&g?.tooltip!=null&&(l.options.tooltip=g.tooltip),a.mask!=null&&(l.result.text=xi(l.result.text,a.mask)),l}))}};i.\u0275fac=function(t){return new(t||i)(E(Ge))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function tl(...n){return gt([{provide:_t,multi:!0,useValue:()=>{let i=T(Ke);n.forEach(r=>i.registerWidget(r.KEY,r.type))}}])}var Io=["imgRef"],Mo=["imagePreviewWrapper"];function Eo(n,i){if(n&1){let r=I();_(0,"li",7),S("click",function(){let o=y(r).$implicit;return v(o.onClick())}),D(1,"span",8),z()}if(n&2){let r=i.$implicit,e=p();N("ant-image-preview-operations-operation-disabled",e.zoomOutDisabled&&r.type==="zoomOut"),h(),m("nzType",r.icon)}}function Fo(n,i){if(n&1&&D(0,"img",10,11),n&2){let r=p().$implicit,e=p();vt("width",r.width)("height",r.height)("transform",e.previewImageTransform),H("src",e.sanitizerResourceUrl(r.src),zt)("srcset",r.srcset)("alt",r.alt)}}function No(n,i){if(n&1&&C(0,Fo,2,9,"img",9),n&2){let r=i.$index,e=p();b(0,r===e.index?0:-1)}}function Po(n,i){if(n&1){let r=I();Te(0),_(1,"div",12),S("click",function(t){y(r);let o=p();return v(o.onSwitchLeft(t))}),D(2,"span",13),z(),_(3,"div",14),S("click",function(t){y(r);let o=p();return v(o.onSwitchRight(t))}),D(4,"span",15),z(),we()}if(n&2){let r=p();h(),N("ant-image-preview-switch-left-disabled",r.index<=0),h(2),N("ant-image-preview-switch-right-disabled",r.index>=r.images.length-1)}}var Oo=["*"],Lt={enter:"ant-fade-enter",enterActive:"ant-fade-enter-active",leave:"ant-fade-leave",leaveActive:"ant-fade-leave-active"},Ro="ant-image-preview-mask",to="image";function Ao(n){let i={};return n.width<=n.clientWidth&&n.height<=n.clientHeight&&(i={x:0,y:0}),(n.width>n.clientWidth||n.height>n.clientHeight)&&(i={x:Ji(n.left,n.width,n.clientWidth),y:Ji(n.top,n.height,n.clientHeight)}),i}function Vo(n){let i=n.getBoundingClientRect(),r=document.documentElement;return{left:i.left+(window.pageXOffset||r.scrollLeft)-(r.clientLeft||document.body.clientLeft||0),top:i.top+(window.pageYOffset||r.scrollTop)-(r.clientTop||document.body.clientTop||0)}}function Ho(){let n=document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return{width:n,height:i}}function Ji(n,i,r){let e=n+i,t=(i-r)/2,o=null;return i>r?(n>0&&(o=t),n<0&&e<r&&(o=-t)):(n<0||e>r)&&(o=n<0?t:-t),o}var dt=class{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}},Bt={x:0,y:0},nn=.5,$o=1,Lo=0,no=(()=>{let i=class i{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){let e=this.nzConfigService.getConfigForComponent(to)||{};return this.config.nzMaskClosable??e.nzMaskClosable??!0}constructor(e,t,o,a,s,l,c,u){this.ngZone=e,this.host=t,this.cdr=o,this.nzConfigService=a,this.config=s,this.overlayRef=l,this.destroy$=c,this.sanitizer=u,this._defaultNzZoom=$o,this._defaultNzScaleStep=nn,this._defaultNzRotate=Lo,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationState="enter",this.animationStateChanged=new R,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"}],this.zoomOutDisabled=!1,this.position=f({},Bt),this.containerClick=new R,this.closeClick=new R,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{ue(this.host.nativeElement,"click").pipe(O(this.destroy$)).subscribe(e=>{e.target===e.currentTarget&&this.maskClosable&&this.containerClick.observers.length&&this.ngZone.run(()=>this.containerClick.emit())}),ue(this.imagePreviewWrapper.nativeElement,"mousedown").pipe(O(this.destroy$)).subscribe(()=>{this.isDragging=!0})})}setImages(e,t){t&&(this.scaleStepMap=t),this.images=e,this.cdr.markForCheck()}switchTo(e){this.index=e,this.cdr.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.cdr.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.closeClick.emit()}onZoomIn(){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=f({},Bt)}onZoomOut(){if(this.zoom>1){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.position=f({},Bt)}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(e){e.preventDefault(),e.stopPropagation(),this.prev()}onSwitchRight(e){e.preventDefault(),e.stopPropagation(),this.next()}onAnimationStart(e){e.toState==="enter"?this.setEnterAnimationClass():e.toState==="leave"&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}onAnimationDone(e){e.toState==="enter"?this.setEnterAnimationClass():e.toState==="leave"&&this.setLeaveAnimationClass(),this.animationStateChanged.emit(e)}startLeaveAnimation(){this.animationState="leave",this.cdr.markForCheck()}onDragReleased(){this.isDragging=!1;let e=this.imageRef.nativeElement.offsetWidth*this.zoom,t=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:o,top:a}=Vo(this.imageRef.nativeElement),{width:s,height:l}=Ho(),c=this.rotate%180!==0,g=Ao({width:c?t:e,height:c?e:t,left:o,top:a,clientWidth:s,clientHeight:l});(Kt(g.x)||Kt(g.y))&&(this.position=f(f({},this.position),g))}sanitizerResourceUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom}, ${this.zoom}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}setEnterAnimationClass(){if(this.animationDisabled)return;let e=this.overlayRef.backdropElement;e&&(e.classList.add(Lt.enter),e.classList.add(Lt.enterActive))}setLeaveAnimationClass(){if(this.animationDisabled)return;let e=this.overlayRef.backdropElement;e&&(e.classList.add(Lt.leave),e.classList.add(Lt.leaveActive))}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.position=f({},Bt)}};i.\u0275fac=function(t){return new(t||i)(w(ke),w(Q),w(re),w(Qe),w(dt),w(Mt),w(ze),w(Ee))},i.\u0275cmp=q({type:i,selectors:[["nz-image-preview"]],viewQuery:function(t,o){if(t&1&&(fe(Io,5),fe(Mo,7)),t&2){let a;_e(a=ge())&&(o.imageRef=a.first),_e(a=ge())&&(o.imagePreviewWrapper=a.first)}},hostAttrs:["tabindex","-1","role","document",1,"ant-image-preview-wrap"],hostVars:6,hostBindings:function(t,o){t&1&&kn("@fadeMotion.start",function(s){return o.onAnimationStart(s)})("@fadeMotion.done",function(s){return o.onAnimationDone(s)}),t&2&&(bn("@.disabled",o.config.nzNoAnimation)("@fadeMotion",o.animationState),vt("z-index",o.config.nzZIndex),N("ant-image-preview-moving",o.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[He([ze]),pe],decls:13,vars:4,consts:[[1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],[1,"ant-image-preview-operations"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragFreeDragPosition","cdkDragReleased"],["imagePreviewWrapper",""],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType"],["cdkDragHandle","","class","ant-image-preview-img",3,"width","height","transform"],["cdkDragHandle","",1,"ant-image-preview-img"],["imgRef",""],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],["class","ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled"]],template:function(t,o){t&1&&(_(0,"div",0),D(1,"div",1),_(2,"div",2)(3,"div",3)(4,"ul",4),U(5,Eo,2,3,"li",16,et),z(),_(7,"div",5,6),S("cdkDragReleased",function(){return o.onDragReleased()}),U(9,No,1,1,null,null,et),z(),C(11,Po,5,4,"ng-container"),z()(),D(12,"div",1),z()),t&2&&(h(5),Z(o.operations),h(2),vt("transform",o.previewImageWrapperTransform),m("cdkDragFreeDragPosition",o.position),h(2),Z(o.images),h(2),b(11,o.images.length>1?11:-1))},dependencies:[Pe,me,jn,Wn],encapsulation:2,data:{animation:[hi]},changeDetection:0});let n=i;return n})(),on=class{constructor(i,r,e){this.previewInstance=i,this.config=r,this.overlayRef=e,this.destroy$=new te,e.keydownEvents().pipe(he(t=>this.config.nzKeyboard&&(t.keyCode===27||t.keyCode===37||t.keyCode===39)&&!$n(t))).subscribe(t=>{t.preventDefault(),t.keyCode===27&&this.close(),t.keyCode===37&&this.prev(),t.keyCode===39&&this.next()}),e.detachments().subscribe(()=>{this.overlayRef.dispose()}),i.containerClick.pipe(ht(1),O(this.destroy$)).subscribe(()=>{this.close()}),i.closeClick.pipe(ht(1),O(this.destroy$)).subscribe(()=>{this.close()}),i.animationStateChanged.pipe(he(t=>t.phaseName==="done"&&t.toState==="leave"),ht(1)).subscribe(()=>{this.dispose()})}switchTo(i){this.previewInstance.switchTo(i)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.previewInstance.startLeaveAnimation()}dispose(){this.destroy$.next(),this.overlayRef.dispose()}},jt=(()=>{let i=class i{constructor(e,t,o,a){this.overlay=e,this.injector=t,this.nzConfigService=o,this.directionality=a}preview(e,t,o){return this.display(e,t,o)}display(e,t,o){let a=f(f({},new dt),t??{}),s=this.createOverlay(a),l=this.attachPreviewComponent(s,a);l.setImages(e,o);let c=new on(l,a,s);return l.previewRef=c,c}attachPreviewComponent(e,t){let o=Ct.create({parent:this.injector,providers:[{provide:Mt,useValue:e},{provide:dt,useValue:t}]}),a=new Un(no,null,o);return e.attach(a).instance}createOverlay(e){let t=this.nzConfigService.getConfigForComponent(to)||{},o=new Zn({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:e.nzCloseOnNavigation??t.nzCloseOnNavigation??!0,backdropClass:Ro,direction:e.nzDirection||t.nzDirection||this.directionality.value});return this.overlay.create(o)}};i.\u0275fac=function(t){return new(t||i)(E(qn),E(Ct),E(Qe),E(ot,8))},i.\u0275prov=j({token:i,factory:i.\u0275fac});let n=i;return n})(),Bo=(()=>{let i=class i{constructor(){this.nzScaleStep=null,this.images=[]}addImage(e){this.images.push(e)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[pe],ngContentSelectors:Oo,decls:1,vars:0,template:function(t,o){t&1&&(Tt(),wt(0))},encapsulation:2,changeDetection:0});let n=i;return n})(),jo="image",kl=(()=>{let i=class i{get previewable(){return!this.nzDisablePreview&&this.status!=="error"}constructor(e,t,o,a,s,l,c){this.document=e,this.nzConfigService=t,this.elementRef=o,this.nzImageService=a,this.cdr=s,this.parentGroup=l,this.directionality=c,this._nzModuleName=jo,this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new te,this.destroy$=new te}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe(O(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){let e=this.parentGroup.images.filter(l=>l.previewable),t=e.map(l=>({src:l.nzSrc,srcset:l.nzSrcset})),o=e.findIndex(l=>this===l),a=new Map;e.forEach(l=>{a.set(l.nzSrc??l.nzSrcset,l.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??nn)}),this.nzImageService.preview(t,{nzDirection:this.dir},a).switchTo(o)}else{let e=[{src:this.nzSrc,srcset:this.nzSrcset}];this.nzImageService.preview(e,{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??nn})}}getElement(){return this.elementRef}ngOnChanges(e){let{nzSrc:t}=e;t&&(this.getElement().nativeElement.src=t.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new te,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),ue(this.backLoadImage,"load").pipe(O(this.backLoadDestroy$),O(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),ue(this.backLoadImage,"error").pipe(O(this.backLoadDestroy$),O(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}};i.\u0275fac=function(t){return new(t||i)(w(Me),w(Qe),w(Q),w(jt),w(re),w(Bo,8),w(ot,8))},i.\u0275dir=K({type:i,selectors:[["img","nz-image",""]],hostBindings:function(t,o){t&1&&S("click",function(){return o.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:"nzDisablePreview",nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[ve]});let n=i;return B([de(),Ne()],n.prototype,"nzDisablePreview",void 0),B([Ne()],n.prototype,"nzFallback",void 0),B([Ne()],n.prototype,"nzPlaceholder",void 0),B([Ne()],n.prototype,"nzScaleStep",void 0),n})(),io=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({providers:[jt],imports:[no]});let n=i;return n})();var oo=(()=>{let i=class i{constructor(){this.srv=T(Ke),this.viewContainerRef=T(De)}ngOnInit(){let e=this.data.options.widget,t=this.srv.getWidget(e.key)?.ref;if(t==null)return;this.viewContainerRef.clear();let o=this.viewContainerRef.createComponent(t);o.instance.data=this.data}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=K({type:i,selectors:[["","cell-widget-host",""]],inputs:{data:"data"},standalone:!0});let n=i;return n})();function Wo(n,i){if(n&1){let r=I();_(0,"label",3),S("ngModelChange",function(t){y(r);let o=p(2);return v(o.change(t))}),W(1),z()}if(n&2){let r=p(2);m("nzDisabled",r.disabled)("ngModel",r.value),h(),Ve(" ",r.safeOpt.checkbox==null?null:r.safeOpt.checkbox.label," ")}}function Uo(n,i){if(n&1){let r=I();_(0,"label",4),S("ngModelChange",function(t){y(r);let o=p(2);return v(o.change(t))}),W(1),z()}if(n&2){let r=p(2);m("nzDisabled",r.disabled)("ngModel",r.value),h(),Ve(" ",r.safeOpt.radio==null?null:r.safeOpt.radio.label," ")}}function Zo(n,i){if(n&1){let r=I();_(0,"a",5),S("click",function(t){y(r);let o=p(2);return v(o._link(t))}),z()}if(n&2){let r=p(2);m("innerHTML",r._text,Y),H("target",r.safeOpt.link==null?null:r.safeOpt.link.target)("title",r.value)}}function qo(n,i){if(n&1&&(_(0,"nz-tag",6),D(1,"span",7),z()),n&2){let r=p(2);m("nzColor",r.res==null||r.res.result==null?null:r.res.result.color),h(),m("innerHTML",r._text,Y)}}function Go(n,i){if(n&1&&D(0,"nz-badge",8),n&2){let r=p(2);Dn("nzText",r._text),m("nzStatus",r.res==null||r.res.result==null?null:r.res.result.color)}}function Qo(n,i){}function Xo(n,i){if(n&1&&C(0,Qo,0,0,"ng-template",9),n&2){let r=p(2);m("data",r.hostData)}}function Yo(n,i){if(n&1){let r=I();_(0,"img",10),S("click",function(){let o=y(r).$implicit,a=p(3);return v(a._showImg(o))}),z()}if(n&2){let r=i.$implicit,e=p(3);N("point",e.safeOpt.img==null?null:e.safeOpt.img.big),H("src",r,zt)("height",e.safeOpt.img==null?null:e.safeOpt.img.size)("width",e.safeOpt.img==null?null:e.safeOpt.img.size)}}function Ko(n,i){if(n&1&&U(0,Yo,1,5,"img",11,ae),n&2){let r=p(2);Z(r._text)}}function Jo(n,i){if(n&1&&D(0,"span",12),n&2){let r=p(3);m("innerText",r._text),H("title",r.value)}}function er(n,i){if(n&1&&D(0,"span",7),n&2){let r=p(3);m("innerHTML",r._text,Y),H("title",r.value)}}function tr(n,i){if(n&1&&(_(0,"span",14),W(1),z()),n&2){let r=p(3);h(),ie(r._unit)}}function nr(n,i){if(n&1&&C(0,Jo,1,2,"span",12)(1,er,1,2)(2,tr,2,1,"span",13),n&2){let r=p(2);b(0,r.isText?0:1),h(2),b(2,r._unit?2:-1)}}function ir(n,i){if(n&1&&C(0,Wo,2,3)(1,Uo,2,3)(2,Zo,1,3)(3,qo,2,2)(4,Go,1,2)(5,Xo,1,1)(6,Ko,2,0)(7,nr,3,2),n&2){let r=p(),e;b(0,(e=r.safeOpt.type)==="checkbox"?0:e==="radio"?1:e==="link"?2:e==="tag"?3:e==="badge"?4:e==="widget"?5:e==="img"?6:7)}}function or(n,i){if(n&1&&W(0),n&2){let r=p(2);Ve(" ",r.safeOpt.default==null?null:r.safeOpt.default.text," ")}}function rr(n,i){}function ar(n,i){if(n&1&&(_(0,"span",15),C(1,rr,0,0,"ng-template",16),z()),n&2){let r=p(3),e=A(1);m("nz-tooltip",r.safeOpt.tooltip),h(),m("ngTemplateOutlet",e)}}function sr(n,i){}function lr(n,i){if(n&1&&C(0,sr,0,0,"ng-template",16),n&2){p(3);let r=A(1);m("ngTemplateOutlet",r)}}function cr(n,i){if(n&1&&C(0,ar,2,2,"span",15)(1,lr,1,1),n&2){let r=p(2);b(0,r.safeOpt.tooltip?0:1)}}function pr(n,i){if(n&1&&C(0,or,1,1)(1,cr,2,1),n&2){let r=p();b(0,r.showDefault?0:1)}}function dr(n,i){n&1&&D(0,"span",2)}function mr(n,i){}function ur(n,i){if(n&1&&C(0,mr,0,0,"ng-template",16),n&2){p();let r=A(3);m("ngTemplateOutlet",r)}}var Wt=(()=>{let i=class i{constructor(){this.srv=T(Ke),this.router=T(Dt),this.cdr=T(re),this.renderer=T(Ae),this.imgSrv=T(jt),this.win=T(ui),this.el=T(Q).nativeElement,this.showDefault=!1,this.valueChange=new R,this.loading=!1,this.disabled=!1}get safeOpt(){return this.res?.options??{}}get isText(){return this.res?.safeHtml==="text"}get hostData(){return{value:this.value,options:this.srv.fixOptions(this.options)}}updateValue(){this.destroy$?.unsubscribe(),this.destroy$=this.srv.get(this.value,this.options).subscribe(e=>{this.res=e,this.showDefault=this.value==this.safeOpt.default.condition,this._text=e.result?.text??"",this._unit=e.result?.unit??this.safeOpt?.unit,this.cdr.detectChanges(),this.setClass()})}setClass(){let{el:e,renderer:t}=this,{renderType:o,size:a,type:s}=this.safeOpt;mi(e,t,{cell:!0,[`cell__${o}`]:o!=null,[`cell__${a}`]:a!=null,"cell__has-unit":this._unit,"cell__has-default":this.showDefault,cell__disabled:this.disabled}),e.setAttribute("data-type",`${s}`)}ngOnChanges(e){Object.keys(e).every(t=>["loading","disabled"].includes(t))?this.setClass():this.updateValue()}change(e){this.value=e,this.valueChange.emit(e)}_link(e){if(e.preventDefault(),e.stopPropagation(),this.disabled)return;let t=this.safeOpt.link,o=t?.url;o!=null&&(/https?:\/\//g.test(o)?this.win.open(o,t?.target):this.router.navigateByUrl(o))}_showImg(e){let t=this.safeOpt.img;if(t==null||t.big==null)return;let o=-1,a=this._text.map((s,l)=>(o===-1&&s===e&&(o=l),typeof t.big=="function"?t.big(s):s));this.imgSrv.preview(a.map(s=>({src:s})),t.previewOptions).switchTo(o)}ngOnDestroy(){this.destroy$?.unsubscribe()}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["cell"],["","cell",""]],inputs:{value:"value",options:"options",loading:[M.HasDecoratorInputTransform,"loading","loading",J],disabled:[M.HasDecoratorInputTransform,"disabled","disabled",J]},outputs:{valueChange:"valueChange"},exportAs:["cell"],standalone:!0,features:[yt,ve,pe],decls:6,vars:1,consts:[["text",""],["textWrap",""],["nz-icon","","nzType","loading"],["nz-checkbox","",3,"nzDisabled","ngModel","ngModelChange"],["nz-radio","",3,"nzDisabled","ngModel","ngModelChange"],[3,"innerHTML","click"],[3,"nzColor"],[3,"innerHTML"],[3,"nzStatus","nzText"],["cell-widget-host","",3,"data"],[1,"img",3,"click"],["class","img",3,"point"],[3,"innerText"],["class","unit"],[1,"unit"],[3,"nz-tooltip"],[3,"ngTemplateOutlet"]],template:function(t,o){t&1&&C(0,ir,8,1,"ng-template",null,0,oe)(2,pr,2,1,"ng-template",null,1,oe)(4,dr,1,0,"span",2)(5,ur,1,1),t&2&&(h(4),b(4,o.loading?4:5))},dependencies:[Xe,Le,Be,$e,je,Ye,me,At,Nt,at,io,oo],encapsulation:2,changeDetection:0});let n=i;return n})();var ao=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({});let n=i;return n})();var fr=[Wt],so=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({imports:[kt,Xe,Ot,Rt,Pt,Vt,Ht,Pe,ao,fr]});let n=i;return n})();var Je=(()=>{let i=class i{constructor(){this._widgets={}}get widgets(){return this._widgets}register(e,t){this._widgets[e]=t}has(e){return this._widgets.hasOwnProperty(e)}get(e){return this._widgets[e]}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();function bc(...n){return gt([{provide:_t,multi:!0,useValue:()=>{let i=T(Je);n.forEach(r=>i.register(r.KEY,r.type))}}])}var mt=(()=>{let i=class i{constructor(){this.titles={},this.rows={}}add(e,t,o){this[e==="title"?"titles":"rows"][t]=o}getTitle(e){return this.titles[e]}getRow(e){return this.rows[e]}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=j({token:i,factory:i.\u0275fac});let n=i;return n})(),lo=(()=>{let i=class i{constructor(){this.source=T(mt,{host:!0}),this.ref=T(xt)}ngOnInit(){this.source.add(this.type,this.id,this.ref)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=K({type:i,selectors:[["","st-row",""]],inputs:{id:[M.None,"st-row","id"],type:"type"}});let n=i;return n})();var an=(()=>{let i=class i{constructor(e,t,o,a,s){this.dom=e,this.rowSource=t,this.acl=o,this.i18nSrv=a,this.stWidgetRegistry=s}setCog(e){this.cog=e}fixPop(e,t){if(e.pop==null||e.pop===!1){e.pop=!1;return}let o=f({},t);typeof e.pop=="string"?o.title=e.pop:typeof e.pop=="object"&&(o=f(f({},o),e.pop)),typeof o.condition!="function"&&(o.condition=()=>!1),e.pop=o}btnCoerce(e){if(!e)return[];let t=[],{modal:o,drawer:a,pop:s,btnIcon:l}=this.cog;for(let c of e)this.acl&&c.acl&&!this.acl.can(c.acl)||((c.type==="modal"||c.type==="static")&&(c.modal==null||c.modal.component==null?c.type="none":c.modal=f(f({paramsName:"record",size:"lg"},o),c.modal)),c.type==="drawer"&&(c.drawer==null||c.drawer.component==null?c.type="none":c.drawer=f(f({paramsName:"record",size:"lg"},a),c.drawer)),c.type==="del"&&typeof c.pop>"u"&&(c.pop=!0),this.fixPop(c,s),typeof c.icon!="function"&&(c.icon=f(f({},l),typeof c.icon=="string"?{type:c.icon}:c.icon)),c.children=c.children&&c.children.length>0?this.btnCoerce(c.children):[],c.i18n&&this.i18nSrv&&(c.text=this.i18nSrv.fanyi(c.i18n)),t.push(c));return this.btnCoerceIf(t),t}btnCoerceIf(e){for(let t of e)t.iifBehavior=t.iifBehavior||this.cog.iifBehavior,t.children&&t.children.length>0?this.btnCoerceIf(t.children):t.children=[]}fixedCoerce(e){let t=(o,a)=>o+ +a.width.toString().replace("px","");e.filter(o=>o.fixed&&o.fixed==="left"&&o.width).forEach((o,a)=>o._left=`${e.slice(0,a).reduce(t,0)}px`),e.filter(o=>o.fixed&&o.fixed==="right"&&o.width).reverse().forEach((o,a)=>o._right=`${a>0?e.slice(-a).reduce(t,0):0}px`)}sortCoerce(e){let t=this.fixSortCoerce(e);return t.reName=f(f({},this.cog.sortReName),t.reName),t}fixSortCoerce(e){if(typeof e.sort>"u")return{enabled:!1};let t={};return typeof e.sort=="string"?t.key=e.sort:typeof e.sort!="boolean"?t=e.sort:typeof e.sort=="boolean"&&(t.compare=(o,a)=>o[e.indexKey]-a[e.indexKey]),t.key||(t.key=e.indexKey),t.enabled=!0,t}filterCoerce(e){if(e.filter==null)return null;let t=e.filter;t.type=t.type||"default",t.showOPArea=t.showOPArea!==!1;let o="filter",a="fill",s=!0,l;switch(t.type){case"keyword":o="search",a="outline";break;case"number":o="search",a="outline",t.number=f({step:1,min:-1/0,max:1/0},t.number);break;case"date":o="calendar",a="outline",t.date=f({range:!1,mode:"date",showToday:!0,showNow:!1},t.date);break;case"custom":break;default:s=!1;break}if(s&&(t.menus==null||t.menus.length===0)&&(t.menus=[{value:l}]),t.menus?.length===0)return null;typeof t.multiple>"u"&&(t.multiple=!0),t.confirmText=t.confirmText||this.cog.filterConfirmText,t.clearText=t.clearText||this.cog.filterClearText,t.key=t.key||e.indexKey,t.icon=t.icon||o;let c={type:o,theme:a};return typeof t.icon=="string"?t.icon=ye(f({},c),{type:t.icon}):t.icon=f(f({},c),t.icon),this.updateDefault(t),this.acl&&(t.menus=t.menus?.filter(u=>this.acl.can(u.acl))),t.menus?.length===0?null:t}restoreRender(e){e.renderTitle&&(e.__renderTitle=typeof e.renderTitle=="string"?this.rowSource.getTitle(e.renderTitle):e.renderTitle),e.render&&(e.__render=typeof e.render=="string"?this.rowSource.getRow(e.render):e.render)}widgetCoerce(e){e.type==="widget"&&(e.widget==null||!this.stWidgetRegistry.has(e.widget.type))&&delete e.type}genHeaders(e){let t=[],o=[],a=(l,c,u=0)=>{t[u]=t[u]||[];let g=c;return l.map(d=>{let x={column:d,colStart:g,hasSubColumns:!1},P=1,L=d.children;return Array.isArray(L)&&L.length>0?(P=a(L,g,u+1).reduce((xe,Ue)=>xe+Ue,0),x.hasSubColumns=!0):o.push(x.column.width||""),"colSpan"in d&&(P=d.colSpan),"rowSpan"in d&&(x.rowSpan=d.rowSpan),x.colSpan=P,x.colEnd=x.colStart+P-1,t[u].push(x),g+=P,P})};a(e,0);let s=t.length;for(let l=0;l<s;l+=1)t[l].forEach(c=>{!("rowSpan"in c)&&!c.hasSubColumns&&(c.rowSpan=s-l)});return{headers:t,headerWidths:s>1?o:null}}cleanCond(e){let t=[],o=Fe(e);for(let a of o)typeof a.iif=="function"&&!a.iif(a)||this.acl&&a.acl&&!this.acl.can(a.acl)||(Array.isArray(a.children)&&a.children.length>0&&(a.children=this.cleanCond(a.children)),t.push(a));return t}mergeClass(e){let t=[];e._isTruncate&&t.push("text-truncate");let o=e.className;if(!o){let l={number:"text-right",currency:"text-right",date:"text-center"}[e.type];l&&t.push(l),e._className=t;return}let a=Array.isArray(o);if(!a&&typeof o=="object"){let l=o;t.forEach(c=>l[c]=!0),e._className=l;return}let s=a?Array.from(o):[o];s.splice(0,0,...t),e._className=[...new Set(s)].filter(l=>!!l)}process(e,t){if(!e||e.length===0)return{columns:[],headers:[],headerWidths:null};let{noIndex:o}=this.cog,a=0,s=0,l=0,c=[],u=d=>{d.index&&(Array.isArray(d.index)||(d.index=d.index.toString().split(".")),d.indexKey=d.index.join("."));let x=(typeof d.title=="string"?{text:d.title}:d.title)||{};return x.i18n&&this.i18nSrv&&(x.text=this.i18nSrv.fanyi(x.i18n)),x.text&&(x._text=this.dom.bypassSecurityTrustHtml(x.text)),d.title=x,d.type==="no"&&(d.noIndex=d.noIndex==null?o:d.noIndex),d.selections==null&&(d.selections=[]),d.type==="checkbox"&&(++a,d.width||(d.width=`${d.selections.length>0?62:50}px`)),this.acl&&(d.selections=d.selections.filter(P=>this.acl.can(P.acl))),d.type==="radio"&&(++s,d.selections=[],d.width||(d.width="50px")),d.cell!=null&&(d.type="cell"),d.type==="yn"&&(d.yn=f(f({truth:!0},this.cog.yn),d.yn)),d.type==="date"&&(d.dateFormat=d.dateFormat||this.cog.date?.format),(d.type==="link"&&typeof d.click!="function"||d.type==="badge"&&d.badge==null||d.type==="tag"&&d.tag==null||d.type==="enum"&&d.enum==null)&&(d.type=""),d._isTruncate=!!d.width&&t.widthMode.strictBehavior==="truncate"&&d.type!=="img",this.mergeClass(d),typeof d.width=="number"&&(d._width=d.width,d.width=`${d.width}px`),d._left=!1,d._right=!1,d.safeType=d.safeType??t.safeType,d._sort=this.sortCoerce(d),d.filter=this.filterCoerce(d),d.buttons=this.btnCoerce(d.buttons),this.widgetCoerce(d),this.restoreRender(d),d.resizable=f(f({disabled:!0,bounds:"window",minWidth:60,maxWidth:360,preview:!0},t.resizable),typeof d.resizable=="boolean"?{disabled:!d.resizable}:d.resizable),d.__point=l++,d},g=d=>{for(let x of d)c.push(u(x)),Array.isArray(x.children)&&g(x.children)},k=this.cleanCond(e);if(g(k),a>1)throw new Error("[st]: just only one column checkbox");if(s>1)throw new Error("[st]: just only one column radio");return this.fixedCoerce(c),f({columns:c.filter(d=>!Array.isArray(d.children)||d.children.length===0)},this.genHeaders(k))}restoreAllRender(e){e.forEach(t=>this.restoreRender(t))}updateDefault(e){return e.menus==null?this:(e.type==="default"?e.default=e.menus.findIndex(t=>t.checked)!==-1:e.default=!!e.menus[0].value,this)}cleanFilter(e){let t=e.filter;return t.default=!1,t.type==="default"?t.menus.forEach(o=>o.checked=!1):t.menus[0].value=void 0,this}};i.\u0275fac=function(t){return new(t||i)(E(Ee),E(mt,1),E(On,8),E(It,8),E(Je))},i.\u0275prov=j({token:i,factory:i.\u0275fac});let n=i;return n})();var sn=(()=>{let i=class i{constructor(e,t,o,a,s,l){this.http=e,this.datePipe=t,this.ynPipe=o,this.numberPipe=a,this.currencySrv=s,this.dom=l,this.sortTick=0}setCog(e){this.cog=e}process(e){let t,o=!1,{data:a,res:s,total:l,page:c,pi:u,ps:g,paginator:k,columns:d}=e,x,P,L,xe,Ue,Zt=c.show;return typeof a=="string"?(o=!0,t=this.getByRemote(a,e).pipe(ne(F=>{Ue=F;let V;if(Array.isArray(F))V=F,x=V.length,P=x,Zt=!1;else{let ee=s.reName;if(typeof ee=="function"){let Se=ee(F,{pi:u,ps:g,total:l});V=Se.list,x=Se.total}else{V=Ze(F,ee.list,[]),(V==null||!Array.isArray(V))&&(V=[]);let Se=ee.total&&Ze(F,ee.total,null);x=Se==null?l||0:+Se}}return Fe(V)}))):a==null||Array.isArray(a)?t=be(a??[]):t=a,o||(t=t.pipe(ne(F=>{Ue=F;let V=Fe(F),ee=this.getSorterFn(d);return ee&&(V=V.sort(ee)),V}),ne(F=>(d.filter(V=>V.filter).forEach(V=>{let ee=V.filter,Se=this.getFilteredData(ee);if(Se.length===0)return;let _n=ee.fn;typeof _n=="function"&&(F=F.filter(To=>Se.some(wo=>_n(wo,To))))}),F)),ne(F=>{if(k&&c.front){let V=Math.ceil(F.length/g);if(xe=Math.max(1,u>V?V:u),x=F.length,c.show===!0)return F.slice((xe-1)*g,xe*g)}return F}))),typeof s.process=="function"&&(t=t.pipe(ne(F=>s.process(F,Ue)))),t=t.pipe(ne(F=>this.optimizeData({result:F,columns:d,rowClassName:e.rowClassName}))),t.pipe(ne(F=>{L=F;let V=x||l,ee=P||g;return{pi:xe,ps:P,total:x,list:L,statistical:this.genStatistical(d,L,Ue),pageShow:typeof Zt>"u"?V>ee:Zt}}))}get(e,t,o){try{let a=t.safeType==="safeHtml";if(t.format){let g=t.format(e,t,o)||"";return{text:g,_text:a?this.dom.bypassSecurityTrustHtml(g):g,org:g,safeType:t.safeType}}let s=Ze(e,t.index,t.default),l=s,c,u;switch(t.type){case"no":l=this.getNoIndex(e,t,o);break;case"img":l=s?`<img src="${s}" class="img">`:"";break;case"number":l=this.numberPipe.transform(s,t.numberDigits);break;case"currency":l=this.currencySrv.format(s,t.currency?.format);break;case"date":l=s===t.default?t.default:this.datePipe.transform(s,t.dateFormat);break;case"yn":l=this.ynPipe.transform(s===t.yn.truth,t.yn.yes,t.yn.no,t.yn.mode,!1);break;case"enum":l=t.enum[s];break;case"tag":case"badge":let g=t.type==="tag"?t.tag:t.badge;if(g&&g[l]){let k=g[l];l=k.text,c=k.color,u=k.tooltip}else l="";break}return l==null&&(l=""),{text:l,_text:a?this.dom.bypassSecurityTrustHtml(l):l,org:s,color:c,tooltip:u,safeType:t.safeType,buttons:[]}}catch(a){let s="INVALID DATA";return console.error("Failed to get data",e,t,a),{text:s,_text:s,org:s,buttons:[],safeType:"text"}}}getByRemote(e,t){let{req:o,page:a,paginator:s,pi:l,ps:c,singleSort:u,multiSort:g,columns:k}=t,d=(o.method||"GET").toUpperCase(),x={},P=o.reName;s&&(o.type==="page"?x={[P.pi]:a.zeroIndexed?l-1:l,[P.ps]:c}:x={[P.skip]:(l-1)*c,[P.limit]:c}),x=f(f(f(f({},x),o.params),this.getReqSortMap(u,g,k)),this.getReqFilterMap(k)),t.req.ignoreParamNull==!0&&Object.keys(x).forEach(xe=>{x[xe]==null&&delete x[xe]});let L={params:x,body:o.body,headers:o.headers};return d==="POST"&&o.allInBody===!0&&(L={body:f(f({},o.body),x),headers:o.headers}),typeof o.process=="function"&&(L=o.process(L)),L.params instanceof Yt||(L.params=new Yt({fromObject:L.params})),typeof t.customRequest=="function"?t.customRequest({method:d,url:e,options:L}):this.http.request(d,e,L)}getCell(e,t,o){let a=typeof e.onCell=="function"?e.onCell(t,o):null,s=a?.colSpan??1,l=a?.rowSpan??1;return{colSpan:s<=0?null:s,rowSpan:l<=0?null:l}}optimizeData(e){let{result:t,columns:o,rowClassName:a}=e;for(let s=0,l=t.length;s<l;s++)t[s]._values=o.map(c=>{let u=this.getCell(c,t[s],s);if(Array.isArray(c.buttons)&&c.buttons.length>0)return{buttons:this.genButtons(c.buttons,t[s],c),_text:"",props:u};let g;return typeof c.cell=="function"&&(g=c.cell(t[s],c)),ye(f({},this.get(t[s],c,s)),{props:u,cell:g})}),t[s]._rowClassName=[a?a(t[s],s):null,t[s].className].filter(c=>!!c).join(" ");return t}getNoIndex(e,t,o){return typeof t.noIndex=="function"?t.noIndex(e,t,o):t.noIndex+o}genButtons(e,t,o){let a=c=>Fe(c).filter(u=>{let g=typeof u.iif=="function"?u.iif(t,u,o):!0,k=u.iifBehavior==="disabled";return u._result=g,u._disabled=!g&&k,u.children?.length&&(u.children=a(u.children)),g||k}),s=a(e),l=c=>{for(let u of c)u._text=typeof u.text=="function"?u.text(t,u):u.text||"",u._className=typeof u.className=="function"?u.className(t,u):u.className,u._icon=typeof u.icon=="function"?u.icon(t,u):u.icon,u.children?.length&&(u.children=l(u.children));return c};return this.fixMaxMultiple(l(s),o)}fixMaxMultiple(e,t){let o=t.maxMultipleButton,a=e.length;if(o==null||a<=0)return e;let s=f(f({},this.cog.maxMultipleButton),typeof o=="number"?{count:o}:o);if(s.count>=a)return e;let l=e.slice(0,s.count);return l.push({_text:s.text,children:e.slice(s.count)}),l}getValidSort(e){return e.filter(t=>t._sort&&t._sort.enabled&&t._sort.default).map(t=>t._sort)}getSorterFn(e){let t=this.getValidSort(e);if(t.length===0)return;let o=t[0];if(o.compare!==null&&typeof o.compare=="function")return(a,s)=>{let l=o.compare(a,s);return l!==0?o.default==="descend"?-l:l:0}}get nextSortTick(){return++this.sortTick}getReqSortMap(e,t,o){let a={},s=this.getValidSort(o);if(t){let g=f({key:"sort",separator:"-",nameSeparator:".",keepEmptyKey:!0,arrayParam:!1},t),k=s.sort((d,x)=>d.tick-x.tick).map(d=>d.key+g.nameSeparator+((d.reName||{})[d.default]||d.default));return a={[g.key]:g.arrayParam?k:k.join(g.separator)},k.length===0&&g.keepEmptyKey===!1?{}:a}if(s.length===0)return a;let l=s[0],c=l.key,u=(s[0].reName||{})[l.default]||l.default;return e&&(u=c+(e.nameSeparator||".")+u,c=e.key||"sort"),a[c]=u,a}getFilteredData(e){return e.type==="default"?e.menus.filter(t=>t.checked===!0):e.menus.slice(0,1)}getReqFilterMap(e){let t={};return e.filter(o=>o.filter&&o.filter.default===!0).forEach(o=>{let a=o.filter,s=this.getFilteredData(a),l={};a.reName?l=a.reName(a.menus,o):l[a.key]=s.map(c=>c.value).join(","),t=f(f({},t),l)}),t}genStatistical(e,t,o){let a={};return e.forEach((s,l)=>{a[s.key||s.indexKey||l]=s.statistical==null?{}:this.getStatistical(s,l,t,o)}),a}getStatistical(e,t,o,a){let s=e.statistical,l=f({digits:2,currency:void 0},typeof s=="string"?{type:s}:s),c={value:0},u=!1;if(typeof l.type=="function")c=l.type(this.getValues(t,o),e,o,a),u=!0;else switch(l.type){case"count":c.value=o.length;break;case"distinctCount":c.value=this.getValues(t,o).filter((g,k,d)=>d.indexOf(g)===k).length;break;case"sum":c.value=this.toFixed(this.getSum(t,o),l.digits),u=!0;break;case"average":c.value=this.toFixed(this.getSum(t,o)/o.length,l.digits),u=!0;break;case"max":c.value=Math.max(...this.getValues(t,o)),u=!0;break;case"min":c.value=Math.min(...this.getValues(t,o)),u=!0;break}return l.currency===!0||l.currency==null&&u===!0?c.text=this.currencySrv.format(c.value,e.currency?.format):c.text=String(c.value),c}toFixed(e,t){return isNaN(e)||!isFinite(e)?0:parseFloat(e.toFixed(t))}getValues(e,t){return t.map(o=>o._values[e].org).map(o=>o===""||o==null?0:o)}getSum(e,t){return this.getValues(e,t).reduce((o,a)=>o+=parseFloat(String(a)),0)}};i.\u0275fac=function(t){return new(t||i)(E(si),E(Et,1),E(Ft,1),E(bt,1),E($t),E(Ee))},i.\u0275prov=j({token:i,factory:i.\u0275fac});let n=i;return n})();function po(n){if(!n)return!1;for(var i=0,r=n.length;i<r;){if(n[i]<=127){i++;continue}if(n[i]>=194&&n[i]<=223)if(n[i+1]>>6===2){i+=2;continue}else return!1;if((n[i]===224&&n[i+1]>=160&&n[i+1]<=191||n[i]===237&&n[i+1]>=128&&n[i+1]<=159)&&n[i+2]>>6===2){i+=3;continue}if((n[i]>=225&&n[i]<=236||n[i]>=238&&n[i]<=239)&&n[i+1]>>6===2&&n[i+2]>>6===2){i+=3;continue}if((n[i]===240&&n[i+1]>=144&&n[i+1]<=191||n[i]>=241&&n[i]<=243&&n[i+1]>>6===2||n[i]===244&&n[i+1]>=128&&n[i+1]<=143)&&n[i+2]>>6===2&&n[i+3]>>6===2){i+=4;continue}return!1}return!0}var We=class We{constructor(i){this.http=T(Fn),this.lazy=T(Pn),this.ngZone=T(ke),this.cog=i.merge("xlsx",{url:"https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js",modules:["https://cdn.jsdelivr.net/npm/xlsx/dist/cpexcel.js"]})}init(){return typeof XLSX<"u"?Promise.resolve([]):this.lazy.load([this.cog.url].concat(this.cog.modules))}read(i){let{read:r,utils:{sheet_to_json:e}}=XLSX,t={},o=new Uint8Array(i),a="array";if(!po(o))try{i=cptable.utils.decode(936,o),a="string"}catch{}let s=r(i,{type:a});return s.SheetNames.forEach(l=>{let c=s.Sheets[l];t[l]=e(c,{header:1})}),t}import(i){return new Promise((r,e)=>{let t=o=>this.ngZone.run(()=>r(this.read(o)));this.init().then(()=>{if(typeof i=="string"){this.http.request("GET",i,{responseType:"arraybuffer"}).subscribe({next:a=>t(new Uint8Array(a)),error:a=>e(a)});return}let o=new FileReader;o.onload=a=>t(a.target.result),o.onerror=a=>e(a),o.readAsArrayBuffer(i)}).catch(()=>e("Unable to load xlsx.js"))})}export(i){return ut(this,null,function*(){return new Promise((r,e)=>{this.init().then(()=>{i=f({format:"xlsx"},i);let{writeFile:t,utils:{book_new:o,aoa_to_sheet:a,book_append_sheet:s}}=XLSX,l=o();Array.isArray(i.sheets)?i.sheets.forEach((u,g)=>{let k=a(u.data);s(l,k,u.name||`Sheet${g+1}`)}):(l.SheetNames=Object.keys(i.sheets),l.Sheets=i.sheets),i.callback&&i.callback(l);let c=i.filename||`export.${i.format}`;t(l,c,f({bookType:i.format,bookSST:!1,type:"array"},i.opts)),r({filename:c,wb:l})}).catch(t=>e(t))})})}numberToSchema(i){let e="";do--i,e=String.fromCharCode(65+i%26)+e,i=i/26>>0;while(i>0);return e}};We.\u0275fac=function(r){return new(r||We)(E(Ge))},We.\u0275prov=j({token:We,factory:We.\u0275fac,providedIn:"root"});var Oe=We;B([tn()],Oe.prototype,"read",null);B([tn()],Oe.prototype,"export",null);var ln=(()=>{let i=class i{constructor(){this.xlsxSrv=T(Oe,{optional:!0})}_stGet(e,t,o,a){let s={t:"s",v:""};if(t.format)s.v=t.format(e,t,o);else{let l=e._values?e._values[a].text:Ze(e,t.index,"");if(s.v=l,l!=null)switch(t.type){case"currency":s.t="n";break;case"date":`${l}`.length>0&&(s.t="d",s.z=t.dateFormat);break;case"yn":let c=t.yn;s.v=l===c.truth?c.yes:c.no;break}}return s.v=s.v??"",s}genSheet(e){let t={},o=t[e.sheetname||"Sheet1"]={},a=e.data.length,s=e.columens,l=0,c=!1,u=g=>g.exported===!1||!g.index||!(!g.buttons||g.buttons.length===0);for(let[g,k]of s.entries()){if(u(k))continue;!c&&k._width!=null&&(c=!0),++l;let d=this.xlsxSrv.numberToSchema(l);o[`${d}1`]={t:"s",v:typeof k.title=="object"?k.title.text:k.title};for(let x=0;x<a;x++)o[`${d}${x+2}`]=this._stGet(e.data[x],k,x,g)}return c&&(o["!cols"]=s.filter(g=>!u(g)).map(g=>({wpx:g._width}))),l>0&&a>0&&(o["!ref"]=`A1:${this.xlsxSrv.numberToSchema(l)}${a+1}`),t}export(e){return ut(this,null,function*(){if(this.xlsxSrv==null)return Promise.reject();let t=this.genSheet(e);return this.xlsxSrv.export({sheets:t,filename:e.filename,callback:e.callback})})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=j({token:i,factory:i.\u0275fac});let n=i;return n})();var cn=(()=>{let i=class i{constructor(){this.stWidgetRegistry=T(Je),this.viewContainerRef=T(De)}ngOnInit(){let e=this.column.widget,t=this.stWidgetRegistry.get(e.type);this.viewContainerRef.clear();let o=this.viewContainerRef.createComponent(t),{record:a,column:s}=this,l=e.params?e.params({record:a,column:s}):{record:a};Object.keys(l).forEach(c=>{o.instance[c]=l[c]})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=K({type:i,selectors:[["","st-widget-host",""]],inputs:{record:"record",column:"column"}});let n=i;return n})();var mo={pi:1,ps:10,size:"default",responsive:!0,responsiveHideHeaderFooter:!1,req:{type:"page",method:"GET",allInBody:!1,lazyLoad:!1,ignoreParamNull:!1,reName:{pi:"pi",ps:"ps",skip:"skip",limit:"limit"}},res:{reName:{list:["list"],total:["total"]}},page:{front:!0,zeroIndexed:!1,position:"bottom",placement:"right",show:!0,showSize:!1,pageSizes:[10,20,30,40,50],showQuickJumper:!1,total:!0,toTop:!0,toTopOffset:100,itemRender:null,simple:!1},modal:{paramsName:"record",size:"lg",exact:!0},drawer:{paramsName:"record",size:"md",footer:!0,footerHeight:55},pop:{title:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",trigger:"click",placement:"top"},btnIcon:{theme:"outline",spin:!1},noIndex:1,expandRowByClick:!1,expandAccordion:!1,widthMode:{type:"default",strictBehavior:"truncate"},virtualItemSize:54,virtualMaxBufferPx:200,virtualMinBufferPx:100,iifBehavior:"hide",loadingDelay:0,safeType:"safeHtml",date:{format:"yyyy-MM-dd HH:mm"},yn:{truth:!0,yes:"\u662F",mode:"icon"},maxMultipleButton:{text:"\u66F4\u591A",count:2}};var pn=class{constructor(i){this.dir=i}get $implicit(){return this.dir.let}get let(){return this.dir.let}},dn=(()=>{let i=class i{constructor(e,t){e.createEmbeddedView(t,new pn(this))}static ngTemplateContextGuard(e,t){return!0}};i.\u0275fac=function(t){return new(t||i)(w(De),w(xt))},i.\u0275dir=K({type:i,selectors:[["","let",""]],inputs:{let:"let"},standalone:!0});let n=i;return n})();var yr=["*"];function vr(n,i){if(n&1&&D(0,"nz-resize-handle",1),n&2){let r=i.$implicit;m("nzDirection",r.direction)("nzCursorType",r.cursorType)}}function uo(n){return Jt(n)?n.touches[0]||n.changedTouches[0]:n}var mn=(()=>{let i=class i{constructor(e,t){this.ngZone=e,this.listeners=new Map,this.handleMouseDownOutsideAngular$=new te,this.documentMouseUpOutsideAngular$=new te,this.documentMouseMoveOutsideAngular$=new te,this.mouseEnteredOutsideAngular$=new te,this.document=t}startResizing(e){let t=Jt(e);this.clearListeners();let o=t?"touchmove":"mousemove",a=t?"touchend":"mouseup",s=c=>{this.documentMouseMoveOutsideAngular$.next(c)},l=c=>{this.documentMouseUpOutsideAngular$.next(c),this.clearListeners()};this.listeners.set(o,s),this.listeners.set(a,l),this.ngZone.runOutsideAngular(()=>{this.listeners.forEach((c,u)=>{this.document.addEventListener(u,c)})})}clearListeners(){this.listeners.forEach((e,t)=>{this.document.removeEventListener(t,e)}),this.listeners.clear()}ngOnDestroy(){this.handleMouseDownOutsideAngular$.complete(),this.documentMouseUpOutsideAngular$.complete(),this.documentMouseMoveOutsideAngular$.complete(),this.mouseEnteredOutsideAngular$.complete(),this.clearListeners()}};i.\u0275fac=function(t){return new(t||i)(E(ke),E(Me))},i.\u0275prov=j({token:i,factory:i.\u0275fac});let n=i;return n})(),_o=(()=>{let i=class i{constructor(e,t,o,a,s,l){this.elementRef=e,this.renderer=t,this.nzResizableService=o,this.platform=a,this.ngZone=s,this.destroy$=l,this.nzBounds="parent",this.nzMinHeight=40,this.nzMinWidth=40,this.nzGridColumnCount=-1,this.nzMaxColumn=-1,this.nzMinColumn=-1,this.nzLockAspectRatio=!1,this.nzPreview=!1,this.nzDisabled=!1,this.nzResize=new R,this.nzResizeEnd=new R,this.nzResizeStart=new R,this.resizing=!1,this.currentHandleEvent=null,this.ghostElement=null,this.sizeCache=null,this.nzResizableService.handleMouseDownOutsideAngular$.pipe(O(this.destroy$)).subscribe(c=>{this.nzDisabled||(this.resizing=!0,this.nzResizableService.startResizing(c.mouseEvent),this.currentHandleEvent=c,this.nzResizeStart.observers.length&&this.ngZone.run(()=>this.nzResizeStart.emit({mouseEvent:c.mouseEvent,direction:c.direction})),this.elRect=this.el.getBoundingClientRect())}),this.nzResizableService.documentMouseUpOutsideAngular$.pipe(O(this.destroy$),he(Boolean)).subscribe(c=>{this.resizing&&(this.resizing=!1,this.nzResizableService.documentMouseUpOutsideAngular$.next(null),this.endResize(c))}),this.nzResizableService.documentMouseMoveOutsideAngular$.pipe(O(this.destroy$)).subscribe(c=>{this.resizing&&this.resize(c)})}setPosition(){let e=getComputedStyle(this.el).position;(e==="static"||!e)&&this.renderer.setStyle(this.el,"position","relative")}calcSize(e,t,o){let a,s,l,c,u=0,g=0,k=this.nzMinWidth,d=1/0,x=1/0;if(this.nzBounds==="parent"){let P=this.renderer.parentNode(this.el);if(P instanceof HTMLElement){let L=P.getBoundingClientRect();d=L.width,x=L.height}}else if(this.nzBounds==="window")typeof window<"u"&&(d=window.innerWidth,x=window.innerHeight);else if(this.nzBounds&&this.nzBounds.nativeElement&&this.nzBounds.nativeElement instanceof HTMLElement){let P=this.nzBounds.nativeElement.getBoundingClientRect();d=P.width,x=P.height}return l=en(this.nzMaxWidth,d),c=en(this.nzMaxHeight,x),this.nzGridColumnCount!==-1&&(g=l/this.nzGridColumnCount,k=this.nzMinColumn!==-1?g*this.nzMinColumn:k,l=this.nzMaxColumn!==-1?g*this.nzMaxColumn:l),o!==-1?/(left|right)/i.test(this.currentHandleEvent.direction)?(a=Math.min(Math.max(e,k),l),s=Math.min(Math.max(a/o,this.nzMinHeight),c),(s>=c||s<=this.nzMinHeight)&&(a=Math.min(Math.max(s*o,k),l))):(s=Math.min(Math.max(t,this.nzMinHeight),c),a=Math.min(Math.max(s*o,k),l),(a>=l||a<=k)&&(s=Math.min(Math.max(a/o,this.nzMinHeight),c))):(a=Math.min(Math.max(e,k),l),s=Math.min(Math.max(t,this.nzMinHeight),c)),this.nzGridColumnCount!==-1&&(u=Math.round(a/g),a=u*g),{col:u,width:a,height:s}}resize(e){let t=this.elRect,o=uo(e),a=uo(this.currentHandleEvent.mouseEvent),s=t.width,l=t.height,c=this.nzLockAspectRatio?s/l:-1;switch(this.currentHandleEvent.direction){case"bottomRight":s=o.clientX-t.left,l=o.clientY-t.top;break;case"bottomLeft":s=t.width+a.clientX-o.clientX,l=o.clientY-t.top;break;case"topRight":s=o.clientX-t.left,l=t.height+a.clientY-o.clientY;break;case"topLeft":s=t.width+a.clientX-o.clientX,l=t.height+a.clientY-o.clientY;break;case"top":l=t.height+a.clientY-o.clientY;break;case"right":s=o.clientX-t.left;break;case"bottom":l=o.clientY-t.top;break;case"left":s=t.width+a.clientX-o.clientX}let u=this.calcSize(s,l,c);this.sizeCache=f({},u),this.nzResize.observers.length&&this.ngZone.run(()=>{this.nzResize.emit(ye(f({},u),{mouseEvent:e,direction:this.currentHandleEvent.direction}))}),this.nzPreview&&this.previewResize(u)}endResize(e){this.removeGhostElement();let t=this.sizeCache?f({},this.sizeCache):{width:this.elRect.width,height:this.elRect.height};this.nzResizeEnd.observers.length&&this.ngZone.run(()=>{this.nzResizeEnd.emit(ye(f({},t),{mouseEvent:e,direction:this.currentHandleEvent.direction}))}),this.sizeCache=null,this.currentHandleEvent=null}previewResize({width:e,height:t}){this.createGhostElement(),this.renderer.setStyle(this.ghostElement,"width",`${e}px`),this.renderer.setStyle(this.ghostElement,"height",`${t}px`)}createGhostElement(){this.ghostElement||(this.ghostElement=this.renderer.createElement("div"),this.renderer.setAttribute(this.ghostElement,"class","nz-resizable-preview")),this.renderer.appendChild(this.el,this.ghostElement)}removeGhostElement(){this.ghostElement&&this.renderer.removeChild(this.el,this.ghostElement)}ngAfterViewInit(){this.platform.isBrowser&&(this.el=this.elementRef.nativeElement,this.setPosition(),this.ngZone.runOutsideAngular(()=>{ue(this.el,"mouseenter").pipe(O(this.destroy$)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!0)}),ue(this.el,"mouseleave").pipe(O(this.destroy$)).subscribe(()=>{this.nzResizableService.mouseEnteredOutsideAngular$.next(!1)})}))}ngOnDestroy(){this.ghostElement=null,this.sizeCache=null}};i.\u0275fac=function(t){return new(t||i)(w(Q),w(Ae),w(mn),w(An),w(ke),w(ze))},i.\u0275dir=K({type:i,selectors:[["","nz-resizable",""]],hostAttrs:[1,"nz-resizable"],hostVars:4,hostBindings:function(t,o){t&2&&N("nz-resizable-resizing",o.resizing)("nz-resizable-disabled",o.nzDisabled)},inputs:{nzBounds:"nzBounds",nzMaxHeight:"nzMaxHeight",nzMaxWidth:"nzMaxWidth",nzMinHeight:"nzMinHeight",nzMinWidth:"nzMinWidth",nzGridColumnCount:"nzGridColumnCount",nzMaxColumn:"nzMaxColumn",nzMinColumn:"nzMinColumn",nzLockAspectRatio:"nzLockAspectRatio",nzPreview:"nzPreview",nzDisabled:"nzDisabled"},outputs:{nzResize:"nzResize",nzResizeEnd:"nzResizeEnd",nzResizeStart:"nzResizeStart"},exportAs:["nzResizable"],standalone:!0,features:[He([mn,ze])]});let n=i;return B([de()],n.prototype,"nzLockAspectRatio",void 0),B([de()],n.prototype,"nzPreview",void 0),B([de()],n.prototype,"nzDisabled",void 0),n})(),un=class{constructor(i,r){this.direction=i,this.mouseEvent=r}},ho=Vn({passive:!0}),hn=(()=>{let i=class i{constructor(e,t,o,a,s){this.ngZone=e,this.nzResizableService=t,this.renderer=o,this.host=a,this.destroy$=s,this.nzDirection="bottomRight",this.nzCursorType="window",this.nzMouseDown=new R}ngOnInit(){this.nzResizableService.mouseEnteredOutsideAngular$.pipe(O(this.destroy$)).subscribe(e=>{e?this.renderer.addClass(this.host.nativeElement,"nz-resizable-handle-box-hover"):this.renderer.removeClass(this.host.nativeElement,"nz-resizable-handle-box-hover")}),this.ngZone.runOutsideAngular(()=>{xn(ue(this.host.nativeElement,"mousedown",ho),ue(this.host.nativeElement,"touchstart",ho)).pipe(O(this.destroy$)).subscribe(e=>{this.nzResizableService.handleMouseDownOutsideAngular$.next(new un(this.nzDirection,e))})})}onPointerDown(e){e.target.setPointerCapture(e.pointerId)}onPointerUp(e){e.target.releasePointerCapture(e.pointerId)}};i.\u0275fac=function(t){return new(t||i)(w(ke),w(mn),w(Ae),w(Q),w(ze))},i.\u0275cmp=q({type:i,selectors:[["nz-resize-handle"],["","nz-resize-handle",""]],hostAttrs:[1,"nz-resizable-handle"],hostVars:20,hostBindings:function(t,o){t&1&&S("pointerdown",function(s){return o.onPointerDown(s)})("pointerup",function(s){return o.onPointerUp(s)}),t&2&&N("nz-resizable-handle-top",o.nzDirection==="top")("nz-resizable-handle-right",o.nzDirection==="right")("nz-resizable-handle-bottom",o.nzDirection==="bottom")("nz-resizable-handle-left",o.nzDirection==="left")("nz-resizable-handle-topRight",o.nzDirection==="topRight")("nz-resizable-handle-bottomRight",o.nzDirection==="bottomRight")("nz-resizable-handle-bottomLeft",o.nzDirection==="bottomLeft")("nz-resizable-handle-topLeft",o.nzDirection==="topLeft")("nz-resizable-handle-cursor-type-grid",o.nzCursorType==="grid")("nz-resizable-handle-cursor-type-window",o.nzCursorType==="window")},inputs:{nzDirection:"nzDirection",nzCursorType:"nzCursorType"},outputs:{nzMouseDown:"nzMouseDown"},exportAs:["nzResizeHandle"],standalone:!0,features:[He([ze]),pe],ngContentSelectors:yr,decls:1,vars:0,template:function(t,o){t&1&&(Tt(),wt(0))},encapsulation:2,changeDetection:0});let n=i;return n})(),Tr=["bottomRight","topRight","bottomLeft","topLeft","bottom","right","top","left"];function fo(n){return n.map(i=>typeof i=="string"?{direction:i,cursorType:"window"}:i)}var Zp=(()=>{let i=class i{constructor(){this.nzDirections=Tr,this.resizeHandleOptions=fo(this.nzDirections)}ngOnChanges(e){e.nzDirections&&(this.resizeHandleOptions=fo(e.nzDirections.currentValue))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["nz-resize-handles"]],inputs:{nzDirections:"nzDirections"},exportAs:["nzResizeHandles"],standalone:!0,features:[ve,pe],decls:1,vars:1,consts:[[3,"nzDirection","nzCursorType",4,"ngFor","ngForOf"],[3,"nzDirection","nzCursorType"]],template:function(t,o){t&1&&C(0,vr,1,2,"nz-resize-handle",0),t&2&&m("ngForOf",o.resizeHandleOptions)},dependencies:[hn,In],encapsulation:2,changeDetection:0});let n=i;return n})(),go=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({});let n=i;return n})();function Ir(n,i){if(n&1){let r=I();_(0,"div",5)(1,"input",6),ce("ngModelChange",function(t){y(r);let o=p();return le(o.f.menus[0].value,t)||(o.f.menus[0].value=t),v(t)}),S("ngModelChange",function(t){y(r);let o=p();return v(o.n.emit(t))})("keyup.enter",function(){y(r);let t=p();return v(t.confirm())}),z()()}if(n&2){let r=p();h(),Ce("ngModel",r.f.menus[0].value),H("placeholder",r.f.placeholder)}}function Mr(n,i){if(n&1){let r=I();_(0,"div",7)(1,"nz-input-number",8),ce("ngModelChange",function(t){y(r);let o=p();return le(o.f.menus[0].value,t)||(o.f.menus[0].value=t),v(t)}),S("ngModelChange",function(t){y(r);let o=p();return v(o.n.emit(t))}),z()()}if(n&2){let r=p();h(),Ce("ngModel",r.f.menus[0].value),m("nzMin",r.f.number.min)("nzMax",r.f.number.max)("nzStep",r.f.number.step)("nzPrecision",r.f.number.precision)("nzPlaceHolder",r.f.placeholder)}}function Er(n,i){if(n&1){let r=I();_(0,"nz-range-picker",11),ce("ngModelChange",function(t){y(r);let o=p(2);return le(o.f.menus[0].value,t)||(o.f.menus[0].value=t),v(t)}),S("ngModelChange",function(t){y(r);let o=p(2);return v(o.n.emit(t))}),z()}if(n&2){let r=p(2);m("nzMode",r.f.date.mode),Ce("ngModel",r.f.menus[0].value),m("nzShowNow",r.f.date.showNow)("nzShowToday",r.f.date.showToday)("nzDisabledDate",r.f.date.disabledDate)("nzDisabledTime",r.f.date.disabledTime)}}function Fr(n,i){if(n&1){let r=I();_(0,"nz-date-picker",11),ce("ngModelChange",function(t){y(r);let o=p(2);return le(o.f.menus[0].value,t)||(o.f.menus[0].value=t),v(t)}),S("ngModelChange",function(t){y(r);let o=p(2);return v(o.n.emit(t))}),z()}if(n&2){let r=p(2);m("nzMode",r.f.date.mode),Ce("ngModel",r.f.menus[0].value),m("nzShowNow",r.f.date.showNow)("nzShowToday",r.f.date.showToday)("nzDisabledDate",r.f.date.disabledDate)("nzDisabledTime",r.f.date.disabledTime)}}function Nr(n,i){if(n&1&&(_(0,"div",9),C(1,Er,1,6,"nz-range-picker",10)(2,Fr,1,6),z()),n&2){let r=p();h(),b(1,r.f.date.range?1:2)}}function Pr(n,i){}var Or=(n,i,r)=>({$implicit:n,col:i,handle:r});function Rr(n,i){if(n&1&&(_(0,"div",12),C(1,Pr,0,0,"ng-template",13),z()),n&2){let r=p();h(),m("ngTemplateOutlet",r.f.custom)("ngTemplateOutletContext",St(2,Or,r.f,r.col,r))}}function Ar(n,i){if(n&1){let r=I();_(0,"label",17),ce("ngModelChange",function(t){y(r);let o=p().$implicit;return le(o.checked,t)||(o.checked=t),v(t)}),S("ngModelChange",function(){y(r);let t=p(3);return v(t.checkboxChange())}),W(1),z()}if(n&2){let r=p().$implicit;Ce("ngModel",r.checked),h(),Ve(" ",r.text," ")}}function Vr(n,i){if(n&1){let r=I();_(0,"label",18),S("ngModelChange",function(){y(r);let t=p().$implicit,o=p(2);return v(o.radioChange(t))}),W(1),z()}if(n&2){let r=p().$implicit;m("ngModel",r.checked),h(),Ve(" ",r.text," ")}}function Hr(n,i){if(n&1&&(_(0,"li",15),C(1,Ar,2,2,"label",16)(2,Vr,2,2),z()),n&2){let r=p(2);h(),b(1,r.f.multiple?1:2)}}function $r(n,i){if(n&1&&(_(0,"ul",14),U(1,Hr,3,1,"li",15,ae),z()),n&2){let r=p();h(),Z(r.f.menus)}}function Lr(n,i){if(n&1){let r=I();_(0,"div",19)(1,"a",20),S("click",function(){y(r);let t=p();return v(t.confirm())}),_(2,"span"),W(3),z()(),_(4,"a",21),S("click",function(){y(r);let t=p();return v(t.reset())}),_(5,"span"),W(6),z()()()}if(n&2){let r=p();h(3),ie(r.f.confirmText||r.locale.filterConfirm),h(3),ie(r.f.clearText||r.locale.filterReset)}}var Co=(()=>{let i=class i{constructor(){this.cdr=T(re),this.visible=!1,this.locale={},this.n=new R,this.handle=new R}get icon(){return this.f.icon}stopPropagation(e){e.stopPropagation()}checkboxChange(){this.n.emit(this.f.menus?.filter(e=>e.checked))}radioChange(e){this.f.menus.forEach(t=>t.checked=!1),e.checked=!e.checked,this.n.emit(e)}close(e){e!=null&&this.handle.emit(e),this.visible=!1,this.cdr.detectChanges()}confirm(){return this.handle.emit(!0),this}reset(){return this.handle.emit(!1),this}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["st-filter"]],hostVars:6,hostBindings:function(t,o){t&2&&N("ant-table-filter-trigger-container",!0)("st__filter",!0)("ant-table-filter-trigger-container-open",o.visible)},inputs:{col:"col",locale:"locale",f:"f"},outputs:{n:"n",handle:"handle"},decls:11,vars:9,consts:[["nz-dropdown","","nzTrigger","click","nzOverlayClassName","st__filter-wrap",1,"ant-table-filter-trigger",3,"nzDropdownMenu","nzClickHide","nzVisible","nzVisibleChange","click"],["nz-icon","",3,"nzType","nzTheme"],["filterMenu","nzDropdownMenu"],[1,"ant-table-filter-dropdown"],["class","ant-table-filter-dropdown-btns"],[1,"st__filter-keyword"],["type","text","nz-input","",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-sm","st__filter-number"],[1,"width-100",3,"ngModel","nzMin","nzMax","nzStep","nzPrecision","nzPlaceHolder","ngModelChange"],[1,"p-sm","st__filter-date"],["nzInline","",3,"nzMode","ngModel","nzShowNow","nzShowToday","nzDisabledDate","nzDisabledTime"],["nzInline","",3,"nzMode","ngModel","nzShowNow","nzShowToday","nzDisabledDate","nzDisabledTime","ngModelChange"],[1,"st__filter-custom"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-menu",""],["nz-menu-item",""],["nz-checkbox","",3,"ngModel"],["nz-checkbox","",3,"ngModel","ngModelChange"],["nz-radio","",3,"ngModel","ngModelChange"],[1,"ant-table-filter-dropdown-btns"],[1,"ant-table-filter-dropdown-link","confirm",3,"click"],[1,"ant-table-filter-dropdown-link","clear",3,"click"]],template:function(t,o){if(t&1&&(_(0,"span",0),ce("nzVisibleChange",function(s){return le(o.visible,s)||(o.visible=s),s}),S("click",function(s){return o.stopPropagation(s)}),D(1,"i",1),z(),_(2,"nz-dropdown-menu",null,2)(4,"div",3),C(5,Ir,2,2)(6,Mr,2,6)(7,Nr,3,1)(8,Rr,2,6)(9,$r,3,0)(10,Lr,7,2,"div",4),z()()),t&2){let a=A(3),s;N("active",o.visible||o.f.default),m("nzDropdownMenu",a)("nzClickHide",!1),Ce("nzVisible",o.visible),h(),m("nzType",o.icon.type)("nzTheme",o.icon.theme),h(4),b(5,(s=o.f.type)==="keyword"?5:s==="number"?6:s==="date"?7:s==="custom"?8:9),h(5),b(10,o.f.showOPArea?10:-1)}},dependencies:[$e,di,Le,Be,me,je,lt,st,ct,pt,Ye,$i,Bi,Wi,Ui],encapsulation:2,changeDetection:0});let n=i;return n})();var jr=["okBtn"],Wr=["cancelBtn"];function Ur(n,i){n&1&&(_(0,"div",15),D(1,"span",16),z())}function Zr(n,i){if(n&1&&(Te(0),D(1,"span",18),we()),n&2){let r=i.$implicit;h(),m("nzType",r||"exclamation-circle")}}function qr(n,i){if(n&1&&(Te(0),C(1,Zr,2,1,"ng-container",8),_(2,"div",17),W(3),z(),we()),n&2){let r=p(2);h(),m("nzStringTemplateOutlet",r.nzIcon),h(2),ie(r.nzTitle)}}function Gr(n,i){if(n&1&&(Te(0),W(1),we()),n&2){let r=p(2);h(),ie(r.nzCancelText)}}function Qr(n,i){n&1&&(Te(0),W(1),Qt(2,"nzI18n"),we()),n&2&&(h(),ie(Xt(2,1,"Modal.cancelText")))}function Xr(n,i){if(n&1&&(Te(0),W(1),we()),n&2){let r=p(2);h(),ie(r.nzOkText)}}function Yr(n,i){n&1&&(Te(0),W(1),Qt(2,"nzI18n"),we()),n&2&&(h(),ie(Xt(2,1,"Modal.okText")))}function Kr(n,i){if(n&1){let r=I();_(0,"div",2)(1,"div",3),C(2,Ur,2,0,"div",4),_(3,"div",5)(4,"div")(5,"div",6)(6,"div",7),C(7,qr,4,2,"ng-container",8),z(),_(8,"div",9)(9,"button",10,11),S("click",function(){y(r);let t=p();return v(t.onCancel())}),C(11,Gr,2,1,"ng-container",12)(12,Qr,3,3,"ng-container",12),z(),_(13,"button",13,14),S("click",function(){y(r);let t=p();return v(t.onConfirm())}),C(15,Xr,2,1,"ng-container",12)(16,Yr,3,3,"ng-container",12),z()()()()()()()}if(n&2){let r=p();N("ant-popover-rtl",r.dir==="rtl"),m("cdkTrapFocusAutoCapture",r.nzAutoFocus!==null)("ngClass",r._classMap)("ngStyle",r.nzOverlayStyle)("@.disabled",!!(r.noAnimation!=null&&r.noAnimation.nzNoAnimation))("nzNoAnimation",r.noAnimation==null?null:r.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),h(2),m("ngIf",r.nzPopconfirmShowArrow),h(5),m("nzStringTemplateOutlet",r.nzTitle),h(2),m("nzSize","small"),H("cdkFocusInitial",r.nzAutoFocus==="cancel"||null),h(2),m("ngIf",r.nzCancelText),h(),m("ngIf",!r.nzCancelText),h(),m("nzSize","small")("nzType",r.nzOkType!=="danger"?r.nzOkType:"primary")("nzDanger",r.nzOkDanger||r.nzOkType==="danger")("nzLoading",r.confirmLoading),H("cdkFocusInitial",r.nzAutoFocus==="ok"||null),h(2),m("ngIf",r.nzOkText),h(),m("ngIf",!r.nzOkText)}}var Jr="popconfirm",zo=(()=>{let i=class i extends Ci{getProxyPropertyMap(){return f({nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzOkDanger:["nzOkDanger",()=>this.nzOkDanger],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzBeforeConfirm:["nzBeforeConfirm",()=>this.nzBeforeConfirm],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus]},super.getProxyPropertyMap())}constructor(e,t,o,a,s){super(e,t,o,a,s),this._nzModuleName=Jr,this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new R,this.nzOnCancel=new R,this.nzOnConfirm=new R,this.componentRef=this.hostView.createComponent(xo)}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe(O(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe(O(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}};i.\u0275fac=function(t){return new(t||i)(w(Q),w(De),w(Ae),w(rt,9),w(Qe))},i.\u0275dir=K({type:i,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(t,o){t&2&&N("ant-popover-open",o.visible)},inputs:{arrowPointAtCenter:[M.None,"nzPopconfirmArrowPointAtCenter","arrowPointAtCenter"],title:[M.None,"nzPopconfirmTitle","title"],directiveTitle:[M.None,"nz-popconfirm","directiveTitle"],trigger:[M.None,"nzPopconfirmTrigger","trigger"],placement:[M.None,"nzPopconfirmPlacement","placement"],origin:[M.None,"nzPopconfirmOrigin","origin"],mouseEnterDelay:[M.None,"nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:[M.None,"nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:[M.None,"nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:[M.None,"nzPopconfirmOverlayStyle","overlayStyle"],visible:[M.None,"nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzOkDanger:"nzOkDanger",nzCancelText:"nzCancelText",nzBeforeConfirm:"nzBeforeConfirm",nzIcon:"nzIcon",nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],standalone:!0,features:[qt]});let n=i;return B([de()],n.prototype,"arrowPointAtCenter",void 0),B([de()],n.prototype,"nzOkDanger",void 0),B([de()],n.prototype,"nzCondition",void 0),B([de()],n.prototype,"nzPopconfirmShowArrow",void 0),B([Ne()],n.prototype,"nzPopconfirmBackdrop",void 0),B([Ne()],n.prototype,"nzAutofocus",void 0),n})(),xo=(()=>{let i=class i extends zi{constructor(e,t,o,a,s){super(e,o,s),this.elementRef=t,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzOkDanger=!1,this.nzAutoFocus=null,this.nzBeforeConfirm=null,this.nzOnCancel=new te,this.nzOnConfirm=new te,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.confirmLoading=!1,this.document=a}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}handleConfirm(){this.nzOnConfirm.next(),super.hide()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){if(this.nzBeforeConfirm){let e=Hn(this.nzBeforeConfirm()).pipe(vn());this.confirmLoading=!0,e.pipe(ft(()=>{this.confirmLoading=!1,this.cdr.markForCheck()}),O(this.nzVisibleChange),O(this.destroy$)).subscribe(t=>{t&&this.handleConfirm()})}else this.handleConfirm()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){let e=this.elementFocusedBeforeModalWasOpened;if(e&&typeof e.focus=="function"){let t=this.document.activeElement,o=this.elementRef.nativeElement;(!t||t===this.document.body||t===o||o.contains(t))&&e.focus()}}};i.\u0275fac=function(t){return new(t||i)(w(re),w(Q),w(ot,8),w(Me,8),w(rt,9))},i.\u0275cmp=q({type:i,selectors:[["nz-popconfirm"]],viewQuery:function(t,o){if(t&1&&(fe(jr,5,Q),fe(Wr,5,Q)),t&2){let a;_e(a=ge())&&(o.okBtn=a),_e(a=ge())&&(o.cancelBtn=a)}},exportAs:["nzPopconfirmComponent"],standalone:!0,features:[qt,pe],decls:2,vars:6,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","nzArrowPointAtCenter","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],["class","ant-popover-arrow",4,"ngIf"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"nzSize","click"],["cancelBtn",""],[4,"ngIf"],["nz-button","",3,"nzSize","nzType","nzDanger","nzLoading","click"],["okBtn",""],[1,"ant-popover-arrow"],[1,"ant-popover-arrow-content"],[1,"ant-popover-message-title"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(t,o){t&1&&(C(0,Kr,17,21,"ng-template",0,1,oe),S("overlayOutsideClick",function(s){return o.onClickOutside(s)})("detach",function(){return o.hide()})("positionChange",function(s){return o.onPositionChange(s)})),t&2&&m("cdkConnectedOverlayHasBackdrop",o.nzBackdrop)("cdkConnectedOverlayOrigin",o.origin)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayOpen",o._visible)("cdkConnectedOverlayPush",o.cdkConnectedOverlayPush)("nzArrowPointAtCenter",o.nzArrowPointAtCenter)},dependencies:[Qn,Gn,gi,_i,Bn,Ln,nt,En,rt,Mn,ti,ei,Pe,me,Jn,Kn,Xn,Yn,oi,ii],encapsulation:2,data:{animation:[fi]},changeDetection:0});let n=i;return n})(),yo=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({imports:[xo]});let n=i;return n})();var ta=["table"],na=["contextmenuTpl"];function ia(n,i){if(n&1&&D(0,"small",14),n&2){let r=p().$implicit;m("innerHTML",r.optional,Y)}}function oa(n,i){if(n&1&&D(0,"i",15),n&2){let r=p().$implicit;m("nzTooltipTitle",r.optionalHelp)}}function ra(n,i){if(n&1&&(D(0,"span",11),C(1,ia,1,1,"small",12)(2,oa,1,1,"i",13)),n&2){let r=i.$implicit;m("innerHTML",r._text,Y),h(),b(1,r.optional?1:-1),h(),b(2,r.optionalHelp?2:-1)}}function aa(n,i){if(n&1){let r=I();_(0,"label",16),ce("ngModelChange",function(t){y(r);let o=p();return le(o._allChecked,t)||(o._allChecked=t),v(t)}),S("ngModelChange",function(){y(r);let t=p();return v(t.checkAll())}),z()}if(n&2){let r=i.$implicit,e=p();N("ant-table-selection-select-all-custom",r),m("nzDisabled",e._allCheckedDisabled),Ce("ngModel",e._allChecked),m("nzIndeterminate",e._indeterminate)}}function sa(n,i){if(n&1&&D(0,"th",17),n&2){let r=p(3);m("rowSpan",r._headers.length)}}function la(n,i){n&1&&(_(0,"nz-resize-handle",20),D(1,"i"),z())}function ca(n,i){}var Ut=(n,i)=>({$implicit:n,index:i});function pa(n,i){if(n&1&&C(0,ca,0,0,"ng-template",5),n&2){let r=p().let,e=p(),t=e.$implicit,o=e.$index;m("ngTemplateOutlet",r.__renderTitle)("ngTemplateOutletContext",tt(2,Ut,t.column,o))}}function da(n,i){}var ma=()=>({$implicit:!1});function ua(n,i){if(n&1&&C(0,da,0,0,"ng-template",5),n&2){p(7);let r=A(3);m("ngTemplateOutlet",r)("ngTemplateOutletContext",Gt(2,ma))}}function ha(n,i){}function fa(n,i){if(n&1&&(_(0,"div",26)(1,"div",27),D(2,"i",28),z()()),n&2){p();let r=A(4);h(),m("nzDropdownMenu",r)}}function _a(n,i){if(n&1){let r=I();_(0,"li",29),S("click",function(){let o=y(r).$implicit,a=p(8);return v(a._rowSelection(o))}),z()}if(n&2){let r=i.$implicit;m("innerHTML",r.text,Y)}}var ga=()=>({$implicit:!0});function Ca(n,i){if(n&1&&(_(0,"div",22),C(1,ha,0,0,"ng-template",5)(2,fa,3,1,"div",23),_(3,"nz-dropdown-menu",null,24)(5,"ul",25),U(6,_a,1,1,"li",30,ae),z()()()),n&2){let r=p(3).let;p(4);let e=A(3);h(),m("ngTemplateOutlet",e)("ngTemplateOutletContext",Gt(3,ga)),h(),b(2,r.selections.length?2:-1),h(4),Z(r.selections)}}function za(n,i){if(n&1&&C(0,ua,1,3,null,5)(1,Ca,8,4),n&2){let r=p(2).let;b(0,r.selections.length===0?0:1)}}function xa(n,i){}var Re=n=>({$implicit:n});function ya(n,i){if(n&1&&C(0,xa,0,0,"ng-template",5),n&2){let r=p(2).let;p(4);let e=A(1);m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(2,Re,r.title))}}function va(n,i){if(n&1&&C(0,za,2,1)(1,ya,1,4),n&2){let r=p().let,e;b(0,(e=r.type)==="checkbox"?0:1)}}function Ta(n,i){if(n&1){let r=I();_(0,"st-filter",31),S("n",function(t){y(r);let o=p(5);return v(o.handleFilterNotify(t))})("handle",function(t){y(r);let o=p().let,a=p(4);return v(a._handleFilter(o,t))}),z()}if(n&2){let r=p().let,e=p().$implicit,t=p(3);m("col",e.column)("f",r.filter)("locale",t.locale)}}function wa(n,i){if(n&1){let r=I();_(0,"th",19),S("nzSortOrderChange",function(t){let a=y(r).let,s=p().$index,l=p(3);return v(l.sort(a,s,t))})("nzResizeEnd",function(t){let a=y(r).let,s=p(4);return v(s.colResize(t,a))}),C(1,la,2,0,"nz-resize-handle",20)(2,pa,1,5,null,5)(3,va,2,1)(4,Ta,1,3,"st-filter",21),z()}if(n&2){let r=i.let,e=p(),t=e.$implicit,o=e.$index,a=e.$count,s=e.$index;N("st__has-filter",r.filter),m("colSpan",t.colSpan)("rowSpan",t.rowSpan)("nzWidth",r.width)("nzLeft",r._left)("nzRight",r._right)("ngClass",r._className)("nzShowSort",r._sort.enabled)("nzSortOrder",r._sort.default)("nzCustomFilter",!!r.filter)("nzDisabled",o===a-1||r.resizable.disabled)("nzMaxWidth",r.resizable.maxWidth)("nzMinWidth",r.resizable.minWidth)("nzBounds",r.resizable.bounds)("nzPreview",r.resizable.preview),H("data-col",r.indexKey)("data-col-index",s),h(),b(1,o!==a-1&&!r.resizable.disabled?1:-1),h(),b(2,r.__renderTitle?2:3),h(2),b(4,r.filter?4:-1)}}function Sa(n,i){if(n&1&&C(0,wa,5,21,"th",18),n&2){let r=i.$implicit;m("let",r.column)}}function ba(n,i){if(n&1&&(_(0,"tr"),C(1,sa,1,1,"th",17),U(2,Sa,1,1,"th",32,ae),z()),n&2){let r=i.$implicit,e=i.$index,t=p(2);h(),b(1,e===0&&t.expand?1:-1),h(),Z(r)}}function ka(n,i){if(n&1&&(_(0,"thead"),U(1,ba,4,1,"tr",null,et),z()),n&2){let r=p();h(),Z(r._headers)}}function Da(n,i){}function Ia(n,i){if(n&1&&C(0,Da,0,0,"ng-template",5),n&2){let r=p();m("ngTemplateOutlet",r.bodyHeader)("ngTemplateOutletContext",se(2,Re,r._statistical))}}function Ma(n,i){if(n&1){let r=I();_(0,"td",36),S("nzExpandChange",function(t){y(r);let o=p().$implicit,a=p();return v(a._expandChange(o,t))})("click",function(t){y(r);let o=p(2);return v(o._stopPropagation(t))}),z()}if(n&2){let r=p().$implicit,e=p();m("nzShowExpand",e.expand&&r.showExpand!==!1)("nzExpand",r.expand)}}function Ea(n,i){}function Fa(n,i){if(n&1&&(_(0,"span",40),C(1,Ea,0,0,"ng-template",5),z()),n&2){let r=p(2).$implicit;p(2);let e=A(1);h(),m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(2,Re,r.title))}}function Na(n,i){if(n&1){let r=I();_(0,"td",37),C(1,Fa,2,4,"span",38),_(2,"st-td",39),S("n",function(t){y(r);let o=p(3);return v(o._handleTd(t))}),z()()}if(n&2){let r=p(),e=r.$implicit,t=r.$index,o=p(),a=o.$implicit,s=o.index,l=p();m("nzLeft",!!e._left)("nzRight",!!e._right)("ngClass",e._className),H("data-col-index",t)("colspan",(a._values[t].props==null?null:a._values[t].props.colSpan)===1||a._values[t].props==null?null:a._values[t].props.colSpan)("rowspan",(a._values[t].props==null?null:a._values[t].props.rowSpan)===1||a._values[t].props==null?null:a._values[t].props.rowSpan),h(),b(1,l.responsive?1:-1),h(),m("data",l._data)("i",a)("index",s)("c",e)("cIdx",t)}}function Pa(n,i){if(n&1&&C(0,Na,3,12,"td",37),n&2){let r=i.$index,e=p().$implicit;b(0,(e._values[r].props==null?null:e._values[r].props.colSpan)>0&&(e._values[r].props==null?null:e._values[r].props.rowSpan)>0?0:-1)}}function Oa(n,i){}function Ra(n,i){if(n&1){let r=I();_(0,"tr",33),S("click",function(t){let o=y(r),a=o.$implicit,s=o.index,l=p();return v(l._rowClick(t,a,s,!1))})("dblclick",function(t){let o=y(r),a=o.$implicit,s=o.index,l=p();return v(l._rowClick(t,a,s,!0))}),C(1,Ma,1,2,"td",34),U(2,Pa,1,1,null,null,ae),z(),_(4,"tr",35),C(5,Oa,0,0,"ng-template",5),z()}if(n&2){let r=i.$implicit,e=i.index,t=p();m("ngClass",r._rowClassName),H("data-index",e),h(),b(1,t.expand?1:-1),h(),Z(t._columns),h(2),m("nzExpand",r.expand),h(),m("ngTemplateOutlet",t.expand)("ngTemplateOutletContext",tt(6,Ut,r,e))}}function Aa(n,i){}function Va(n,i){if(n&1&&C(0,Aa,0,0,"ng-template",5),n&2){let r=i.$implicit,e=i.index;p(2);let t=A(10);m("ngTemplateOutlet",t)("ngTemplateOutletContext",tt(2,Ut,r,e))}}function Ha(n,i){n&1&&C(0,Va,1,5,"ng-template",7)}function $a(n,i){}function La(n,i){if(n&1&&C(0,$a,0,0,"ng-template",5),n&2){let r=i.$implicit,e=i.$index;p(2);let t=A(10);m("ngTemplateOutlet",t)("ngTemplateOutletContext",tt(2,Ut,r,e))}}function Ba(n,i){if(n&1&&U(0,La,1,5,null,5,Sn().trackBy),n&2){let r=p();Z(r._data)}}function ja(n,i){}function Wa(n,i){if(n&1&&C(0,ja,0,0,"ng-template",5),n&2){let r=p();m("ngTemplateOutlet",r.body)("ngTemplateOutletContext",se(2,Re,r._statistical))}}function Ua(n,i){if(n&1&&W(0),n&2){let r=i.range,e=i.$implicit,t=p();ie(t.renderTotal(e,r))}}function Za(n,i){if(n&1){let r=I();_(0,"li",29),S("click",function(){y(r);let t=p().$implicit;return v(t.fn(t))}),z()}if(n&2){let r=p().$implicit;m("innerHTML",r.text,Y)}}function qa(n,i){if(n&1){let r=I();_(0,"li",29),S("click",function(){let o=y(r).$implicit;return v(o.fn(o))}),z()}if(n&2){let r=i.$implicit;m("innerHTML",r.text,Y)}}function Ga(n,i){if(n&1&&(_(0,"li",41)(1,"ul"),U(2,qa,1,1,"li",30,ae),z()()),n&2){let r=p().$implicit;m("nzTitle",r.text),h(2),Z(r.children)}}function Qa(n,i){if(n&1&&C(0,Za,1,1,"li",30)(1,Ga,4,1),n&2){let r=i.$implicit;b(0,r.children.length===0?0:1)}}function Xa(n,i){}function Ya(n,i){if(n&1&&(_(0,"span",5),C(1,Xa,0,0,"ng-template",3),z()),n&2){let r=p(),e=r.child,t=r.$implicit;p();let o=A(3);N("d-block",e)("width-100",e),m("nzTooltipTitle",t.tooltip),h(),m("ngTemplateOutlet",o)("ngTemplateOutletContext",se(7,Re,t))}}function Ka(n,i){}function Ja(n,i){if(n&1&&C(0,Ka,0,0,"ng-template",3),n&2){let r=p().$implicit;p();let e=A(3);m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(2,Re,r))}}function es(n,i){if(n&1&&C(0,Ya,2,9,"span",4)(1,Ja,1,4),n&2){let r=i.$implicit;b(0,r.tooltip?0:1)}}function ts(n,i){}function ns(n,i){if(n&1){let r=I();_(0,"a",7),S("nzOnConfirm",function(){y(r);let t=p().$implicit,o=p();return v(o._btn(t))})("click",function(t){y(r);let o=p(2);return v(o._stopPropagation(t))}),C(1,ts,0,0,"ng-template",3),z()}if(n&2){let r=p().$implicit;p();let e=A(5);m("nzPopconfirmTitle",r.pop.title)("nzIcon",r.pop.icon)("nzCondition",r.pop.condition(r))("nzCancelText",r.pop.cancelText)("nzOkText",r.pop.okText)("nzOkType",r.pop.okType)("ngClass",r._className),h(),m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(9,Re,r))}}function is(n,i){}function os(n,i){if(n&1){let r=I();_(0,"a",8),S("click",function(t){y(r);let o=p().$implicit,a=p();return v(a._btn(o,t))}),C(1,is,0,0,"ng-template",3),z()}if(n&2){let r=p().$implicit;p();let e=A(5);m("ngClass",r._className),h(),m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(3,Re,r))}}function rs(n,i){if(n&1&&C(0,ns,2,11,"a",6)(1,os,2,5),n&2){let r=i.$implicit;b(0,r.pop?0:1)}}function as(n,i){if(n&1&&D(0,"i",10),n&2){let r=p(2).$implicit;m("nzIconfont",r._icon.iconfont)}}function ss(n,i){if(n&1&&D(0,"i",11),n&2){let r=p(2).$implicit;m("nzType",r._icon.type)("nzTheme",r._icon.theme)("nzSpin",r._icon.spin)("nzTwotoneColor",r._icon.twoToneColor)}}function ls(n,i){if(n&1&&C(0,as,1,1,"i",10)(1,ss,1,4),n&2){let r=p().$implicit;b(0,r._icon.iconfont?0:1)}}var cs=n=>({"pl-xs":n});function ps(n,i){if(n&1&&(C(0,ls,2,1),D(1,"span",9)),n&2){let r=i.$implicit;b(0,r._icon?0:-1),h(),m("innerHTML",r._text,Y)("ngClass",se(3,cs,r._icon))}}function ds(n,i){}var ms=(n,i,r)=>({$implicit:n,index:i,column:r});function us(n,i){if(n&1&&C(0,ds,0,0,"ng-template",3),n&2){let r=p();m("ngTemplateOutlet",r.c.__render)("ngTemplateOutletContext",St(2,ms,r.i,r.index,r.c))}}function hs(n,i){if(n&1){let r=I();_(0,"label",12),S("ngModelChange",function(t){y(r);let o=p(2);return v(o._checkbox(t))}),z()}if(n&2){let r=p(2);m("nzDisabled",r.i.disabled)("ngModel",r.i.checked)}}function fs(n,i){if(n&1){let r=I();_(0,"label",13),S("ngModelChange",function(){y(r);let t=p(2);return v(t._radio())}),z()}if(n&2){let r=p(2);m("nzDisabled",r.i.disabled)("ngModel",r.i.checked)}}function _s(n,i){if(n&1){let r=I();_(0,"a",14),S("click",function(t){y(r);let o=p(2);return v(o._link(t))}),z()}if(n&2){let r=p(2);m("innerHTML",r.i._values[r.cIdx]._text,Y),H("title",r.i._values[r.cIdx].text)}}function gs(n,i){if(n&1&&(_(0,"nz-tag",15),D(1,"span",16),z()),n&2){let r=p(2);m("nzColor",r.i._values[r.cIdx].color)("nz-tooltip",r.i._values[r.cIdx].tooltip),h(),m("innerHTML",r.i._values[r.cIdx]._text,Y)}}function Cs(n,i){if(n&1&&D(0,"nz-badge",17),n&2){let r=p(2);m("nzStatus",r.i._values[r.cIdx].color)("nzText",r.i._values[r.cIdx].text)("nz-tooltip",r.i._values[r.cIdx].tooltip)}}function zs(n,i){if(n&1&&D(0,"cell",18),n&2){let r=p(2),e;m("value",r.i._values[r.cIdx].text)("options",(e=r.i._values[r.cIdx].cell)!==null&&e!==void 0?e:r.c.cell)}}function xs(n,i){}function ys(n,i){if(n&1&&C(0,xs,0,0,"ng-template",19),n&2){let r=p(2);m("record",r.i)("column",r.c)}}function vs(n,i){if(n&1&&D(0,"span",20),n&2){let r=p(3);m("innerText",r.i._values[r.cIdx]._text),H("title",r.c._isTruncate?r.i._values[r.cIdx].text:null)}}function Ts(n,i){if(n&1&&D(0,"span",16),n&2){let r=p(3);m("innerHTML",r.i._values[r.cIdx]._text,Y),H("title",r.c._isTruncate?r.i._values[r.cIdx].text:null)}}function ws(n,i){if(n&1&&C(0,vs,1,2,"span",20)(1,Ts,1,2),n&2){let r=p(2);b(0,r.c.safeType==="text"?0:1)}}function Ss(n,i){n&1&&D(0,"li",26)}function bs(n,i){}var ks=n=>({$implicit:n,child:!0});function Ds(n,i){if(n&1&&(_(0,"li",27),C(1,bs,0,0,"ng-template",3),z()),n&2){let r=p().$implicit;p(4);let e=A(1);N("st__btn-disabled",r._disabled),h(),m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(4,ks,r))}}function Is(n,i){if(n&1&&C(0,Ss,1,0,"li",26)(1,Ds,2,6),n&2){let r=i.$implicit;b(0,r.type==="divider"?0:1)}}function Ms(n,i){if(n&1&&(_(0,"a",22),D(1,"span",16)(2,"i",23),z(),_(3,"nz-dropdown-menu",null,24)(5,"ul",25),U(6,Is,2,1,null,null,ae),z()()),n&2){let r=A(4),e=p().$implicit;m("nzDropdownMenu",r),h(),m("innerHTML",e._text,Y),h(5),Z(e.children)}}function Es(n,i){}var Fs=n=>({$implicit:n,child:!1});function Ns(n,i){if(n&1&&(_(0,"span"),C(1,Es,0,0,"ng-template",3),z()),n&2){let r=p().$implicit;p(2);let e=A(1);N("st__btn-disabled",r._disabled),h(),m("ngTemplateOutlet",e)("ngTemplateOutletContext",se(4,Fs,r))}}function Ps(n,i){n&1&&D(0,"nz-divider",21)}function Os(n,i){if(n&1&&C(0,Ms,8,2)(1,Ns,2,6)(2,Ps,1,0,"nz-divider",21),n&2){let r=i.$implicit,e=i.$index,t=i.$count;b(0,r.children.length>0?0:1),h(2),b(2,e!==t-1?2:-1)}}function Rs(n,i){if(n&1&&(C(0,hs,1,2)(1,fs,1,2)(2,_s,1,2)(3,gs,2,3)(4,Cs,1,3)(5,zs,1,2)(6,ys,1,2)(7,ws,2,1),U(8,Os,3,2,null,null,ae)),n&2){let r=p(),e;b(0,(e=r.c.type)==="checkbox"?0:e==="radio"?1:e==="link"?2:e==="tag"?3:e==="badge"?4:e==="cell"?5:e==="widget"?6:7),h(8),Z(r.i._values[r.cIdx].buttons)}}var fn=(()=>{let i=class i{get req(){return this._req}set req(e){this._req=qe({},!0,this.cog.req,e)}get res(){return this._res}set res(e){let t=this._res=qe({},!0,this.cog.res,e),o=t.reName;typeof o!="function"&&(Array.isArray(o.list)||(o.list=o.list.split(".")),Array.isArray(o.total)||(o.total=o.total.split("."))),this._res=t}get page(){return this._page}set page(e){this._page=f(f({},this.cog.page),e),this.updateTotalTpl()}get multiSort(){return this._multiSort}set multiSort(e){if(typeof e=="boolean"&&!J(e)||typeof e=="object"&&Object.keys(e).length===0){this._multiSort=void 0;return}this._multiSort=f({},typeof e=="object"?e:{})}set widthMode(e){this._widthMode=f(f({},this.cog.widthMode),e)}get widthMode(){return this._widthMode}set widthConfig(e){this._widthConfig=e,this.customWidthConfig=e&&e.length>0}set resizable(e){this._resizable=typeof e=="object"?e:{disabled:!J(e)}}get count(){return this._data.length}get list(){return this._data}get noColumns(){return this.columns==null}constructor(e){this.i18nSrv=T(It,{optional:!0}),this.el=T(Q).nativeElement,this.cdr=T(re),this.doc=T(Me),this.exportSrv=T(ln),this.columnSource=T(an),this.dataSource=T(sn),this.yelonI18n=T(li),this.cms=T(bi),this.destroy$=T(wn),this.totalTpl="",this.inied=!1,this.customWidthConfig=!1,this._widthConfig=[],this.locale={},this._loading=!1,this._data=[],this._statistical={},this._isPagination=!0,this._allChecked=!1,this._allCheckedDisabled=!1,this._indeterminate=!1,this._headers=[],this._columns=[],this.contextmenuList=[],this.ps=10,this.pi=1,this.total=0,this.loading=null,this.loadingDelay=0,this.loadingIndicator=null,this.bordered=!1,this.scroll={x:null,y:null},this.showHeader=!0,this.expandRowByClick=!1,this.expandAccordion=!1,this.expand=null,this.responsive=!0,this.error=new R,this.change=new R,this.virtualScroll=!1,this.virtualItemSize=54,this.virtualMaxBufferPx=200,this.virtualMinBufferPx=100,this.virtualForTrackBy=t=>t,this.trackBy=(t,o)=>o,this.yelonI18n.change.pipe(it()).subscribe(()=>{this.locale=this.yelonI18n.getData("st"),this._columns.length>0&&(this.updateTotalTpl(),this.cd())}),this.i18nSrv?.change.pipe(it(),he(()=>this._columns.length>0)).subscribe(()=>this.refreshColumns()),this.setCog(e.merge("st",mo))}setCog(e){let t=f({},e.multiSort);delete e.multiSort,this.cog=e,Object.assign(this,e),t.global!==!1&&(this.multiSort=t),this.columnSource.setCog(e),this.dataSource.setCog(e)}cd(){return this.cdr.detectChanges(),this}refreshData(){return this._data=[...this._data],this.cd()}renderTotal(e,t){return this.totalTpl?this.totalTpl.replace("{{total}}",e).replace("{{range[0]}}",t[0]).replace("{{range[1]}}",t[1]):""}changeEmit(e,t){let o={type:e,pi:this.pi,ps:this.ps,total:this.total};t!=null&&(o[e]=t),this.change.emit(o)}get filteredData(){return this.loadData({paginator:!1}).pipe(ne(e=>e.list))}updateTotalTpl(){let{total:e}=this.page;typeof e=="string"&&e.length?this.totalTpl=e:J(e)?this.totalTpl=this.locale.total:this.totalTpl=""}setLoading(e){this.loading==null&&(this._loading=e,this.cdr.detectChanges())}loadData(e){let{pi:t,ps:o,data:a,req:s,res:l,page:c,total:u,singleSort:g,multiSort:k,rowClassName:d}=this;return this.dataSource.process(f({pi:t,ps:o,total:u,data:a,req:s,res:l,page:c,columns:this._columns,singleSort:g,multiSort:k,rowClassName:d,paginator:!0,customRequest:this.customRequest||this.cog.customRequest},e)).pipe(it(this.destroy$))}loadPageData(){return this.setLoading(!0),this.loadData().pipe(ft(()=>this.setLoading(!1)),yn(e=>(this.error.emit({type:"req",error:e}),gn(()=>e))),ne(e=>{let t="undefined";return typeof e.pi!==t&&(this.pi=e.pi),typeof e.ps!==t&&(this.ps=e.ps),typeof e.total!==t&&(this.total=e.total),typeof e.pageShow!==t&&(this._isPagination=e.pageShow),this._data=e.list??[],this._statistical=e.statistical,this.cdkVirtualScrollViewport!=null&&Promise.resolve().then(()=>this.cdkVirtualScrollViewport?.checkViewportSize()),this._refCheck(),this.changeEmit("loaded",e.list),this}))}clear(e=!0){return e&&this.clearStatus(),this._data=[],this.cd()}clearStatus(){return this.clearCheck().clearRadio().clearFilter().clearSort()}load(e=1,t,o){return e!==-1&&(this.pi=e),typeof t<"u"&&(this.req.params=o&&o.merge?f(f({},this.req.params),t):t),this._change("pi",o),this}reload(e,t){return this.load(-1,e,t)}reset(e,t){return this.clearStatus().load(1,e,t),this}_toTop(e){if(!(e??this.page.toTop))return;let t=this.el;t.scrollIntoView(),this.doc.documentElement.scrollTop-=this.page.toTopOffset,this.scroll&&(this.cdkVirtualScrollViewport?this.cdkVirtualScrollViewport.scrollTo({top:0,left:0}):t.querySelector(".ant-table-body, .ant-table-content")?.scrollTo(0,0))}_change(e,t){(e==="pi"||e==="ps"&&this.pi<=Math.ceil(this.total/this.ps))&&this.loadPageData().subscribe(()=>this._toTop(t?.toTop)),this.changeEmit(e)}closeOtherExpand(e){this.expandAccordion!==!1&&this._data.filter(t=>t!==e).forEach(t=>t.expand=!1)}_rowClick(e,t,o,a){let s=e.target;if(s.nodeName==="INPUT")return;let{expand:l,expandRowByClick:c}=this;if(l&&t.showExpand!==!1&&c){t.expand=!t.expand,this.closeOtherExpand(t),this.changeEmit("expand",t);return}let u={e,item:t,index:o};a?this.changeEmit("dblClick",u):(this._clickRowClassName(s,t,o),this.changeEmit("click",u))}_clickRowClassName(e,t,o){let a=this.clickRowClassName;if(a==null)return;let s=f({exclusive:!1},typeof a=="string"?{fn:()=>a}:a),l=s.fn(t,o),c=e.closest("tr");s.exclusive&&c.parentElement.querySelectorAll("tr").forEach(u=>u.classList.remove(l)),c.classList.contains(l)?c.classList.remove(l):c.classList.add(l)}_expandChange(e,t){e.expand=t,this.closeOtherExpand(e),this.changeEmit("expand",e)}_stopPropagation(e){e.stopPropagation()}_refColAndData(){return this._columns.forEach(e=>{this._data.forEach((t,o)=>{let a=t._values;if(e.type==="no"){let s=`${this.dataSource.getNoIndex(t,e,o)}`;a[e.__point]={text:s,_text:s,org:o,safeType:"text"}}a[e.__point].props=this.dataSource.getCell(e,t,o)})}),this.refreshData()}addRow(e,t){return Array.isArray(e)||(e=[e]),this._data.splice(t?.index??0,0,...e),this.optimizeData()._refColAndData()}removeRow(e){if(typeof e=="number")this._data.splice(e,1);else{Array.isArray(e)||(e=[e]);let o=this._data;for(var t=o.length;t--;)e.indexOf(o[t])!==-1&&o.splice(t,1)}return this._refCheck()._refColAndData()}setRow(e,t,o){return o=f({refreshSchema:!1,emitReload:!1},o),typeof e!="number"&&(e=this._data.indexOf(e)),this._data[e]=qe(this._data[e],!1,t),this.optimizeData(),o.refreshSchema?(this.resetColumns({emitReload:o.emitReload}),this):this.refreshData()}sort(e,t,o){this.multiSort?(e._sort.default=o,e._sort.tick=this.dataSource.nextSortTick):this._columns.forEach((a,s)=>a._sort.default=s===t?o:null),this.cdr.detectChanges(),this.loadPageData().subscribe(()=>{let a={value:o,map:this.dataSource.getReqSortMap(this.singleSort,this.multiSort,this._columns),column:e};this.changeEmit("sort",a)})}clearSort(){return this._columns.forEach(e=>e._sort.default=null),this}_handleFilter(e,t){t||this.columnSource.cleanFilter(e),this.pi=1,this.columnSource.updateDefault(e.filter),this.loadPageData().subscribe(()=>this.changeEmit("filter",e))}handleFilterNotify(e){this.changeEmit("filterChange",e)}clearFilter(){return this._columns.filter(e=>e.filter&&e.filter.default===!0).forEach(e=>this.columnSource.cleanFilter(e)),this}clearCheck(){return this.checkAll(!1)}_refCheck(){let e=this._data.filter(a=>!a.disabled),t=e.filter(a=>a.checked===!0);this._allChecked=t.length>0&&t.length===e.length;let o=e.every(a=>!a.checked);return this._indeterminate=!this._allChecked&&!o,this._allCheckedDisabled=this._data.length===this._data.filter(a=>a.disabled).length,this.cd()}checkAll(e){return e=typeof e>"u"?this._allChecked:e,this._data.filter(t=>!t.disabled).forEach(t=>t.checked=e),this._refCheck()._checkNotify().refreshData()}_rowSelection(e){return e.select(this._data),this._refCheck()._checkNotify()}_checkNotify(){let e=this._data.filter(t=>!t.disabled&&t.checked===!0);return this.changeEmit("checkbox",e),this}clearRadio(){return this._data.filter(e=>e.checked).forEach(e=>e.checked=!1),this.changeEmit("radio",null),this.refreshData()}_handleTd(e){switch(e.type){case"checkbox":this._refCheck()._checkNotify();break;case"radio":this.changeEmit("radio",e.item),this.refreshData();break}}export(e,t){let o=Array.isArray(e)?this.dataSource.optimizeData({columns:this._columns,result:e}):this._data;(e===!0?this.filteredData:be(o)).subscribe(a=>this.exportSrv.export(ye(f({columens:this._columns},t),{data:a})))}colResize({width:e},t){t.width=`${e}px`,this.changeEmit("resize",t)}onContextmenu(e){if(!this.contextmenu)return;e.preventDefault(),e.stopPropagation();let t=e.target.closest("[data-col-index]");if(!t)return;let o=Number(t.dataset.colIndex),a=Number(t.closest("tr").dataset.index),s=isNaN(a),l=this.contextmenu({event:e,type:s?"head":"body",rowIndex:s?null:a,colIndex:o,data:s?null:this.list[a],column:this._columns[o]});(Cn(l)?l:be(l)).pipe(it(this.destroy$),he(c=>c.length>0)).subscribe(c=>{this.contextmenuList=c.map(u=>(Array.isArray(u.children)||(u.children=[]),u)),this.cdr.detectChanges(),this.cms.create(e,this.contextmenuTpl)})}get cdkVirtualScrollViewport(){return this.orgTable?.cdkVirtualScrollViewport}_resetColumns(e){return e=f({emitReload:!0,preClearData:!1},e),typeof e.columns<"u"&&(this.columns=e.columns),typeof e.pi<"u"&&(this.pi=e.pi),typeof e.ps<"u"&&(this.ps=e.ps),e.emitReload&&(e.preClearData=!0),e.preClearData&&(this._data=[]),this.refreshColumns(),e.emitReload?this.loadPageData():(this.cd(),be(this))}resetColumns(e){return zn(this._resetColumns(e))}refreshColumns(){let e=this.columnSource.process(this.columns,{widthMode:this.widthMode,resizable:this._resizable,safeType:this.cog.safeType});return this._columns=e.columns,this._headers=e.headers,this.customWidthConfig===!1&&e.headerWidths!=null&&(this._widthConfig=e.headerWidths),this}optimizeData(){return this._data=this.dataSource.optimizeData({columns:this._columns,result:this._data,rowClassName:this.rowClassName}),this}pureItem(e){if(typeof e=="number"&&(e=this._data[e]),!e)return null;let t=Fe(e);return["_values","_rowClassName"].forEach(o=>delete t[o]),t}ngAfterViewInit(){this.refreshColumns(),this.req.lazyLoad||this.loadPageData().subscribe(),this.inied=!0}ngOnChanges(e){e.loading&&(this._loading=e.loading.currentValue),this.inied&&(e.columns&&this.refreshColumns().optimizeData(),e.data&&this.loadPageData().subscribe())}};i.\u0275fac=function(t){return new(t||i)(w(Ge))},i.\u0275cmp=q({type:i,selectors:[["st"]],viewQuery:function(t,o){if(t&1&&(fe(ta,5),fe(na,5)),t&2){let a;_e(a=ge())&&(o.orgTable=a.first),_e(a=ge())&&(o.contextmenuTpl=a.first)}},hostVars:14,hostBindings:function(t,o){t&2&&N("st",!0)("st__p-left",o.page.placement==="left")("st__p-center",o.page.placement==="center")("st__width-strict",o.widthMode.type==="strict")("st__row-class",o.rowClassName)("ant-table-rep",o.responsive)("ant-table-rep__hide-header-footer",o.responsiveHideHeaderFooter)},inputs:{req:"req",res:"res",page:"page",data:"data",columns:"columns",contextmenu:"contextmenu",ps:[M.HasDecoratorInputTransform,"ps","ps",e=>Ie(e,10)],pi:[M.HasDecoratorInputTransform,"pi","pi",e=>Ie(e,1)],total:[M.HasDecoratorInputTransform,"total","total",e=>Ie(e,0)],loading:"loading",loadingDelay:[M.HasDecoratorInputTransform,"loadingDelay","loadingDelay",Ie],loadingIndicator:"loadingIndicator",bordered:[M.HasDecoratorInputTransform,"bordered","bordered",J],size:"size",scroll:"scroll",singleSort:"singleSort",multiSort:"multiSort",rowClassName:"rowClassName",clickRowClassName:"clickRowClassName",widthMode:"widthMode",widthConfig:"widthConfig",resizable:"resizable",header:"header",showHeader:[M.HasDecoratorInputTransform,"showHeader","showHeader",J],footer:"footer",bodyHeader:"bodyHeader",body:"body",expandRowByClick:[M.HasDecoratorInputTransform,"expandRowByClick","expandRowByClick",J],expandAccordion:[M.HasDecoratorInputTransform,"expandAccordion","expandAccordion",J],expand:"expand",noResult:"noResult",responsive:[M.HasDecoratorInputTransform,"responsive","responsive",J],responsiveHideHeaderFooter:[M.HasDecoratorInputTransform,"responsiveHideHeaderFooter","responsiveHideHeaderFooter",J],virtualScroll:[M.HasDecoratorInputTransform,"virtualScroll","virtualScroll",J],virtualItemSize:[M.HasDecoratorInputTransform,"virtualItemSize","virtualItemSize",Ie],virtualMaxBufferPx:[M.HasDecoratorInputTransform,"virtualMaxBufferPx","virtualMaxBufferPx",Ie],virtualMinBufferPx:[M.HasDecoratorInputTransform,"virtualMinBufferPx","virtualMinBufferPx",Ie],customRequest:"customRequest",virtualForTrackBy:"virtualForTrackBy",trackBy:"trackBy"},outputs:{error:"error",change:"change"},exportAs:["st"],features:[He([sn,mt,an,ln,Et,Ft,bt]),yt,ve],decls:21,vars:34,consts:[["titleTpl",""],["chkAllTpl",""],[3,"nzData","nzPageIndex","nzPageSize","nzTotal","nzShowPagination","nzFrontPagination","nzBordered","nzSize","nzLoading","nzLoadingDelay","nzLoadingIndicator","nzTitle","nzFooter","nzScroll","nzVirtualItemSize","nzVirtualMaxBufferPx","nzVirtualMinBufferPx","nzVirtualForTrackBy","nzNoResult","nzPageSizeOptions","nzShowQuickJumper","nzShowSizeChanger","nzPaginationPosition","nzPaginationType","nzItemRender","nzSimple","nzShowTotal","nzWidthConfig","nzPageIndexChange","nzPageSizeChange","contextmenu"],["table",""],[1,"st__body"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["bodyTpl",""],["nz-virtual-scroll",""],["totalTpl",""],["contextmenuTpl","nzDropdownMenu"],["nz-menu","",1,"st__contextmenu"],[3,"innerHTML"],["class","st__head-optional",3,"innerHTML"],["class","st__head-tip","nz-tooltip","","nz-icon","","nzType","question-circle",3,"nzTooltipTitle"],[1,"st__head-optional",3,"innerHTML"],["nz-tooltip","","nz-icon","","nzType","question-circle",1,"st__head-tip",3,"nzTooltipTitle"],["nz-checkbox","",1,"st__checkall",3,"nzDisabled","ngModel","nzIndeterminate","ngModelChange"],["nzWidth","50px",3,"rowSpan"],["nz-resizable","",3,"colSpan","rowSpan","nzWidth","nzLeft","nzRight","ngClass","nzShowSort","nzSortOrder","nzCustomFilter","st__has-filter","nzDisabled","nzMaxWidth","nzMinWidth","nzBounds","nzPreview","nzSortOrderChange","nzResizeEnd",4,"let"],["nz-resizable","",3,"colSpan","rowSpan","nzWidth","nzLeft","nzRight","ngClass","nzShowSort","nzSortOrder","nzCustomFilter","nzDisabled","nzMaxWidth","nzMinWidth","nzBounds","nzPreview","nzSortOrderChange","nzResizeEnd"],["nzDirection","right"],["nz-th-extra","",3,"col","f","locale"],[1,"ant-table-selection"],["class","ant-table-selection-extra"],["selectionMenu","nzDropdownMenu"],["nz-menu","",1,"ant-table-selection-menu"],[1,"ant-table-selection-extra"],["nz-dropdown","","nzPlacement","bottomLeft",1,"ant-table-selection-down","st__checkall-selection",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["nz-menu-item","",3,"innerHTML","click"],["nz-menu-item","",3,"innerHTML"],["nz-th-extra","",3,"col","f","locale","n","handle"],["nz-resizable","",3,"colSpan","rowSpan","nzWidth","nzLeft","nzRight","ngClass","nzShowSort","nzSortOrder","nzCustomFilter","st__has-filter","nzDisabled","nzMaxWidth","nzMinWidth","nzBounds","nzPreview"],[3,"ngClass","click","dblclick"],["nzWidth","50px",3,"nzShowExpand","nzExpand"],[3,"nzExpand"],["nzWidth","50px",3,"nzShowExpand","nzExpand","nzExpandChange","click"],[3,"nzLeft","nzRight","ngClass"],["class","ant-table-rep__title"],[3,"data","i","index","c","cIdx","n"],[1,"ant-table-rep__title"],["nz-submenu","",3,"nzTitle"]],template:function(t,o){if(t&1&&(C(0,ra,3,3,"ng-template",null,0,oe)(2,aa,1,5,"ng-template",null,1,oe),_(4,"nz-table",2,3),ce("nzPageIndexChange",function(s){return le(o.pi,s)||(o.pi=s),s}),S("nzPageIndexChange",function(){return o._change("pi")}),ce("nzPageSizeChange",function(s){return le(o.ps,s)||(o.ps=s),s}),S("nzPageSizeChange",function(){return o._change("ps")})("contextmenu",function(s){return o.onContextmenu(s)}),C(6,ka,3,0,"thead"),_(7,"tbody",4),C(8,Ia,1,4,null,5)(9,Ra,6,9,"ng-template",null,6,oe)(11,Ha,1,0,null,7)(12,Ba,2,0)(13,Wa,1,4,null,5),z(),C(14,Ua,1,1,"ng-template",null,8,oe),z(),_(16,"nz-dropdown-menu",null,9)(18,"ul",10),U(19,Qa,2,1,null,null,ae),z()()),t&2){let a=A(15);h(4),N("st__no-column",o.noColumns),m("nzData",o._data),Ce("nzPageIndex",o.pi)("nzPageSize",o.ps),m("nzTotal",o.total)("nzShowPagination",o._isPagination)("nzFrontPagination",!1)("nzBordered",o.bordered)("nzSize",o.size)("nzLoading",o.noColumns||o._loading)("nzLoadingDelay",o.loadingDelay)("nzLoadingIndicator",o.loadingIndicator)("nzTitle",o.header)("nzFooter",o.footer)("nzScroll",o.scroll)("nzVirtualItemSize",o.virtualItemSize)("nzVirtualMaxBufferPx",o.virtualMaxBufferPx)("nzVirtualMinBufferPx",o.virtualMinBufferPx)("nzVirtualForTrackBy",o.virtualForTrackBy)("nzNoResult",o.noResult)("nzPageSizeOptions",o.page.pageSizes)("nzShowQuickJumper",o.page.showQuickJumper)("nzShowSizeChanger",o.page.showSize)("nzPaginationPosition",o.page.position)("nzPaginationType",o.page.type)("nzItemRender",o.page.itemRender)("nzSimple",o.page.simple)("nzShowTotal",a)("nzWidthConfig",o._widthConfig),h(2),b(6,o.showHeader?6:-1),h(2),b(8,o._loading?-1:8),h(3),b(11,o.virtualScroll?11:12),h(2),b(13,o._loading?-1:13),h(6),Z(o.contextmenuList)}},dependencies:()=>[nt,$e,Le,Be,dn,Oi,Mi,Di,Ei,Ii,Ai,Ni,Ri,Pi,ki,Vi,Fi,me,je,lt,st,yi,ct,pt,at,_o,hn,Co,As],encapsulation:2,changeDetection:0});let n=i;return n})(),As=(()=>{let i=class i{constructor(){this.stComp=T(fn,{host:!0}),this.router=T(Dt),this.modalHelper=T(ri),this.drawerHelper=T(ai),this.n=new R}get routerState(){let{pi:e,ps:t,total:o}=this.stComp;return{pi:e,ps:t,total:o}}report(e){this.n.emit({type:e,item:this.i,col:this.c})}_checkbox(e){this.i.checked=e,this.report("checkbox")}_radio(){this.data.filter(e=>!e.disabled).forEach(e=>e.checked=!1),this.i.checked=!0,this.report("radio")}_link(e){this._stopPropagation(e);let t=this.c.click(this.i,this.stComp);return typeof t=="string"&&this.router.navigateByUrl(t,{state:this.routerState}),!1}_stopPropagation(e){e.preventDefault(),e.stopPropagation()}_btn(e,t){t?.stopPropagation();let o=this.stComp.cog,a=this.i;if(e.type==="modal"||e.type==="static"){o.modal.pureRecoard===!0&&(a=this.stComp.pureItem(a));let s=e.modal,l={[s.paramsName]:a};this.modalHelper[e.type==="modal"?"create":"createStatic"](s.component,f(f({},l),s.params&&s.params(a)),qe({},!0,o.modal,s)).pipe(he(c=>typeof c<"u")).subscribe(c=>this.btnCallback(a,e,c));return}else if(e.type==="drawer"){o.drawer.pureRecoard===!0&&(a=this.stComp.pureItem(a));let s=e.drawer,l={[s.paramsName]:a};this.drawerHelper.create(s.title,s.component,f(f({},l),s.params&&s.params(a)),qe({},!0,o.drawer,s)).pipe(he(c=>typeof c<"u")).subscribe(c=>this.btnCallback(a,e,c));return}else if(e.type==="link"){let s=this.btnCallback(a,e);typeof s=="string"&&this.router.navigateByUrl(s,{state:this.routerState});return}this.btnCallback(a,e)}btnCallback(e,t,o){if(t.click)if(typeof t.click=="string")switch(t.click){case"load":this.stComp.load();break;case"reload":this.stComp.reload();break}else return t.click(e,o,this.stComp)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=q({type:i,selectors:[["st-td"]],inputs:{c:"c",cIdx:"cIdx",data:"data",i:"i",index:"index"},outputs:{n:"n"},decls:8,vars:1,consts:[["btnTpl",""],["btnItemTpl",""],["btnTextTpl",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-tooltip","",3,"nzTooltipTitle","d-block","width-100"],["nz-tooltip","",3,"nzTooltipTitle"],["nz-popconfirm","","class","st__btn-text",3,"nzPopconfirmTitle","nzIcon","nzCondition","nzCancelText","nzOkText","nzOkType","ngClass"],["nz-popconfirm","",1,"st__btn-text",3,"nzPopconfirmTitle","nzIcon","nzCondition","nzCancelText","nzOkText","nzOkType","ngClass","nzOnConfirm","click"],[1,"st__btn-text",3,"ngClass","click"],[3,"innerHTML","ngClass"],["nz-icon","",3,"nzIconfont"],["nz-icon","",3,"nzType","nzTheme","nzSpin","nzTwotoneColor"],["nz-checkbox","",3,"nzDisabled","ngModel","ngModelChange"],["nz-radio","",3,"nzDisabled","ngModel","ngModelChange"],[3,"innerHTML","click"],[3,"nzColor","nz-tooltip"],[3,"innerHTML"],[3,"nzStatus","nzText","nz-tooltip"],[3,"value","options"],["st-widget-host","",3,"record","column"],[3,"innerText"],["nzType","vertical"],["nz-dropdown","","nzOverlayClassName","st__btn-sub",3,"nzDropdownMenu"],["nz-icon","","nzType","down"],["btnMenu","nzDropdownMenu"],["nz-menu",""],["nz-menu-divider",""],["nz-menu-item",""]],template:function(t,o){t&1&&C(0,es,2,1,"ng-template",null,0,oe)(2,rs,2,1,"ng-template",null,1,oe)(4,ps,2,5,"ng-template",null,2,oe)(6,us,1,6,null,3)(7,Rs,10,1),t&2&&(h(6),b(6,o.c.__render?6:7))},dependencies:[nt,$e,Le,Be,Wt,zo,me,Nt,je,qi,lt,st,vi,ct,wi,pt,Ye,At,at,cn],encapsulation:2,changeDetection:0});let n=i;return n})();var vo=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({});let n=i;return n})();var Vs=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({imports:[kt,Xe,Rn,vo,so,yo,Hi,Pe,Pt,Ot,Gi,Si,Ti,Rt,Vt,Li,Ht,go,ji,Zi]});let n=i;return n})();var Hs=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$s=/([^\#-~ |!])/g;function Ls(n){return n.replace(/&/g,"&amp;").replace(Hs,i=>{let r=i.charCodeAt(0),e=i.charCodeAt(1);return`&#${(r-55296)*1024+(e-56320)+65536};`}).replace($s,i=>`&#${i.charCodeAt(0)};`).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ru=(()=>{let i=class i{constructor(){this.UNIQUE_WRAPPERS=["##==-open_tag-==##","##==-close_tag-==##"]}transform(e,t,o,a){if(!t)return e;let s=new RegExp(t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$&"),o),l=e.replace(s,`${this.UNIQUE_WRAPPERS[0]}$&${this.UNIQUE_WRAPPERS[1]}`);return Ls(l).replace(new RegExp(this.UNIQUE_WRAPPERS[0],"g"),a?`<span class="${a}">`:"<span>").replace(new RegExp(this.UNIQUE_WRAPPERS[1],"g"),"</span>")}};i.\u0275fac=function(t){return new(t||i)},i.\u0275pipe=Tn({name:"nzHighlight",type:i,pure:!0,standalone:!0});let n=i;return n})(),au=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=G({type:i}),i.\u0275inj=X({});let n=i;return n})();export{jt as a,kl as b,io as c,Wt as d,so as e,tl as f,lo as g,Oe as h,dn as i,_o as j,Zp as k,go as l,fn as m,Vs as n,bc as o,ru as p,au as q};
