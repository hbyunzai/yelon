import{Fd as L,Ic as _,Oc as O,a as l,da as k,fa as v,ha as m,lc as A,mc as E,n as M}from"./chunk-5WYQ2NZI.js";function Y(c,s){if(!c)return"";let e=l({},typeof s=="string"?{mask:s}:s),t=l({0:{pattern:/\d/,default:"0"},9:{pattern:/\d/},"#":{pattern:/[a-zA-Z0-9]/},U:{pattern:/[a-zA-Z]/,transform:i=>i.toLocaleUpperCase()},L:{pattern:/[a-zA-Z]/,transform:i=>i.toLocaleLowerCase()},"*":{pattern:/.*/,transform:()=>"*"}},e.tokens),r=c.split("");return e.mask.split("").reduce((i,n)=>{let a=t[n];if(!a)return i.push(n),i;let d=r.shift()??"";return a.pattern.test(d)?(typeof a.transform=="function"?i.push(a.transform(d)):i.push(d),i):(a.default&&i.push(a.default),i)},[]).join("")}var g={num:"(([-+]?\\d+\\.\\d+)|([-+]?\\d+)|([-+]?\\.\\d+))(?:[eE]([-+]?\\d+))?",idCard:"(^\\d{15}$)|(^\\d{17}(?:[0-9]|X)$)",mobile:"^(0|\\+?86|17951)?1[0-9]{10}$",url:"(((^https?:(?:\\/\\/)?)(?:[-;:&=\\+\\$,\\w]+@)?[A-Za-z0-9.-]+(?::\\d+)?|(?:www.|[-;:&=\\+\\$,\\w]+@)[A-Za-z0-9.-]+)((?:\\/[\\+~%\\/.\\w-_]*)?\\??(?:[-\\+=&;%@.\\w_]*)#?(?:[\\w]*))?)",ip:"(?:^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$)|(?:^(?:(?:[a-fA-F\\d]{1,4}:){7}(?:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){6}(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|:[a-fA-F\\d]{1,4}|:)|(?:[a-fA-F\\d]{1,4}:){5}(?::(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,2}|:)|(?:[a-fA-F\\d]{1,4}:){4}(?:(?::[a-fA-F\\d]{1,4}){0,1}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,3}|:)|(?:[a-fA-F\\d]{1,4}:){3}(?:(?::[a-fA-F\\d]{1,4}){0,2}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,4}|:)|(?:[a-fA-F\\d]{1,4}:){2}(?:(?::[a-fA-F\\d]{1,4}){0,3}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,5}|:)|(?:[a-fA-F\\d]{1,4}:){1}(?:(?::[a-fA-F\\d]{1,4}){0,4}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,6}|:)|(?::(?:(?::[a-fA-F\\d]{1,4}){0,5}:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}|(?::[a-fA-F\\d]{1,4}){1,7}|:)))(?:%[0-9a-zA-Z]{1,})?$)",color:"(?:#|0x)(?:[a-f0-9]{3}|[a-f0-9]{6})\\b|(?:rgb|hsl)a?\\([^\\)]*\\)",chinese:"[\u4E00-\u9FA5]+"};function N(c,s){return new RegExp(`^${c}$`,s)}var X={num:N(g.num),idCard:N(g.idCard,"i"),mobile:N(g.mobile),url:N(g.url),ip:N(g.ip),color:N(g.color),chinese:N(g.chinese)};var I=[{unit:"Q",value:Math.pow(10,15)},{unit:"T",value:Math.pow(10,12)},{unit:"B",value:Math.pow(10,9)},{unit:"M",value:Math.pow(10,6)},{unit:"K",value:1e3}];var R=class c{locale=m(A);defCurrencyCode=m(E,{optional:!0})??"USD";cogSrv=m(L);c;currencyPipe;constructor(){this.currencyPipe=new O(this.locale,this.defCurrencyCode),this.c=this.cogSrv.merge("utilCurrency",{startingUnit:"yuan",megaUnit:{Q:"\u4EAC",T:"\u5146",B:"\u4EBF",M:"\u4E07",K:"\u5343"},precision:2,ignoreZeroPrecision:!0})}format(s,e){e=l({startingUnit:this.c.startingUnit,precision:this.c.precision,ignoreZeroPrecision:this.c.ignoreZeroPrecision,ngCurrency:this.c.ngCurrency},e);let t=Number(s);if(s==null||isNaN(t))return"";if(e.startingUnit==="cent"&&(t=t/100),e.ngCurrency!=null){let i=e.ngCurrency;return this.currencyPipe.transform(t,i.currencyCode,i.display,i.digitsInfo,i.locale||this.locale)}let r=_(t,this.locale,`.${e.ignoreZeroPrecision?1:e.precision}-${e.precision}`);return e.ignoreZeroPrecision?r.replace(/(?:\.[0]+)$/g,""):r}mega(s,e){e=l({precision:this.c.precision,unitI18n:this.c.megaUnit,startingUnit:this.c.startingUnit},e);let t=Number(s),r={raw:s,value:"",unit:"",unitI18n:""};if(isNaN(t)||t===0)return r.value=s.toString(),r;e.startingUnit==="cent"&&(t=t/100);let i=Math.abs(+t),n=Math.pow(10,e.precision),a=t<0;for(let d of I){let o=i/d.value;if(o=Math.round(o*n)/n,o>=1){i=o,r.unit=d.unit;break}}return r.value=(a?"-":"")+i,r.unitI18n=e.unitI18n[r.unit],r}cny(s,e){if(e=l({inWords:!0,minusSymbol:"\u8D1F",startingUnit:this.c.startingUnit},e),s=Number(s),isNaN(s))return"";e.startingUnit==="cent"&&(s=s/100),s=s.toString();let t,r;[t,r]=s.split(".");let i="";t.startsWith("-")&&(i=e.minusSymbol,t=t.substring(1)),/^-?\d+$/.test(s)&&(r=null),t=(+t).toString();let n=e.inWords,a={num:n?["","\u58F9","\u8D30","\u53C1","\u8086","\u4F0D","\u9646","\u67D2","\u634C","\u7396","\u70B9"]:["","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u70B9"],radice:n?["","\u62FE","\u4F70","\u4EDF","\u4E07","\u62FE","\u4F70","\u4EDF","\u4EBF","\u62FE","\u4F70","\u4EDF","\u4E07\u4EBF","\u62FE","\u4F70","\u4EDF","\u5146","\u62FE","\u4F70","\u4EDF"]:["","\u5341","\u767E","\u5343","\u4E07","\u5341","\u767E","\u5343","\u4EBF","\u5341","\u767E","\u5343","\u4E07\u4EBF","\u5341","\u767E","\u5343","\u5146","\u5341","\u767E","\u5343"],dec:["\u89D2","\u5206","\u5398","\u6BEB"]};n&&(s=(+s).toFixed(5).toString());let d="",o=t.length;if(t==="0"||o===0)d="\u96F6";else{let u="";for(let f=0;f<o;f++){let y=+t[f],S=o-f-1,U=f>1&&y!==0&&t[f-1]==="0"?"\u96F6":"",H=y===0&&S%4!==0||t.substring(f-3,f-3+4)==="0000",z=u,b=a.num[y];u=H?"":a.radice[S],f===0&&b==="\u4E00"&&u==="\u5341"&&(b=""),y>1&&b==="\u4E8C"&&["","\u5341","\u767E"].indexOf(u)===-1&&z!=="\u5341"&&(b="\u4E24"),d+=U+b+u}}let h="",p=r?r.toString().length:0;if(r===null)h=n?"\u6574":"";else if(r==="0")h="\u96F6";else for(let u=0;u<p&&!(n&&u>a.dec.length-1);u++){let f=r[u],y=f==="0"?"\u96F6":"",S=a.num[+f],T=n?a.dec[u]:"";h+=y+S+T}return i+(n?d+(h==="\u96F6"?"\u5143\u6574":`\u5143${h}`):d+(h===""?"":`\u70B9${h}`))}static \u0275fac=function(e){return new(e||c)};static \u0275prov=k({token:c,factory:c.\u0275fac,providedIn:"root"})};var C=class c{_title="";key;level=0;origin;parentNode=null;_icon="";_children=[];_isLeaf=!1;_isChecked=!1;_isSelectable=!1;_isDisabled=!1;_isDisableCheckbox=!1;_isExpanded=!1;_isHalfChecked=!1;_isSelected=!1;_isLoading=!1;canHide=!1;isMatched=!1;service=null;component;isStart;isEnd;get treeService(){return this.service||this.parentNode&&this.parentNode.treeService}constructor(s,e=null,t=null){if(s instanceof c)return s;this.service=t||null,this.origin=s,this.key=s.key,this.parentNode=e,this._title=s.title||"---",this._icon=s.icon||"",this._isLeaf=s.isLeaf||!1,this._children=[],this._isChecked=s.checked||!1,this._isSelectable=s.disabled||s.selectable!==!1,this._isDisabled=s.disabled||!1,this._isDisableCheckbox=s.disableCheckbox||!1,this._isExpanded=s.isLeaf?!1:s.expanded||!1,this._isHalfChecked=!1,this._isSelected=!s.disabled&&s.selected||!1,this._isLoading=!1,this.isMatched=!1,e?this.level=e.level+1:this.level=0;let r=this.treeService;r?.treeNodePostProcessor?.(this),typeof s.children<"u"&&s.children!==null&&s.children.forEach(i=>{r&&!r.isCheckStrictly&&s.checked&&!s.disabled&&!i.disabled&&!i.disableCheckbox&&(i.checked=s.checked),this._children.push(new c(i,this))})}get title(){return this._title}set title(s){this._title=s,this.update()}get icon(){return this._icon}set icon(s){this._icon=s,this.update()}get children(){return this._children}set children(s){this._children=s,this.update()}get isLeaf(){return this._isLeaf}set isLeaf(s){this._isLeaf=s,this.update()}get isChecked(){return this._isChecked}set isChecked(s){this._isChecked=s,this.origin.checked=s,this.afterValueChange("isChecked")}get isHalfChecked(){return this._isHalfChecked}set isHalfChecked(s){this._isHalfChecked=s,this.afterValueChange("isHalfChecked")}get isSelectable(){return this._isSelectable}set isSelectable(s){this._isSelectable=s,this.update()}get isDisabled(){return this._isDisabled}set isDisabled(s){this._isDisabled=s,this.update()}get isDisableCheckbox(){return this._isDisableCheckbox}set isDisableCheckbox(s){this._isDisableCheckbox=s,this.update()}get isExpanded(){return this._isExpanded}set isExpanded(s){this._isExpanded=s,this.origin.expanded=s,this.afterValueChange("isExpanded"),this.afterValueChange("reRender")}get isSelected(){return this._isSelected}set isSelected(s){this._isSelected=s,this.origin.selected=s,this.afterValueChange("isSelected")}get isLoading(){return this._isLoading}set isLoading(s){this._isLoading=s,this.update()}setSyncChecked(s=!1,e=!1){this.setChecked(s,e),this.treeService&&!this.treeService.isCheckStrictly&&this.treeService.conduct(this)}setChecked(s=!1,e=!1){this.origin.checked=s,this.isChecked=s,this.isHalfChecked=e}setExpanded(s){this._isExpanded=s,this.origin.expanded=s,this.afterValueChange("isExpanded")}getParentNode(){return this.parentNode}getChildren(){return this.children}addChildren(s,e=-1){this.isLeaf||(s.forEach(t=>{let r=n=>{n.getChildren().forEach(a=>{a.level=a.getParentNode().level+1,a.origin.level=a.level,r(a)})},i=t;i instanceof c?i.parentNode=this:i=new c(t,this),i.level=this.level+1,i.origin.level=i.level,r(i);try{e===-1?this.children.push(i):this.children.splice(e,0,i)}catch{}}),this.origin.children=this.getChildren().map(t=>t.origin),this.isLoading=!1),this.afterValueChange("addChildren"),this.afterValueChange("reRender")}clearChildren(){this.afterValueChange("clearChildren"),this.children=[],this.origin.children=[],this.afterValueChange("reRender")}remove(){let s=this.getParentNode();s&&(s.children=s.getChildren().filter(e=>e.key!==this.key),s.origin.children=s.origin.children.filter(e=>e.key!==this.key),this.afterValueChange("remove"),this.afterValueChange("reRender"))}afterValueChange(s){if(this.treeService)switch(s){case"isChecked":this.treeService.setCheckedNodeList(this);break;case"isHalfChecked":this.treeService.setHalfCheckedNodeList(this);break;case"isExpanded":this.treeService.setExpandedNodeList(this);break;case"isSelected":this.treeService.setNodeActive(this);break;case"clearChildren":this.treeService.afterRemove(this.getChildren());break;case"remove":this.treeService.afterRemove([this]);break;case"reRender":this.treeService.flattenTreeData(this.treeService.rootNodes,this.treeService.getExpandedNodeList().map(e=>e.key));break}this.update()}update(){this.component&&this.component.markForCheck()}};function x(c){let{isDisabled:s,isDisableCheckbox:e}=c;return!!(s||e)}function D(c,s){return s.length>0&&s.indexOf(c)>-1}function j(c,s){return`${c}-${s}`}function $(c,s){return c??s}function G(c=[],s=[]){let e=new Set(s===!0?[]:s),t=[];function r(i,n=null){return i.map((a,d)=>{let o=j(n?n.pos:"0",d),h=$(a.key,o);a.isStart=[...n?n.isStart:[],d===0],a.isEnd=[...n?n.isEnd:[],d===i.length-1];let p={parent:n,pos:o,children:[],data:a,isStart:[...n?n.isStart:[],d===0],isEnd:[...n?n.isEnd:[],d===i.length-1]};return t.push(p),s===!0||e.has(h)||a.isExpanded?p.children=r(a.children||[],p):p.children=[],p})}return r(c),t}var Ce=(()=>{class c{DRAG_SIDE_RANGE=.25;DRAG_MIN_GAP=2;isCheckStrictly=!1;isMultiple=!1;selectedNode;rootNodes=[];flattenNodes$=new M([]);selectedNodeList=[];expandedNodeList=[];checkedNodeList=[];halfCheckedNodeList=[];matchedNodeList=[];treeNodePostProcessor;initTree(e){this.rootNodes=e,this.expandedNodeList=[],this.selectedNodeList=[],this.halfCheckedNodeList=[],this.checkedNodeList=[],this.matchedNodeList=[]}flattenTreeData(e,t=[]){this.flattenNodes$.next(G(e,t).map(r=>r.data))}getSelectedNode(){return this.selectedNode}getSelectedNodeList(){return this.conductNodeState("select")}getCheckedNodeKeys(){let e=[],t=this.getCheckedNodeList(),r=i=>{i.forEach(n=>{e.push(n.key),!(n.children.length<1)&&r(n.children)})};return r(t),e}getCheckedNodeList(){return this.conductNodeState("check")}getHalfCheckedNodeList(){return this.conductNodeState("halfCheck")}getExpandedNodeList(){return this.conductNodeState("expand")}getMatchedNodeList(){return this.conductNodeState("match")}isArrayOfNzTreeNode(e){return e.every(t=>t instanceof C)}setSelectedNode(e){this.selectedNode=e}setNodeActive(e){!this.isMultiple&&e.isSelected&&(this.selectedNodeList.forEach(t=>{e.key!==t.key&&(t.isSelected=!1)}),this.selectedNodeList=[]),this.setSelectedNodeList(e,this.isMultiple)}setSelectedNodeList(e,t=!1){let r=this.getIndexOfArray(this.selectedNodeList,e.key);t?e.isSelected&&r===-1&&this.selectedNodeList.push(e):e.isSelected&&r===-1&&(this.selectedNodeList=[e]),e.isSelected||(this.selectedNodeList=this.selectedNodeList.filter(i=>i.key!==e.key))}setHalfCheckedNodeList(e){let t=this.getIndexOfArray(this.halfCheckedNodeList,e.key);e.isHalfChecked&&t===-1?this.halfCheckedNodeList.push(e):!e.isHalfChecked&&t>-1&&(this.halfCheckedNodeList=this.halfCheckedNodeList.filter(r=>e.key!==r.key))}setCheckedNodeList(e){let t=this.getIndexOfArray(this.checkedNodeList,e.key);e.isChecked&&t===-1?this.checkedNodeList.push(e):!e.isChecked&&t>-1&&(this.checkedNodeList=this.checkedNodeList.filter(r=>e.key!==r.key))}conductNodeState(e="check"){let t=[];switch(e){case"select":t=this.selectedNodeList;break;case"expand":t=this.expandedNodeList;break;case"match":t=this.matchedNodeList;break;case"check":{t=this.checkedNodeList;let r=i=>{let n=i.getParentNode();return n?this.checkedNodeList.findIndex(a=>a.key===n.key)>-1?!0:r(n):!1};this.isCheckStrictly||(t=this.checkedNodeList.filter(i=>!r(i)));break}case"halfCheck":this.isCheckStrictly||(t=this.halfCheckedNodeList);break}return t}setExpandedNodeList(e){if(e.isLeaf)return;let t=this.getIndexOfArray(this.expandedNodeList,e.key);e.isExpanded&&t===-1?this.expandedNodeList.push(e):!e.isExpanded&&t>-1&&this.expandedNodeList.splice(t,1)}setMatchedNodeList(e){let t=this.getIndexOfArray(this.matchedNodeList,e.key);e.isMatched&&t===-1?this.matchedNodeList.push(e):!e.isMatched&&t>-1&&this.matchedNodeList.splice(t,1)}refreshCheckState(e=!1){e||this.checkedNodeList.forEach(t=>{this.conduct(t,e)})}conduct(e,t=!1){let r=e.isChecked;e&&!t&&(this.conductUp(e),this.conductDown(e,r))}conductUp(e){let t=e.getParentNode();t&&(x(t)||(t.children.every(r=>x(r)||!r.isHalfChecked&&r.isChecked)?(t.isChecked=!0,t.isHalfChecked=!1):t.children.some(r=>r.isHalfChecked||r.isChecked)?(t.isChecked=!1,t.isHalfChecked=!0):(t.isChecked=!1,t.isHalfChecked=!1)),this.setCheckedNodeList(t),this.setHalfCheckedNodeList(t),this.conductUp(t))}conductDown(e,t){x(e)||(e.isChecked=t,e.isHalfChecked=!1,this.setCheckedNodeList(e),this.setHalfCheckedNodeList(e),e.children.forEach(r=>{this.conductDown(r,t)}))}afterRemove(e){let t=r=>{this.selectedNodeList=this.selectedNodeList.filter(i=>i.key!==r.key),this.expandedNodeList=this.expandedNodeList.filter(i=>i.key!==r.key),this.checkedNodeList=this.checkedNodeList.filter(i=>i.key!==r.key),r.children&&r.children.forEach(i=>{t(i)})};e.forEach(r=>{t(r)}),this.refreshCheckState(this.isCheckStrictly)}refreshDragNode(e){e.children.length===0?this.conductUp(e):e.children.forEach(t=>{this.refreshDragNode(t)})}resetNodeLevel(e){let t=e.getParentNode();t?e.level=t.level+1:e.level=0;for(let r of e.children)this.resetNodeLevel(r)}calcDropPosition(e){let{clientY:t}=e,{top:r,bottom:i,height:n}=e.target.getBoundingClientRect(),a=Math.max(n*this.DRAG_SIDE_RANGE,this.DRAG_MIN_GAP);return t<=r+a?-1:t>=i-a?1:0}dropAndApply(e,t=-1){if(!e||t>1)return;let r=e.treeService,i=e.getParentNode(),n=this.selectedNode.getParentNode();switch(n?n.children=n.children.filter(a=>a.key!==this.selectedNode.key):this.rootNodes=this.rootNodes.filter(a=>a.key!==this.selectedNode.key),t){case 0:e.addChildren([this.selectedNode]),this.resetNodeLevel(e);break;case-1:case 1:{let a=t===1?1:0;if(i){i.addChildren([this.selectedNode],i.children.indexOf(e)+a);let d=this.selectedNode.getParentNode();d&&this.resetNodeLevel(d)}else{let d=this.rootNodes.indexOf(e)+a;this.rootNodes.splice(d,0,this.selectedNode),this.rootNodes[d].parentNode=null,this.resetNodeLevel(this.rootNodes[d])}break}}this.rootNodes.forEach(a=>{a.treeService||(a.service=r),this.refreshDragNode(a)})}formatEvent(e,t,r){let i={eventName:e,node:t,event:r};switch(e){case"dragstart":case"dragenter":case"dragover":case"dragleave":case"drop":case"dragend":Object.assign(i,{dragNode:this.getSelectedNode()});break;case"click":case"dblclick":Object.assign(i,{selectedKeys:this.selectedNodeList}),Object.assign(i,{nodes:this.selectedNodeList}),Object.assign(i,{keys:this.selectedNodeList.map(n=>n.key)});break;case"check":{let n=this.getCheckedNodeList();Object.assign(i,{checkedKeys:n}),Object.assign(i,{nodes:n}),Object.assign(i,{keys:n.map(a=>a.key)});break}case"search":Object.assign(i,{matchedKeys:this.getMatchedNodeList()}),Object.assign(i,{nodes:this.getMatchedNodeList()}),Object.assign(i,{keys:this.getMatchedNodeList().map(n=>n.key)});break;case"expand":Object.assign(i,{nodes:this.expandedNodeList}),Object.assign(i,{keys:this.expandedNodeList.map(n=>n.key)});break}return i}getIndexOfArray(e,t){return e.findIndex(r=>r.key===t)}conductCheck(e,t){this.checkedNodeList=[],this.halfCheckedNodeList=[];let r=i=>{i.forEach(n=>{e===null?n.isChecked=!!n.origin.checked:D(n.key,e||[])?(n.isChecked=!0,n.isHalfChecked=!1):(n.isChecked=!1,n.isHalfChecked=!1),n.children.length>0&&r(n.children)})};r(this.rootNodes),this.refreshCheckState(t)}conductExpandedKeys(e=[]){let t=new Set(e===!0?[]:e);this.expandedNodeList=[];let r=i=>{i.forEach(n=>{n.setExpanded(e===!0||t.has(n.key)||n.isExpanded===!0),n.isExpanded&&this.setExpandedNodeList(n),n.children.length>0&&r(n.children)})};r(this.rootNodes)}conductSelectedKeys(e,t){this.selectedNodeList.forEach(i=>i.isSelected=!1),this.selectedNodeList=[];let r=i=>i.every(n=>{if(D(n.key,e)){if(n.isSelected=!0,this.setSelectedNodeList(n),!t)return!1}else n.isSelected=!1;return n.children.length>0?r(n.children):!0});r(this.rootNodes)}expandNodeAllParentBySearch(e){let t=r=>{if(r&&(r.canHide=!1,r.setExpanded(!0),this.setExpandedNodeList(r),r.getParentNode()))return t(r.getParentNode())};t(e.getParentNode())}static \u0275fac=function(t){return new(t||c)};static \u0275prov=k({token:c,factory:c.\u0275fac})}return c})(),be=new v("NzTreeHigherOrder"),F=class{nzTreeService;constructor(s){this.nzTreeService=s}coerceTreeNodes(s){let e=[];return this.nzTreeService.isArrayOfNzTreeNode(s)?e=s.map(t=>(t.service=this.nzTreeService,t)):e=s.map(t=>new C(t,null,this.nzTreeService)),e}getTreeNodes(){return this.nzTreeService.rootNodes}getTreeNodeByKey(s){let e=[],t=r=>{e.push(r),r.getChildren().forEach(i=>{t(i)})};return this.getTreeNodes().forEach(r=>{t(r)}),e.find(r=>r.key===s)||null}getCheckedNodeList(){return this.nzTreeService.getCheckedNodeList()}getSelectedNodeList(){return this.nzTreeService.getSelectedNodeList()}getHalfCheckedNodeList(){return this.nzTreeService.getHalfCheckedNodeList()}getExpandedNodeList(){return this.nzTreeService.getExpandedNodeList()}getMatchedNodeList(){return this.nzTreeService.getMatchedNodeList()}};var P=class c{cogSrv=m(L);c;constructor(){this.c=this.cogSrv.merge("utilArray",{deepMapName:"deep",parentMapName:"parent",idMapName:"id",parentIdMapName:"parent_id",childrenMapName:"children",titleMapName:"title",checkedMapname:"checked",selectedMapname:"selected",expandedMapname:"expanded",disabledMapname:"disabled"})}treeToArr(s,e){let t=l({deepMapName:this.c.deepMapName,parentMapName:this.c.parentMapName,childrenMapName:this.c.childrenMapName,clearChildren:!0,cb:null},e),r=[],i=(n,a,d=0)=>{for(let o of n){o[t.deepMapName]=d,o[t.parentMapName]=a,t.cb&&t.cb(o,a,d),r.push(o);let h=o[t.childrenMapName];h!=null&&Array.isArray(h)&&h.length>0&&i(h,o,d+1),t.clearChildren&&delete o[t.childrenMapName]}};return i(s,null),r}arrToTree(s,e){if(!Array.isArray(s)||s.length===0)return[];let t=l({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,childrenMapName:this.c.childrenMapName,cb:null},e),r=[],i={},n=t.rootParentIdValue,a=s;if(!n){let d=a.map(h=>h[t.parentIdMapName]),o=d.findIndex(h=>h==null);n=o!==-1?d[o]:d.sort()[0]}for(let d of a){let o=d[t.idMapName],h=d[t.parentIdMapName];i[o]=i[o]||[],d[t.childrenMapName]=i[o],t.cb&&t.cb(d),h!==n?(i[h]=i[h]||[],i[h].push(d)):r.push(d)}return r}arrToTreeNode(s,e){let t=l({idMapName:this.c.idMapName,parentIdMapName:this.c.parentIdMapName,titleMapName:this.c.titleMapName,isLeafMapName:"isLeaf",checkedMapname:this.c.checkedMapname,selectedMapname:this.c.selectedMapname,expandedMapname:this.c.expandedMapname,disabledMapname:this.c.disabledMapname,cb:null},e),r=this.arrToTree(s,{idMapName:t.idMapName,parentIdMapName:t.parentIdMapName,childrenMapName:"children"});return this.visitTree(r,(i,n,a)=>{i.key=i[t.idMapName],i.title=i[t.titleMapName],i.checked=i[t.checkedMapname],i.selected=i[t.selectedMapname],i.expanded=i[t.expandedMapname],i.disabled=i[t.disabledMapname],i[t.isLeafMapName]==null?i.isLeaf=i.children.length===0:i.isLeaf=i[t.isLeafMapName],t.cb&&t.cb(i,n,a)}),r.map(i=>new C(i))}visitTree(s,e,t){t=l({childrenMapName:this.c.childrenMapName},t);let r=(i,n,a)=>{for(let d of i){e(d,n,a);let o=d[t.childrenMapName];Array.isArray(o)&&o.length>0&&r(o,d,a+1)}};r(s,null,1)}findTree(s,e,t){let r;return this.visitTree(s,i=>{r===void 0&&e(i)&&(r=i)},t),r}getKeysByTreeNode(s,e){let t=l({includeHalfChecked:!0},e),r=[];return this.visitTree(s,(i,n,a)=>{(i.isChecked||t.includeHalfChecked&&i.isHalfChecked)&&r.push(t.cb?t.cb(i,n,a):t.keyMapName?i.origin[t.keyMapName]:i.key)}),r}baseFlat(s,e,t=[]){let r=-1;for(;++r<s.length;){let i=s[r];if(e>0&&Array.isArray(i))if(e>1)this.baseFlat(i,e-1,t);else{let n=-1,a=t.length;for(;++n<i.length;)t[a+n]=i[n]}else t[t.length]=i}return t}flat(s,e=1/0){return Array.isArray(s)?this.baseFlat(s,e):s}groupBy(s,e){return Array.isArray(s)?s.reduce((t,r)=>{let i=e(r);return Object.prototype.hasOwnProperty.call(t,i)?t[i].push(r):t[i]=[r],t},{}):{}}uniq(s,e){return Array.from(s.reduce((t,r)=>{let i=e?typeof e=="string"?r[e]:e(r):r;return t.has(i)||t.set(i,r),t},new Map).values())}static \u0275fac=function(e){return new(e||c)};static \u0275prov=k({token:c,factory:c.\u0275fac,providedIn:"root"})};export{Y as a,X as b,R as c,C as d,G as e,Ce as f,be as g,F as h,P as i};
